\hypertarget{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c}{\section{André backup conflitos/main (Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).c File Reference}
\label{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c}\index{André backup conflitos/main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c@{André backup conflitos/main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}}
}
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include \char`\"{}Communication/communication.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}main.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}datalogger.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_aa570d24f638774bf52f70f1d9d9d45f8}{log\-\_\-init} (F\-I\-L\-E $\ast$log)
\item 
int \hyperlink{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a840291bc02cba5474a4cb46a9b9566fe}{main} (void)
\item 
int \hyperlink{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a26855b7739897854265d51aa61329390}{periodic\-\_\-task\-\_\-1} (void)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure} = 0
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_aa570d24f638774bf52f70f1d9d9d45f8}{\index{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}!log\-\_\-init@{log\-\_\-init}}
\index{log\-\_\-init@{log\-\_\-init}!main (Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-05-17).c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}}
\subsubsection[{log\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void log\-\_\-init (
\begin{DoxyParamCaption}
\item[{F\-I\-L\-E $\ast$}]{log}
\end{DoxyParamCaption}
)}}\label{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_aa570d24f638774bf52f70f1d9d9d45f8}


Definition at line 8 of file main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c.


\begin{DoxyCode}
\{
  fprintf(log,\textcolor{stringliteral}{"Iterations\(\backslash\)tADC\(\backslash\)t|\(\backslash\)t\(\backslash\)tACC\(\backslash\)t\(\backslash\)t|\(\backslash\)t\(\backslash\)tMAG\(\backslash\)t\(\backslash\)t|\(\backslash\)t\(\backslash\)tGYR\(\backslash\)t\(\backslash\)tT\(\backslash\)n"}); 
      printf(\textcolor{stringliteral}{"\(\backslash\)nIterations\(\backslash\)tADC\(\backslash\)t|\(\backslash\)t\(\backslash\)tACC\(\backslash\)t\(\backslash\)t|\(\backslash\)t\(\backslash\)tMAG\(\backslash\)t\(\backslash\)t|\(\backslash\)t\(\backslash\)tGYR\(\backslash\)t\(\backslash\)tT\(\backslash\)tADC Valid\(\backslash\)tIMU
       Valid\(\backslash\)n"});
  fprintf(log,\textcolor{stringliteral}{"    #\(\backslash\)t|\(\backslash\)t0\(\backslash\)t|\(\backslash\)t X\(\backslash\)tY\(\backslash\)tZ\(\backslash\)t|\(\backslash\)t X\(\backslash\)tY\(\backslash\)tZ\(\backslash\)t|\(\backslash\)t X\(\backslash\)tY\(\backslash\)tZ\(\backslash\)t\(\backslash\)n"}); printf
      (\textcolor{stringliteral}{"    #\(\backslash\)t|\(\backslash\)t0\(\backslash\)t|\(\backslash\)t X\(\backslash\)tY\(\backslash\)tZ\(\backslash\)t|\(\backslash\)t X\(\backslash\)tY\(\backslash\)tZ\(\backslash\)t|\(\backslash\)t X\(\backslash\)tY\(\backslash\)tZ\(\backslash\)t\(\backslash\)n"});
  fprintf(log,\textcolor{stringliteral}{"
      \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\(\backslash\)n"});
  printf(\textcolor{stringliteral}{"
      \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\(\backslash\)n"});
  \textcolor{keywordflow}{return};
\}
\end{DoxyCode}
\hypertarget{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a840291bc02cba5474a4cb46a9b9566fe}{\index{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}!main@{main}}
\index{main@{main}!main (Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-05-17).c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a840291bc02cba5474a4cb46a9b9566fe}


Definition at line 18 of file main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c.



References I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::acc, I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::acc, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::act, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::clk\-\_\-source, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::cs, datalogger\-\_\-init(), D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-N\-O\-T\-\_\-\-R\-U\-N\-N\-I\-N\-G, D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-R\-U\-N\-N\-I\-N\-G, datalogger\-\_\-status(), datalogger\-\_\-update\-\_\-\-I\-P\-C(), datalogger\-\_\-write\-\_\-file(), devices\-\_\-init(), eff\-\_\-data, E\-F\-F\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::\-F, F\-A\-I\-L\-U\-R\-E, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::full\-\_\-res, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::gyr, I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::gyr, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, imu\-\_\-data, imu\-\_\-param, log\-\_\-init(), I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::lpf\-\_\-bw, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::mag, I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::mag, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::meas\-\_\-mode, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::mode, I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::new\-\_\-data, E\-F\-F\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::new\-\_\-data, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::op\-\_\-mode, quittask, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::range, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::range, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::rate, read\-\_\-all\-\_\-data(), I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::samples\-\_\-avg, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::speed, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, spi\-\_\-param, T\-A\-S\-K1\-\_\-\-P\-E\-R\-I\-O\-D\-\_\-\-U\-S, T\-A\-S\-K2\-\_\-\-P\-E\-R\-I\-O\-D\-\_\-\-U\-S, task\-\_\-1\-\_\-period\-\_\-us, I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::temp, threads\-\_\-linux\-\_\-timer\-\_\-start\-\_\-task\-\_\-1(), threads\-\_\-linux\-\_\-timer\-\_\-start\-\_\-task\-\_\-2(), threads\-\_\-linux\-\_\-timer\-\_\-stop\-\_\-task\-\_\-1(), threads\-\_\-linux\-\_\-timer\-\_\-stop\-\_\-task\-\_\-2(), D\-A\-T\-A\-\_\-\-X\-Y\-Z\-::x, D\-A\-T\-A\-\_\-\-X\-Y\-Z\-::y, and D\-A\-T\-A\-\_\-\-X\-Y\-Z\-::z.


\begin{DoxyCode}
\{
  \textcolor{comment}{//int i2c\_dev, spi\_dev;}
  FILE *log;
  \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} *data;
  \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} datap[4];
  \textcolor{keywordtype}{int} i;
  \textcolor{keywordtype}{double} value[3];
  
  \hyperlink{structIMU__PARAM__STRUCT}{IMU\_PARAM\_STRUCT} \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param};
  \hyperlink{structSPI__PARAM__STRUCT}{SPI\_PARAM\_STRUCT} \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param};
  \hyperlink{structIMU__DATA__STRUCT}{IMU\_DATA\_STRUCT} \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data};
  \hyperlink{structEFF__DATA__STRUCT}{EFF\_DATA\_STRUCT} \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data};
  \textcolor{comment}{//devido ao datalogger}
    \textcolor{keyword}{static} \textcolor{keywordtype}{int} previous\_calibration\_status = CALIBRATION\_NOT\_RUNNING;
    \textcolor{keywordtype}{int} current\_calibration\_status; \textcolor{comment}{// Used to detect lowering edge}
    \textcolor{keyword}{static} \textcolor{keywordtype}{int} previous\_datalogger\_status = \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8h_a1a224da36800f52f56f30619849f7f5d}{DATALOGGER\_NOT\_RUNNING}
      ;
    \textcolor{keywordtype}{int} current\_datalogger\_status; \textcolor{comment}{// Used to detect rising edge}
  
\textcolor{comment}{// Parameters for IMU and SPI}

  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a92172e4757d0f8f9135a659e406c12e5}{acc}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__acc_af57da5d956ffa7e49a184326b6b9c738}{full\_res}=1;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a92172e4757d0f8f9135a659e406c12e5}{acc}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__acc_a30e6a318cad098cd8379416705820f95}{rate}=100;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a92172e4757d0f8f9135a659e406c12e5}{acc}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__acc_a26199b298ef2d353192dfbc706bce8cf}{range}=16;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_a5aa70e1e9634411c89aacfbc570cc91c}{rate}=100;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_aa612f7299b43a1bf1fc597688c2fa02d}{lpf\_bw}=188;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_aca3b791cb480f2da4703d4c256a7de48}{clk\_source}=\textcolor{charliteral}{'Z'};
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_a8b583edb905ed922572e46453e7d4adf}{act}=\textcolor{stringliteral}{"XYZ"};
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a234de95423b604b05b851ef90890cea1}{rate}=75;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a40ad27ebdb5fde35257b1dc52e40f476}{range}=0;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a52c22cae6940eb39fb72aca66cfeba9a}{samples\_avg}=8;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a1f3536709c05310005d648f339d70c54}{meas\_mode}=0;
  imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a39b83b3e9ff5bdcafed0bdf6a2de584b}{op\_mode}=0;
  
  spi\_param.\hyperlink{structSPI__PARAM__STRUCT_a82c546c99f6c3daed73c1e23426be847}{mode}=0;
  spi\_param.\hyperlink{structSPI__PARAM__STRUCT_a53a8d386594a81eb9bc6f971bfe36c54}{speed}=46875;
  spi\_param.\hyperlink{structSPI__PARAM__STRUCT_ae0d62e0a5554783d710b677a017e246f}{cs}=0;
  
\textcolor{comment}{// Initialization}
  \textcolor{keywordflow}{if}( \hyperlink{communication_01_07C_xC3_xB3pia_01em_01conflito_01de_01Andr_xC3_xA9_01Carvalho_012013-04-26_08_8c_adfe7e60b85fe68542adde08e59151441}{devices\_init}(&imu\_param, &spi\_param)==\hyperlink{communication_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE} )
  \{
    perror(\textcolor{stringliteral}{"Unsuccesful devices initialization"});
    \textcolor{keywordflow}{return} -1;
  \}
  \textcolor{keywordflow}{if}( \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_a1977ef253746fd8c008a3641d9822551}{datalogger\_init}()==\hyperlink{communication_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE} )
  \{
    perror(\textcolor{stringliteral}{"Unsuccesful devices initialization"});
    \textcolor{keywordflow}{return} -1;
  \}
  
  
  \textcolor{keywordflow}{if}( (log=fopen(\textcolor{stringliteral}{"log.txt"},\textcolor{stringliteral}{"w"}))==NULL )
  \{
    perror(\textcolor{stringliteral}{"Unsuccessful log file openning"});
    \textcolor{keywordflow}{return} -1;
  \}
  \hyperlink{main_01_07Caio_01Gustavo_01Mesquita_01Angelo's_01conflicted_01copy_012012-11-23_08_8c_aa570d24f638774bf52f70f1d9d9d45f8}{log\_init}(log);
  
\textcolor{comment}{// Initializing gdatalogger}
 \textcolor{comment}{/* if(!gDataLogger\_Init(&gDataLogger,"matlabdatafiles/
      gmatlabdatafile.mat",NULL))\{}
\textcolor{comment}{                printf("\(\backslash\)nErro em gDataLogger\_Init\(\backslash\)n\(\backslash\)n");}
\textcolor{comment}{                return EXIT\_FAILURE;}
\textcolor{comment}{        \}}
\textcolor{comment}{}
\textcolor{comment}{        gDataLogger\_DeclareVariable(&gDataLogger,"acc","m/s²",1,3,1000);}
\textcolor{comment}{        gDataLogger\_DeclareVariable(&gDataLogger,"gyr","\(\backslash\)][\{º/s",1,3,1000);}
\textcolor{comment}{        gDataLogger\_DeclareVariable(&gDataLogger,"mag","mG",1,3,1000);}
\textcolor{comment}{        gDataLogger\_DeclareVariable(&gDataLogger,"temp","K",1,1,1000);}
\textcolor{comment}{        gDataLogger\_DeclareVariable(&gDataLogger,"Vin","V",1,1,1000);}
\textcolor{comment}{  */}
\textcolor{comment}{// ROUTINE }

\textcolor{comment}{// Main Loop}
    \textcolor{keywordflow}{if}(return\_value != THREADS\_LINUX\_FAILURE)
    \{
        \hyperlink{arquivos_01n_xC3_xA3o_01utilizados_2threads__linux_8c_a923a30158ef342937317b179dcb6d0fb}{threads\_linux\_timer\_start\_task\_1}();
        usleep(0.5*\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_afffc21b0b726e6f4a572d0eefd3b5d69}{task\_1\_period\_us});
        \hyperlink{arquivos_01n_xC3_xA3o_01utilizados_2threads__linux_8c_a59d6f60b682f360c3759cefad7ad2a4e}{threads\_linux\_timer\_start\_task\_2}();
        usleep(5*\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_afffc21b0b726e6f4a572d0eefd3b5d69}{task\_1\_period\_us});

        \textcolor{keywordflow}{while}(\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a525dcecf4685bea1fbf92651ac0401fe}{quittask} == 0)
        \{
\textcolor{preprocessor}{            #if ANU\_COMPILE\_FOR\_OVERO}
\textcolor{preprocessor}{}\textcolor{preprocessor}{            #else}
\textcolor{preprocessor}{}            \textcolor{keywordflow}{if}(\hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_a46fd1290d9ee97d5fc7171e1e0dcb0aa}{datalogger\_status}() == \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8h_a2cf92051a019c8ec1b5c4f5380758f62}{DATALOGGER\_RUNNING}
      ) \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_a25bb814a0877f419ae09b08cd7e91ee9}{datalogger\_update\_IPC}();
\textcolor{preprocessor}{            #endif}
\textcolor{preprocessor}{}            \textcolor{keywordflow}{if}(++n>100)
            \{
                \textcolor{keywordflow}{if}(\hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_a46fd1290d9ee97d5fc7171e1e0dcb0aa}{datalogger\_status}() == \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8h_a2cf92051a019c8ec1b5c4f5380758f62}{DATALOGGER\_RUNNING}
      ) \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_a2aedecfce53e1935a41615ceaf378013}{datalogger\_write\_file}();
                n = 0;
            \}
            usleep(5*\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_afffc21b0b726e6f4a572d0eefd3b5d69}{task\_1\_period\_us});
        \}

        \hyperlink{arquivos_01n_xC3_xA3o_01utilizados_2threads__linux_8c_a928ae9705d888293ed43a8109789716a}{threads\_linux\_timer\_stop\_task\_1}();
        usleep(\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a95fe7f7d25a81aabd1194bac017074d8}{TASK1\_PERIOD\_US});
        \hyperlink{arquivos_01n_xC3_xA3o_01utilizados_2threads__linux_8c_a78eb56e9ece1f0050dda425824fb6a71}{threads\_linux\_timer\_stop\_task\_2}();
        usleep(\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_adfe9b03db41d576a3beb124ec44a54d8}{TASK2\_PERIOD\_US});
    \}


  \textcolor{keywordflow}{for}( i=1; i<=0; i++)
  \{  
      \textcolor{comment}{//fprintf(log,"    %d\(\backslash\)t|",i); }
      \hyperlink{communication_01_07C_xC3_xB3pia_01em_01conflito_01de_01Andr_xC3_xA9_01Carvalho_012013-04-26_08_8c_a577b5eb591b20e011d86397f2c6f3a53}{read\_all\_data}(imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev}, spi\_param.\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev}
      , &imu\_data, &eff\_data);
  \textcolor{comment}{// ADC}
\textcolor{comment}{/*FALTA IMPLEMENTAR AS ESCRITAS NOS GPIOS RESPONSÁVEIS PELA SELEÇÃO DO CHIP
       SELECT QUANDO REALMENTE FOR USAR A PLACA*/}
\textcolor{comment}{/*      //spi\_dev=spi\_init(0,46875,0);}
\textcolor{comment}{      //datap[0]=adc\_read(spi\_dev,0,1);}
\textcolor{comment}{      fprintf(log,"\(\backslash\)t%d\(\backslash\)t|",datap[0]);printf("\(\backslash\)t%d\(\backslash\)t|",datap[0]);}
\textcolor{comment}{      value[0]=(double)datap[0]/1000;}
\textcolor{comment}{      //gDataLogger\_InsertVariable(&gDataLogger,"Vin",&(value[0]));}
\textcolor{comment}{  // ACCelerometer}
\textcolor{comment}{      if ( (ioctl(i2c\_dev, I2C\_SLAVE, ADD\_ADXL345)) < 0) \{}
\textcolor{comment}{        perror("ioctl(I2C\_SLAVE) acc");}
\textcolor{comment}{        return -1;}
\textcolor{comment}{      \}  SUCCESS}
\textcolor{comment}{      if( (acc\_read\_all\_data(i2c\_dev,datap))>0 )\{}
\textcolor{comment}{        fprintf(log,"\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|",datap[0],datap[1],datap[2]);
       printf("\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|",datap[0],datap[1],datap[2]);}
\textcolor{comment}{        }
\textcolor{comment}{      \}}
\textcolor{comment}{      else\{}
\textcolor{comment}{        fprintf(log,"\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?\(\backslash\)t|"); printf("\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?\(\backslash\)t|");\}}
\textcolor{comment}{      value[0]=(double)datap[0]*0.0392;}
\textcolor{comment}{      value[1]=(double)datap[1]*0.0392;}
\textcolor{comment}{      value[2]=(double)datap[2]*0.0392;}
\textcolor{comment}{      //gDataLogger\_InsertVariable(&gDataLogger,"acc",value);}
\textcolor{comment}{  // MAGometer    }
\textcolor{comment}{      if( (ioctl(i2c\_dev, I2C\_SLAVE, ADD\_HMC5883)) < 0) \{}
\textcolor{comment}{        perror("ioctl(I2C\_SLAVE) mag");}
\textcolor{comment}{        return -1;}
\textcolor{comment}{      \} }
\textcolor{comment}{      if( (mag\_read\_all\_data(i2c\_dev,datap))>0 )\{}
\textcolor{comment}{        fprintf(log,"\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|",datap[0],datap[1],datap[2]);
       printf("\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|",datap[0],datap[1],datap[2]);\}}
\textcolor{comment}{      else\{}
\textcolor{comment}{        fprintf(log,"\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?\(\backslash\)t|"); printf("\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?\(\backslash\)t|");\}}
\textcolor{comment}{      value[0]=(double)datap[0]*0.73;}
\textcolor{comment}{      value[1]=(double)datap[1]*0.73;}
\textcolor{comment}{      value[2]=(double)datap[2]*0.73;}
\textcolor{comment}{      //gDataLogger\_InsertVariable(&gDataLogger,"mag",value);}
\textcolor{comment}{  // GYRometer    }
\textcolor{comment}{      if( (ioctl(i2c\_dev, I2C\_SLAVE, ADD\_ITG3200)) < 0) \{}
\textcolor{comment}{        perror("ioctl(I2C\_SLAVE) gyr");}
\textcolor{comment}{        return -1;}
\textcolor{comment}{      \} }
\textcolor{comment}{      if( (gyr\_read\_all\_data(i2c\_dev,datap))>0 )\{}
\textcolor{comment}{        fprintf(log,"\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d",datap[0],datap[1],datap[2],datap[3]);
       printf("\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d",datap[0],datap[1],datap[2],datap[3]);\}}
\textcolor{comment}{      else\{}
\textcolor{comment}{        fprintf(log,"\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?"); printf("\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?\(\backslash\)t?");\}}
\textcolor{comment}{      value[0]=(double)datap[0]*0.0392;}
\textcolor{comment}{      value[1]=(double)datap[1]*0.0392;}
\textcolor{comment}{      value[2]=(double)datap[2]*0.0392;}
\textcolor{comment}{      //gDataLogger\_InsertVariable(&gDataLogger,"acc",value);}
\textcolor{comment}{*/}  \textcolor{comment}{//---------------------}

    printf(\textcolor{stringliteral}{"   %d\(\backslash\)t"},i);
  printf(\textcolor{stringliteral}{"\(\backslash\)n    %d\(\backslash\)t|"},i);
  printf(\textcolor{stringliteral}{"\(\backslash\)t%d\(\backslash\)t|"},eff\_data.\hyperlink{structEFF__DATA__STRUCT_abe8952947b54bf9c247f3429ee3aeb44}{F}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x});
printf(\textcolor{stringliteral}{"\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|"},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a448f284bf44eb503affda586ad5fa9d2}{acc}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a448f284bf44eb503affda586ad5fa9d2}{acc}.\hyperlink{structDATA__XYZ_a94bbb1c889bf53eb6a5fffa2b39322cf}{y},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a448f284bf44eb503affda586ad5fa9d2}{acc}.\hyperlink{structDATA__XYZ_a69e89ab0ec6e5d72fc5d54f62cc07fb5}{
      z});
printf(\textcolor{stringliteral}{"\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|"},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a40c7df8b6d49297aa52873cfd9b60daa}{mag}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a40c7df8b6d49297aa52873cfd9b60daa}{mag}.\hyperlink{structDATA__XYZ_a94bbb1c889bf53eb6a5fffa2b39322cf}{y},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a40c7df8b6d49297aa52873cfd9b60daa}{mag}.\hyperlink{structDATA__XYZ_a69e89ab0ec6e5d72fc5d54f62cc07fb5}{
      z});
printf(\textcolor{stringliteral}{"\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d"},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a0c1ac26626e4434a2ee124a1928a23a1}{gyr}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a0c1ac26626e4434a2ee124a1928a23a1}{gyr}.\hyperlink{structDATA__XYZ_a94bbb1c889bf53eb6a5fffa2b39322cf}{y},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a0c1ac26626e4434a2ee124a1928a23a1}{gyr}
      .\hyperlink{structDATA__XYZ_a69e89ab0ec6e5d72fc5d54f62cc07fb5}{z}, imu\_data.\hyperlink{structIMU__DATA__STRUCT_a81e1dbf765c1d947ca6076aa1bbc73e7}{temp});
printf(\textcolor{stringliteral}{"\(\backslash\)t%d\(\backslash\)t%d"},eff\_data.\hyperlink{structEFF__DATA__STRUCT_aa42ebc512dd79fa6ebf998162a149446}{new\_data},imu\_data.\hyperlink{structIMU__DATA__STRUCT_a99924252176326418863e511d4fa437b}{new\_data});
printf(\textcolor{stringliteral}{"\(\backslash\)n"});
  \textcolor{comment}{// Updating matlab file}

  \textcolor{comment}{//---------------------}
      \textcolor{comment}{//fprintf(log,"\(\backslash\)n");printf("\(\backslash\)n");}
  \}
  
\textcolor{comment}{// CLOSING FILES}
  fclose(log);
  close(imu\_param.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev});
  close(spi\_param.\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev});
\textcolor{keywordflow}{return} 1;
\}
\end{DoxyCode}
\hypertarget{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a26855b7739897854265d51aa61329390}{\index{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}!periodic\-\_\-task\-\_\-1@{periodic\-\_\-task\-\_\-1}}
\index{periodic\-\_\-task\-\_\-1@{periodic\-\_\-task\-\_\-1}!main (Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-05-17).c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}}
\subsubsection[{periodic\-\_\-task\-\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}int periodic\-\_\-task\-\_\-1 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a26855b7739897854265d51aa61329390}


Definition at line 194 of file main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c.



References D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-N\-O\-T\-\_\-\-R\-U\-N\-N\-I\-N\-G, D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-R\-U\-N\-N\-I\-N\-G, datalogger\-\_\-set\-\_\-\-Ts(), datalogger\-\_\-status(), datalogger\-\_\-update(), eff\-\_\-data, failure, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, imu\-\_\-data, imu\-\_\-param, read\-\_\-all\-\_\-data(), S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, spi\-\_\-param, S\-U\-C\-C\-E\-S\-S, t0, T\-\_\-task\-\_\-1\-\_\-exec\-\_\-global, t\-\_\-task\-\_\-1\-\_\-global, T\-\_\-task\-\_\-2\-\_\-exec\-\_\-global, task\-\_\-1\-\_\-period\-\_\-us, and threads\-\_\-reset\-\_\-timer().


\begin{DoxyCode}
\{
    \textcolor{keyword}{static} \textcolor{keywordtype}{int} previous\_calibration\_status = CALIBRATION\_NOT\_RUNNING;
    \textcolor{keywordtype}{int} current\_calibration\_status; \textcolor{comment}{// Used to detect lowering edge}
    \textcolor{keyword}{static} \textcolor{keywordtype}{int} previous\_datalogger\_status = \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8h_a1a224da36800f52f56f30619849f7f5d}{DATALOGGER\_NOT\_RUNNING}
      ;
    \textcolor{keywordtype}{int} current\_datalogger\_status; \textcolor{comment}{// Used to detect rising edge}

    \textcolor{comment}{// Main communication/control thread}

    \textcolor{comment}{//Acquire}
    \textcolor{comment}{//total++;}
    \textcolor{keywordflow}{if}(\hyperlink{communication_01_07C_xC3_xB3pia_01em_01conflito_01de_01Andr_xC3_xA9_01Carvalho_012013-04-26_08_8c_a577b5eb591b20e011d86397f2c6f3a53}{read\_all\_data}(\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev}, \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}
      .\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev}, &\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}, &\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data}) != \hyperlink{communication_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS})
    \{
        \hyperlink{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure}++;
    \}

    \textcolor{comment}{// Calibrate and Estimate}
    \textcolor{comment}{//calibration\_calibrate\_all(&pwm\_read\_data, &scp1000\_data, &battery\_data,
       &gps\_data, &imu\_data, &pitot\_data, &sonar\_data,
       &calibration\_local\_coordinate\_system\_data, &calibration\_altimeter\_data, &calibration\_local\_fields\_data,
       &gps\_measure, &imu\_measure, &magnetometer\_measure);}
    \textcolor{comment}{//estimation\_update\_state\_estimate(&estimation\_data, &gps\_measure,
       &imu\_measure, &magnetometer\_measure, &sonar\_measure, &calibration\_local\_fields\_data,
       task\_1\_period\_us/(double)1e6);}

    \textcolor{comment}{// Control}
    \textcolor{comment}{//control\_main\_task(t\_task\_1\_global, &pwm\_write\_data, &pwm\_read\_data,
       &control\_data, &estimation\_data);}

    \textcolor{comment}{// Actuate}
    \textcolor{comment}{//protocol\_send\_actuation\_data(&pwm\_write\_data);}

   \textcolor{comment}{// Log}
    current\_datalogger\_status = \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_a46fd1290d9ee97d5fc7171e1e0dcb0aa}{datalogger\_status}();
    \textcolor{keywordflow}{if}(current\_datalogger\_status == \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8h_a2cf92051a019c8ec1b5c4f5380758f62}{DATALOGGER\_RUNNING})
    \{
        \textcolor{keywordflow}{if}(previous\_datalogger\_status == \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8h_a1a224da36800f52f56f30619849f7f5d}{DATALOGGER\_NOT\_RUNNING}
      ) \textcolor{comment}{// Rising edge}
        \{
            \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_afb69d166f8d53042825174cee225ea49}{datalogger\_set\_Ts}(\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_afffc21b0b726e6f4a572d0eefd3b5d69}{task\_1\_period\_us}
      /1e6);
            \hyperlink{arquivos_01n_xC3_xA3o_01utilizados_2threads__linux_8c_a5ba2e82998677ad5d27022cc793583ec}{threads\_reset\_timer}();
        \}
        \hyperlink{datalogger_01_07Caio-PC's_01conflicted_01copy_012012-11-23_08_8c_a360547e43bc240bf2ad44656dc70a590}{datalogger\_update}(\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a2a2a647912528f7aa86812528dbfe02f}{t\_task\_1\_global}, 
      \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_acdaa4a9b0e1be3dfa53b52df6410ad3b}{T\_task\_1\_exec\_global}, \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a9629c77cd3dba9d47d15c2e51bdde09d}{T\_task\_2\_exec\_global}
      , \hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a86c2efd6da48b362806cdbb5b1e711d8}{t0}, &\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}, &\hyperlink{main2_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data} \textcolor{comment}{/*&imu\_measure,
       &magnetometer\_measure, &estimation\_data, &control\_data*/});
    \}
    previous\_datalogger\_status = current\_datalogger\_status;

    \textcolor{comment}{/*current\_calibration\_status = calibration\_get\_status();}
\textcolor{comment}{    if(current\_calibration\_status == CALIBRATION\_RUNNING)}
\textcolor{comment}{    \{}
\textcolor{comment}{        calibration\_imu\_add\_sample\_bias\_estimate(&imu\_data);}
\textcolor{comment}{        calibration\_altimeter\_add\_sample\_initial\_pressure(&scp1000\_data,
       &calibration\_altimeter\_data);}
\textcolor{comment}{    \}}
\textcolor{comment}{    else // Calibration not running}
\textcolor{comment}{    \{}
\textcolor{comment}{        if(previous\_calibration\_status == CALIBRATION\_RUNNING) // Lowering edge}
\textcolor{comment}{        \{}
\textcolor{comment}{            calibration\_imu\_finish\_bias\_estimate(&imu\_data);}
\textcolor{comment}{           
       calibration\_altimeter\_finish\_initial\_pressure\_estimate(&calibration\_altimeter\_data);}
\textcolor{comment}{        \}}
\textcolor{comment}{    \}}
\textcolor{comment}{    previous\_calibration\_status = current\_calibration\_status;*/}

    \textcolor{keywordflow}{return} \hyperlink{communication_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-04-28_08_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{\index{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}!failure@{failure}}
\index{failure@{failure}!main (Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-05-17).c@{main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c}}
\subsubsection[{failure}]{\setlength{\rightskip}{0pt plus 5cm}int failure = 0}}\label{main_01_07C_xC3_xB3pia_01em_01conflito_01de_01Caio_01Gustavo_01Mesquita_01Angelo_012013-05-17_08_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}


Definition at line 6 of file main (\-Cópia em conflito de Caio Gustavo Mesquita Angelo 2013-\/05-\/17).\-c.

