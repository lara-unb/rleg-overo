\hypertarget{main_8c}{\section{main.\-c File Reference}
\label{main_8c}\index{main.\-c@{main.\-c}}
}
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$math.\-h$>$}\\*
{\ttfamily \#include \char`\"{}communication/communication.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}main.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}task\-Scheduler.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ui.\-h\char`\"{}}\\*
Include dependency graph for main.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{main_8c_a065f7d947c9b50d14bac945e152e007a}{T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D}~100000
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{main_8c_a840291bc02cba5474a4cb46a9b9566fe}{main} (void)
\item 
static void \hyperlink{main_8c_ad6a9f022b4d089093836712320731f6a}{ui\-\_\-task} (int signo)
\item 
static void \hyperlink{main_8c_af2478600d5d8aaeda10d1eb1ce463919}{control\-\_\-task} (int signo)
\item 
int \hyperlink{main_8c_a5b2b1fdd5e517470c10e84a2b2bcc5c8}{get\-\_\-time} (double $\ast$time\-\_\-control\-\_\-task\-\_\-s, double $\ast$Ts\-\_\-control\-\_\-task\-\_\-s, double $\ast$mean\-\_\-time\-\_\-control\-\_\-task\-\_\-s, double $\ast$t0\-\_\-control\-\_\-task\-\_\-s)
\item 
void \hyperlink{main_8c_a5f05ce725141ddfab683e059b1cd95ea}{exit\-\_\-program} (void)
\begin{DoxyCompactList}\small\item\em Internal function to end program. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structTASK__S}{T\-A\-S\-K\-\_\-\-S} \hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}
\begin{DoxyCompactList}\small\item\em Main rotine for control\-: \end{DoxyCompactList}\item 
\hyperlink{structTASK__S}{T\-A\-S\-K\-\_\-\-S} \hyperlink{main_8c_a432cbf231acb83d48e31879bd7afc71a}{task2}
\item 
\hyperlink{structIMU__PARAM__STRUCT}{I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\-\_\-param}
\item 
\hyperlink{structSPI__PARAM__STRUCT}{S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\-\_\-param}
\item 
\hyperlink{structEFF__DATA__STRUCT}{E\-F\-F\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\-\_\-data}
\item 
\hyperlink{structIMU__DATA__STRUCT}{I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\-\_\-data}
\item 
\hyperlink{structENC__DATA__STRUCT}{E\-N\-C\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{enc\-\_\-data}
\item 
\hyperlink{structMRA__DATA__STRUCT}{M\-R\-A\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} \hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\-\_\-data}
\item 
int \hyperlink{main_8c_ac7af894858cf396a219d632f40afdc8d}{total} = 0
\item 
int \hyperlink{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure} = 0
\item 
int \hyperlink{main_8c_a95a859aa805a58cd4c59e172d250de4a}{acquire} = 0
\item 
int \hyperlink{main_8c_a9d28d012aca080b397aa05c88ee0e94c}{quittask} = 0
\item 
int \hyperlink{main_8c_a98046aa9aba5dbcc867be625185aef46}{t0} = 0
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{main_8c_a065f7d947c9b50d14bac945e152e007a}{\index{main.\-c@{main.\-c}!T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D@{T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D}}
\index{T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D@{T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D}!main.c@{main.\-c}}
\subsubsection[{T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D~100000}}\label{main_8c_a065f7d947c9b50d14bac945e152e007a}


Definition at line 19 of file main.\-c.



Referenced by main().



\subsection{Function Documentation}
\hypertarget{main_8c_af2478600d5d8aaeda10d1eb1ce463919}{\index{main.\-c@{main.\-c}!control\-\_\-task@{control\-\_\-task}}
\index{control\-\_\-task@{control\-\_\-task}!main.c@{main.\-c}}
\subsubsection[{control\-\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}static void control\-\_\-task (
\begin{DoxyParamCaption}
\item[{int}]{signo}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{main_8c_af2478600d5d8aaeda10d1eb1ce463919}


Definition at line 109 of file main.\-c.



References actuate(), failure, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, read\-\_\-all\-\_\-data(), S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, S\-U\-C\-C\-E\-S\-S, T\-A\-S\-K\-\_\-\-S\-::t\-\_\-global, total, and M\-R\-A\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::v\-\_\-ctl.



Referenced by main().


\begin{DoxyCode}
                                   \{
  \hyperlink{main_8c_ac7af894858cf396a219d632f40afdc8d}{total}++;

\textcolor{comment}{/*Input*/}
  \textcolor{keywordflow}{if}(\hyperlink{communication_8c_a26f82e8af3b5ce23d5cd3a41db6e0b68}{read\_all\_data}(\hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev}, \hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}
      .\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev}, &\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data},&\hyperlink{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data}, &\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data}, &
      \hyperlink{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{enc\_data}) != \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS}) \hyperlink{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure}++;
  
\textcolor{comment}{/* Control */}
  \hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data}.\hyperlink{structMRA__DATA__STRUCT_a64b4e6bb604e58de593a60c87942b966}{v\_ctl}=1275 + (uint8\_t)(800*cosf(\hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}.\hyperlink{structTASK__S_a29a175bdd4b9f880a2b69bb5186e3c7e}{t\_global}
      *1000));
  \textcolor{comment}{//control\_main(task1.t\_global,&imu\_data,&eff\_data,&mra\_data);}
\textcolor{comment}{/* Actuate */}
  \hyperlink{communication_8c_a1d5f01d0124cff7030b5c4951b4bbefa}{actuate}(\hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}.\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev},&\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data});
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8c_af2478600d5d8aaeda10d1eb1ce463919_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{main_8c_af2478600d5d8aaeda10d1eb1ce463919_icgraph}
\end{center}
\end{figure}


\hypertarget{main_8c_a5f05ce725141ddfab683e059b1cd95ea}{\index{main.\-c@{main.\-c}!exit\-\_\-program@{exit\-\_\-program}}
\index{exit\-\_\-program@{exit\-\_\-program}!main.c@{main.\-c}}
\subsubsection[{exit\-\_\-program}]{\setlength{\rightskip}{0pt plus 5cm}void exit\-\_\-program (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main_8c_a5f05ce725141ddfab683e059b1cd95ea}


Internal function to end program. 



Definition at line 135 of file main.\-c.



Referenced by ui\-\_\-update().


\begin{DoxyCode}
                       \{
  \hyperlink{main_8c_a9d28d012aca080b397aa05c88ee0e94c}{quittask} = 1;
  \textcolor{keywordflow}{return};
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8c_a5f05ce725141ddfab683e059b1cd95ea_icgraph}
\end{center}
\end{figure}


\hypertarget{main_8c_a5b2b1fdd5e517470c10e84a2b2bcc5c8}{\index{main.\-c@{main.\-c}!get\-\_\-time@{get\-\_\-time}}
\index{get\-\_\-time@{get\-\_\-time}!main.c@{main.\-c}}
\subsubsection[{get\-\_\-time}]{\setlength{\rightskip}{0pt plus 5cm}int get\-\_\-time (
\begin{DoxyParamCaption}
\item[{double $\ast$}]{time\-\_\-control\-\_\-task\-\_\-s, }
\item[{double $\ast$}]{Ts\-\_\-control\-\_\-task\-\_\-s, }
\item[{double $\ast$}]{mean\-\_\-time\-\_\-control\-\_\-task\-\_\-s, }
\item[{double $\ast$}]{t0\-\_\-control\-\_\-task\-\_\-s}
\end{DoxyParamCaption}
)}}\label{main_8c_a5b2b1fdd5e517470c10e84a2b2bcc5c8}


Definition at line 122 of file main.\-c.



Referenced by ui\-\_\-overview\-\_\-data().


\begin{DoxyCode}
\{
  *time\_control\_task\_s = \hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}.\hyperlink{structTASK__S_a29a175bdd4b9f880a2b69bb5186e3c7e}{t\_global};
  *Ts\_control\_task\_s = (\hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}.\hyperlink{structTASK__S_aabd8f80831e6cfd8e51bbd371eed907b}{period\_us})/1e6;
  *mean\_time\_control\_task\_s = \hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}.\hyperlink{structTASK__S_a9ebae87e1b64869f328a47473f2ea7d7}{T\_mean\_global};
  *t0\_control\_task\_s = \hyperlink{main_8c_a98046aa9aba5dbcc867be625185aef46}{t0};

  \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8c_a5b2b1fdd5e517470c10e84a2b2bcc5c8_icgraph}
\end{center}
\end{figure}


\hypertarget{main_8c_a840291bc02cba5474a4cb46a9b9566fe}{\index{main.\-c@{main.\-c}!main@{main}}
\index{main@{main}!main.c@{main.\-c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main_8c_a840291bc02cba5474a4cb46a9b9566fe}


Definition at line 39 of file main.\-c.



References I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::acc, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::act, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::clk\-\_\-source, control\-\_\-task(), S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::cs, devices\-\_\-init(), F\-A\-I\-L\-U\-R\-E, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::full\-\_\-res, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::gyr, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::lpf\-\_\-bw, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::mag, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::meas\-\_\-mode, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::mode, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::op\-\_\-mode, quittask, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::range, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::range, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::samples\-\_\-avg, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::speed, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, S\-U\-C\-C\-E\-S\-S, T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D, timer\-\_\-new\-\_\-task(), timer\-\_\-start\-\_\-task(), timer\-\_\-stop\-\_\-task(), ui\-\_\-close(), ui\-\_\-init(), and ui\-\_\-task().


\begin{DoxyCode}
              \{
  \textcolor{keywordtype}{int} return\_value = \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};

\textcolor{comment}{/*Setting config values:*/}
  \textcolor{comment}{// Parameters for IMU}
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a92172e4757d0f8f9135a659e406c12e5}{acc}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__acc_af57da5d956ffa7e49a184326b6b9c738}{full\_res}=1;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a92172e4757d0f8f9135a659e406c12e5}{acc}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__acc_a30e6a318cad098cd8379416705820f95}{rate}=100;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a92172e4757d0f8f9135a659e406c12e5}{acc}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__acc_a26199b298ef2d353192dfbc706bce8cf}{range}=16;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_a5aa70e1e9634411c89aacfbc570cc91c}{rate}=100;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_aa612f7299b43a1bf1fc597688c2fa02d}{lpf\_bw}=188;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_aca3b791cb480f2da4703d4c256a7de48}{clk\_source}=\textcolor{charliteral}{'Z'};
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a5a4557868f1af679a1098808397b02ec}{gyr}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__gyr_a909d153e794ec443be04625ce00e4178}{act}=\textcolor{stringliteral}{"XYZ"};
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a234de95423b604b05b851ef90890cea1}{rate}=75;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a40ad27ebdb5fde35257b1dc52e40f476}{range}=0;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a52c22cae6940eb39fb72aca66cfeba9a}{samples\_avg}=8;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a1f3536709c05310005d648f339d70c54}{meas\_mode}=0;
  \hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a26b277dcaf05f3842995df888225f6f4}{mag}.\hyperlink{structIMU__PARAM__STRUCT_1_1param__mag_a39b83b3e9ff5bdcafed0bdf6a2de584b}{op\_mode}=0;

  \textcolor{comment}{// Parameters for SPI}
  \hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}.\hyperlink{structSPI__PARAM__STRUCT_a82c546c99f6c3daed73c1e23426be847}{mode}=0;
  \hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}.\hyperlink{structSPI__PARAM__STRUCT_a53a8d386594a81eb9bc6f971bfe36c54}{speed}=375000;
  \hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}.\hyperlink{structSPI__PARAM__STRUCT_ae0d62e0a5554783d710b677a017e246f}{cs}=0;

  \textcolor{comment}{// Task for control UI:}
  \hyperlink{group__taskS_ga1e7e694ed290112386d363ee2630dd82}{timer\_new\_task}(&\hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1},\hyperlink{main_8c_ad6a9f022b4d089093836712320731f6a}{ui\_task});
  \hyperlink{group__taskS_ga1e7e694ed290112386d363ee2630dd82}{timer\_new\_task}(&\hyperlink{main_8c_a432cbf231acb83d48e31879bd7afc71a}{task2},\hyperlink{main_8c_af2478600d5d8aaeda10d1eb1ce463919}{control\_task});
  
\textcolor{comment}{/*Initialization:*/}
  \textcolor{keywordflow}{if}(\hyperlink{communication_8c_a2d1e523ff70db11ca4096f97af5da000}{devices\_init}(&\hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param},&\hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param},&\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data}
      )!=\hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS})\{
    perror(\textcolor{stringliteral}{"Unsuccesful devices initialization"});
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}

  \textcolor{keywordflow}{if}(\hyperlink{group__ui_gab7bfb453918dcc296ff0cea3c79453d0}{ui\_init}()!=\hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS})\{
    perror(\textcolor{stringliteral}{"Unsuccesful user interface initialization"});
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}

  \hyperlink{group__taskS_gabb62dbc29029e7950ee72aeb78c83dfc}{timer\_start\_task}(&\hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1},\hyperlink{main_8c_a065f7d947c9b50d14bac945e152e007a}{TASK\_UI\_PERIOD});
  \textcolor{comment}{//timer\_start\_task(task2);}

\textcolor{comment}{/* Main loop: */}
  \textcolor{keywordflow}{while}(\hyperlink{main_8c_a9d28d012aca080b397aa05c88ee0e94c}{quittask} == 0)\{
    \textcolor{comment}{//ui\_task(0);}
  \}

\textcolor{comment}{/*Shutting Down:*/}
  \hyperlink{group__taskS_ga8e48eacaac7d9cf7d82cc71cfbcd4b56}{timer\_stop\_task}(&\hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1});
  usleep(2000);
  \textcolor{comment}{//timer\_stop\_task(&task2);}

  \textcolor{keywordflow}{if}(\hyperlink{group__ui_ga65d8b92b634da17c344458cd57e61f3e}{ui\_close}()==\hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE})\{
    return\_value = \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}

  close(\hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev});
  close(\hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}.\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev});

  \textcolor{keywordflow}{return} return\_value;
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph}
\end{center}
\end{figure}


\hypertarget{main_8c_ad6a9f022b4d089093836712320731f6a}{\index{main.\-c@{main.\-c}!ui\-\_\-task@{ui\-\_\-task}}
\index{ui\-\_\-task@{ui\-\_\-task}!main.c@{main.\-c}}
\subsubsection[{ui\-\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}static void ui\-\_\-task (
\begin{DoxyParamCaption}
\item[{int}]{signo}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{main_8c_ad6a9f022b4d089093836712320731f6a}


Definition at line 100 of file main.\-c.



References failure, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, read\-\_\-all\-\_\-data(), S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, S\-U\-C\-C\-E\-S\-S, total, and ui\-\_\-update().



Referenced by main().


\begin{DoxyCode}
                              \{
  \hyperlink{main_8c_ac7af894858cf396a219d632f40afdc8d}{total}++;

  \textcolor{keywordflow}{if}(\hyperlink{communication_8c_a26f82e8af3b5ce23d5cd3a41db6e0b68}{read\_all\_data}(\hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev}, \hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}
      .\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev}, &\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data},&\hyperlink{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data}, &\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data}, &
      \hyperlink{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{enc\_data}) != \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS}) \hyperlink{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure}++;

  \hyperlink{group__ui_ga42e4dac2d138061a74c572358c8ebf49}{ui\_update}(&\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}, &\hyperlink{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data}, &\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data},&
      \hyperlink{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{enc\_data}, \hyperlink{main_8c_ac7af894858cf396a219d632f40afdc8d}{total}, \hyperlink{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure});

\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8c_ad6a9f022b4d089093836712320731f6a_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{main_8c_ad6a9f022b4d089093836712320731f6a_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{main_8c_a95a859aa805a58cd4c59e172d250de4a}{\index{main.\-c@{main.\-c}!acquire@{acquire}}
\index{acquire@{acquire}!main.c@{main.\-c}}
\subsubsection[{acquire}]{\setlength{\rightskip}{0pt plus 5cm}int acquire = 0}}\label{main_8c_a95a859aa805a58cd4c59e172d250de4a}


Definition at line 34 of file main.\-c.

\hypertarget{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{\index{main.\-c@{main.\-c}!eff\-\_\-data@{eff\-\_\-data}}
\index{eff\-\_\-data@{eff\-\_\-data}!main.c@{main.\-c}}
\subsubsection[{eff\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf E\-F\-F\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} eff\-\_\-data}}\label{main_8c_a5650ece8c3a277c7f158d75ae65265fa}


Definition at line 26 of file main.\-c.

\hypertarget{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{\index{main.\-c@{main.\-c}!enc\-\_\-data@{enc\-\_\-data}}
\index{enc\-\_\-data@{enc\-\_\-data}!main.c@{main.\-c}}
\subsubsection[{enc\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf E\-N\-C\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} enc\-\_\-data}}\label{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}


Definition at line 28 of file main.\-c.

\hypertarget{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{\index{main.\-c@{main.\-c}!failure@{failure}}
\index{failure@{failure}!main.c@{main.\-c}}
\subsubsection[{failure}]{\setlength{\rightskip}{0pt plus 5cm}int failure = 0}}\label{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}


Definition at line 33 of file main.\-c.



Referenced by control\-\_\-task(), periodic\-\_\-task\-\_\-1(), periodic\-\_\-task\-\_\-2(), threads\-\_\-linux\-\_\-periodic\-\_\-task\-\_\-1(), threads\-\_\-linux\-\_\-periodic\-\_\-task\-\_\-2(), and ui\-\_\-task().

\hypertarget{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{\index{main.\-c@{main.\-c}!imu\-\_\-data@{imu\-\_\-data}}
\index{imu\-\_\-data@{imu\-\_\-data}!main.c@{main.\-c}}
\subsubsection[{imu\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} imu\-\_\-data}}\label{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}


Definition at line 27 of file main.\-c.



Referenced by control\-\_\-main().

\hypertarget{main_8c_a9c6b2109fb9402446f92995db60951b5}{\index{main.\-c@{main.\-c}!imu\-\_\-param@{imu\-\_\-param}}
\index{imu\-\_\-param@{imu\-\_\-param}!main.c@{main.\-c}}
\subsubsection[{imu\-\_\-param}]{\setlength{\rightskip}{0pt plus 5cm}{\bf I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T} imu\-\_\-param}}\label{main_8c_a9c6b2109fb9402446f92995db60951b5}


Definition at line 22 of file main.\-c.

\hypertarget{main_8c_abc42e18d2909e9bc119316283f4ed9db}{\index{main.\-c@{main.\-c}!mra\-\_\-data@{mra\-\_\-data}}
\index{mra\-\_\-data@{mra\-\_\-data}!main.c@{main.\-c}}
\subsubsection[{mra\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-R\-A\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T} mra\-\_\-data}}\label{main_8c_abc42e18d2909e9bc119316283f4ed9db}


Definition at line 29 of file main.\-c.



Referenced by control\-\_\-main().

\hypertarget{main_8c_a9d28d012aca080b397aa05c88ee0e94c}{\index{main.\-c@{main.\-c}!quittask@{quittask}}
\index{quittask@{quittask}!main.c@{main.\-c}}
\subsubsection[{quittask}]{\setlength{\rightskip}{0pt plus 5cm}int quittask = 0}}\label{main_8c_a9d28d012aca080b397aa05c88ee0e94c}


Definition at line 36 of file main.\-c.



Referenced by exit\-\_\-program(), main(), and threads\-\_\-linux\-\_\-init().

\hypertarget{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{\index{main.\-c@{main.\-c}!spi\-\_\-param@{spi\-\_\-param}}
\index{spi\-\_\-param@{spi\-\_\-param}!main.c@{main.\-c}}
\subsubsection[{spi\-\_\-param}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T} spi\-\_\-param}}\label{main_8c_adec2468b88cf50b20e5cf399a3b7e994}


Definition at line 23 of file main.\-c.

\hypertarget{main_8c_a98046aa9aba5dbcc867be625185aef46}{\index{main.\-c@{main.\-c}!t0@{t0}}
\index{t0@{t0}!main.c@{main.\-c}}
\subsubsection[{t0}]{\setlength{\rightskip}{0pt plus 5cm}int t0 = 0}}\label{main_8c_a98046aa9aba5dbcc867be625185aef46}


Definition at line 37 of file main.\-c.



Referenced by get\-\_\-time(), periodic\-\_\-task\-\_\-1(), reset\-\_\-timer(), threads\-\_\-get\-\_\-time(), threads\-\_\-linux\-\_\-periodic\-\_\-task\-\_\-1(), threads\-\_\-linux\-\_\-periodic\-\_\-task\-\_\-2(), threads\-\_\-linux\-\_\-timer\-\_\-function\-\_\-task\-\_\-1(), threads\-\_\-reset\-\_\-timer(), timer\-\_\-function\-\_\-task\-\_\-1(), and ui\-\_\-overview\-\_\-data().

\hypertarget{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{\index{main.\-c@{main.\-c}!task1@{task1}}
\index{task1@{task1}!main.c@{main.\-c}}
\subsubsection[{task1}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\-A\-S\-K\-\_\-\-S} task1}}\label{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}


Main rotine for control\-: 

\begin{DoxyAuthor}{Author}
Rafael Lima 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\-1 
\end{DoxyVersion}


Definition at line 16 of file main.\-c.



Referenced by main().

\hypertarget{main_8c_a432cbf231acb83d48e31879bd7afc71a}{\index{main.\-c@{main.\-c}!task2@{task2}}
\index{task2@{task2}!main.c@{main.\-c}}
\subsubsection[{task2}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\-A\-S\-K\-\_\-\-S} task2}}\label{main_8c_a432cbf231acb83d48e31879bd7afc71a}


Definition at line 16 of file main.\-c.



Referenced by main().

\hypertarget{main_8c_ac7af894858cf396a219d632f40afdc8d}{\index{main.\-c@{main.\-c}!total@{total}}
\index{total@{total}!main.c@{main.\-c}}
\subsubsection[{total}]{\setlength{\rightskip}{0pt plus 5cm}int total = 0}}\label{main_8c_ac7af894858cf396a219d632f40afdc8d}


Definition at line 32 of file main.\-c.



Referenced by control\-\_\-task(), periodic\-\_\-task\-\_\-1(), periodic\-\_\-task\-\_\-2(), threads\-\_\-linux\-\_\-periodic\-\_\-task\-\_\-1(), threads\-\_\-linux\-\_\-periodic\-\_\-task\-\_\-2(), and ui\-\_\-task().

