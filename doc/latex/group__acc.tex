\hypertarget{group__acc}{\section{Functions for accelerometer A\-D\-X\-L345}
\label{group__acc}\index{Functions for accelerometer A\-D\-X\-L345@{Functions for accelerometer A\-D\-X\-L345}}
}
Collaboration diagram for Functions for accelerometer A\-D\-X\-L345\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=328pt]{group__acc}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__acc_ga534116416343122de29a5b6ade6876bd}{acc\-\_\-write\-\_\-reg} (int i2c\-\_\-dev, uint8\-\_\-t reg, uint8\-\_\-t data)
\begin{DoxyCompactList}\small\item\em W\-R\-I\-T\-E T\-O R\-E\-G\-I\-S\-T\-E\-R. \end{DoxyCompactList}\item 
uint8\-\_\-t $\ast$ \hyperlink{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{acc\-\_\-read\-\_\-reg} (int i2c\-\_\-dev, uint8\-\_\-t reg, uint8\-\_\-t count)
\begin{DoxyCompactList}\small\item\em R\-E\-A\-D C\-O\-U\-N\-T 8-\/\-B\-I\-T R\-E\-G\-I\-S\-T\-E\-R I\-N S\-E\-Q\-U\-E\-N\-C\-E \end{DoxyCompactList}\item 
int \hyperlink{group__acc_gae8f9cc6e0d15e61039d846305f86f073}{acc\-\_\-init} (int i2c\-\_\-dev, uint8\-\_\-t full\-\_\-res, uint16\-\_\-t rate, uint8\-\_\-t range)
\begin{DoxyCompactList}\small\item\em I\-N\-I\-T\-I\-A\-L\-I\-Z\-E A\-C\-C\-E\-L\-E\-R\-O\-M\-E\-T\-E\-R. \end{DoxyCompactList}\item 
int \hyperlink{group__acc_ga013bb5ed8a763883fc440549d2b1a6ce}{acc\-\_\-read\-\_\-all\-\_\-data} (int i2c\-\_\-dev, short int $\ast$data)
\begin{DoxyCompactList}\small\item\em R\-E\-A\-D A\-L\-L D\-A\-T\-A A\-T O\-N\-C\-E (X, Y and Z) \end{DoxyCompactList}\item 
short int \hyperlink{group__acc_ga041d6953f2bfc8c5efa4d5bbac812305}{acc\-\_\-read\-\_\-data} (int i2c\-\_\-dev, int axis)
\begin{DoxyCompactList}\small\item\em R\-E\-A\-D D\-A\-T\-A (X, Y or Z) \end{DoxyCompactList}\item 
int \hyperlink{group__acc_ga8509cccabb08e7267677f66f25718731}{acc\-\_\-read\-\_\-all\-\_\-reg} (int i2c\-\_\-dev)
\begin{DoxyCompactList}\small\item\em Read all accelerometer data and print in stdio. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Function Documentation}
\hypertarget{group__acc_gae8f9cc6e0d15e61039d846305f86f073}{\index{Functions for accelerometer A\-D\-X\-L345@{Functions for accelerometer A\-D\-X\-L345}!acc\-\_\-init@{acc\-\_\-init}}
\index{acc\-\_\-init@{acc\-\_\-init}!Functions for accelerometer ADXL345@{Functions for accelerometer A\-D\-X\-L345}}
\subsubsection[{acc\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int acc\-\_\-init (
\begin{DoxyParamCaption}
\item[{int}]{i2c\-\_\-dev, }
\item[{uint8\-\_\-t}]{full\-\_\-res, }
\item[{uint16\-\_\-t}]{rate, }
\item[{uint8\-\_\-t}]{range}
\end{DoxyParamCaption}
)}}\label{group__acc_gae8f9cc6e0d15e61039d846305f86f073}


I\-N\-I\-T\-I\-A\-L\-I\-Z\-E A\-C\-C\-E\-L\-E\-R\-O\-M\-E\-T\-E\-R. 


\begin{DoxyParams}{Parameters}
{\em i2c\-\_\-dev} & Communication Port \\
\hline
{\em full\-\_\-res} & Set resolution to 10 bits if value equal 0 else set to Full resolution \\
\hline
{\em rate} & Set data output rate (Hz), possible values\-: (3200,1600,800,400,200,100,50,25, 12\-: 12.\-5\-Hz, 6\-: 6.\-25\-Hz) \\
\hline
{\em range} & Set range of read, possible values\-: (2\-: +-\/ 2g 4\-: +-\/ 4g 8\-: +-\/ 8g anyother\-: 16g) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
flag with S\-U\-C\-C\-E\-S\-S or F\-A\-I\-L\-U\-R\-E
\end{DoxyReturn}
I\-N\-I\-T\-I\-A\-L\-I\-Z\-E A\-C\-C\-E\-L\-E\-R\-O\-M\-E\-T\-E\-R.

Implements the I2\-C communication between Gumstix Overo Fire and A\-D\-X\-L345 \begin{DoxyAuthor}{Author}
Caio Gustavo Mesquita Ã‚ngelo 
\end{DoxyAuthor}


Definition at line 11 of file acc\-\_\-functions.\-c.



References A\-C\-C\-\_\-\-B\-W\-\_\-\-R\-A\-T\-E, A\-C\-C\-\_\-\-D\-A\-T\-A\-\_\-\-F\-O\-R\-M\-A\-T, A\-C\-C\-\_\-\-P\-O\-W\-E\-R\-\_\-\-C\-T\-L, A\-C\-C\-\_\-\-P\-O\-W\-E\-R\-\_\-\-C\-T\-L\-\_\-\-M\-E\-A\-S\-\_\-\-M\-O\-D\-E, acc\-\_\-write\-\_\-reg(), F\-A\-I\-L\-U\-R\-E, and S\-U\-C\-C\-E\-S\-S.



Referenced by devices\-\_\-init().


\begin{DoxyCode}
\{ 
  uint8\_t data=0;

  \textcolor{keywordflow}{switch}(range)\{
    \textcolor{keywordflow}{case} 2:
      data=0x08;;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 4:
      data=0x09;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 8:
      data=0x0A;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{default}:
      data=0x0B;
      \textcolor{keywordflow}{break};
  \}
  
  \textcolor{keywordflow}{if}(full\_res==0)
    data=data&(0xF7);
  
  \textcolor{keywordflow}{if}((\hyperlink{group__acc_ga534116416343122de29a5b6ade6876bd}{acc\_write\_reg}(i2c\_dev, \hyperlink{imu__regs_8h_ab4eb7fc69b2a37ee750d3400fc2c53a1}{ACC\_DATA\_FORMAT}, data)
      )<0)\{
    perror(\textcolor{stringliteral}{"Data Format unsuccesful"});
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}
  
  data=\hyperlink{imu__regs_8h_a9a841ba3e094b01ea439584e12b25894}{ACC\_POWER\_CTL\_MEAS\_MODE};
  \textcolor{keywordflow}{if}((\hyperlink{group__acc_ga534116416343122de29a5b6ade6876bd}{acc\_write\_reg}(i2c\_dev, \hyperlink{imu__regs_8h_ad857d62b61f349216faeda06eff5f9c6}{ACC\_POWER\_CTL}, data))<0)
      \{
    perror(\textcolor{stringliteral}{"Power Control unsuccesful"});
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}
  
  \textcolor{keywordflow}{switch}(rate)\{
    \textcolor{keywordflow}{case} 100:
      data=0x0A;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 3200:
      data=0x0F;;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 1600:
      data=0x0E;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 800:
      data=0x0D;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 400:
      data=0x0C;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 200:
      data=0x0B;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 50:
      data=0x09;
      \textcolor{keywordflow}{break}; 
    \textcolor{keywordflow}{case} 25:
      data=0x08;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 12:
      data=0x07;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} 6:
      data=0x06;
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{default}:
      perror(\textcolor{stringliteral}{"Wrong rate value"});
      \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}
  \textcolor{keywordflow}{if}((\hyperlink{group__acc_ga534116416343122de29a5b6ade6876bd}{acc\_write\_reg}(i2c\_dev, \hyperlink{imu__regs_8h_afbbb5a3aa097a32f98c47158141a882f}{ACC\_BW\_RATE}, data))<0)\{
    perror(\textcolor{stringliteral}{"Write in BW\_RATE unsuccesful"});
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}
  
  \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{group__acc_gae8f9cc6e0d15e61039d846305f86f073_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__acc_gae8f9cc6e0d15e61039d846305f86f073_icgraph}
\end{center}
\end{figure}


\hypertarget{group__acc_ga013bb5ed8a763883fc440549d2b1a6ce}{\index{Functions for accelerometer A\-D\-X\-L345@{Functions for accelerometer A\-D\-X\-L345}!acc\-\_\-read\-\_\-all\-\_\-data@{acc\-\_\-read\-\_\-all\-\_\-data}}
\index{acc\-\_\-read\-\_\-all\-\_\-data@{acc\-\_\-read\-\_\-all\-\_\-data}!Functions for accelerometer ADXL345@{Functions for accelerometer A\-D\-X\-L345}}
\subsubsection[{acc\-\_\-read\-\_\-all\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}int acc\-\_\-read\-\_\-all\-\_\-data (
\begin{DoxyParamCaption}
\item[{int}]{i2c\-\_\-dev, }
\item[{short int $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{group__acc_ga013bb5ed8a763883fc440549d2b1a6ce}


R\-E\-A\-D A\-L\-L D\-A\-T\-A A\-T O\-N\-C\-E (X, Y and Z) 


\begin{DoxyParams}[1]{Parameters}
 & {\em i2c\-\_\-dev} & Communication Port \\
\hline
\mbox{\tt out}  & {\em data} & Data's vector\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
flag with S\-U\-C\-C\-E\-S\-S or F\-A\-I\-L\-U\-R\-E 
\end{DoxyReturn}


Definition at line 159 of file acc\-\_\-functions.\-c.



References A\-C\-C\-\_\-\-D\-A\-T\-A\-X0, acc\-\_\-read\-\_\-reg(), F\-A\-I\-L\-U\-R\-E, and S\-U\-C\-C\-E\-S\-S.



Referenced by read\-\_\-all\-\_\-data().


\begin{DoxyCode}
\{
  \textcolor{keywordtype}{int} i;
  uint8\_t *data8;
  \textcolor{keyword}{union }result
  \{
    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} usgnd[3];
    \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} sgnd[3];
  \} result;
  \textcolor{comment}{//result=(union result*)malloc(3*sizeof(union result));}
  \textcolor{keywordflow}{if}( (data8=\hyperlink{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{acc\_read\_reg}(i2c\_dev,\hyperlink{imu__regs_8h_afae448fbad872220013e5c3abf0f3d9f}{ACC\_DATAX0},6))==NULL )
  \{
    \textcolor{comment}{//perror("Read accelerometer register failed");}
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}
  \textcolor{comment}{//result.usgnd=(unsigned int*)malloc(3*sizeof(unsigned int));}
  \textcolor{keywordflow}{for}(i=0; i<3; i++)
  \{
    result.usgnd[i]=0;
    result.usgnd[i]=result.usgnd[i]|((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} int)data8[i*2])|(((\textcolor{keywordtype}{
      unsigned} \textcolor{keywordtype}{short} int)data8[i*2+1])<<8);
    data[i]=result.sgnd[i];
  \}
  \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};  
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=288pt]{group__acc_ga013bb5ed8a763883fc440549d2b1a6ce_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__acc_ga013bb5ed8a763883fc440549d2b1a6ce_icgraph}
\end{center}
\end{figure}


\hypertarget{group__acc_ga8509cccabb08e7267677f66f25718731}{\index{Functions for accelerometer A\-D\-X\-L345@{Functions for accelerometer A\-D\-X\-L345}!acc\-\_\-read\-\_\-all\-\_\-reg@{acc\-\_\-read\-\_\-all\-\_\-reg}}
\index{acc\-\_\-read\-\_\-all\-\_\-reg@{acc\-\_\-read\-\_\-all\-\_\-reg}!Functions for accelerometer ADXL345@{Functions for accelerometer A\-D\-X\-L345}}
\subsubsection[{acc\-\_\-read\-\_\-all\-\_\-reg}]{\setlength{\rightskip}{0pt plus 5cm}int acc\-\_\-read\-\_\-all\-\_\-reg (
\begin{DoxyParamCaption}
\item[{int}]{i2c\-\_\-dev}
\end{DoxyParamCaption}
)}}\label{group__acc_ga8509cccabb08e7267677f66f25718731}


Read all accelerometer data and print in stdio. 


\begin{DoxyParams}{Parameters}
{\em i2c\-\_\-dev} & Communication Port \\
\hline
\end{DoxyParams}


Definition at line 196 of file acc\-\_\-functions.\-c.



References A\-C\-C\-\_\-\-D\-E\-V\-I\-D, acc\-\_\-read\-\_\-reg(), A\-C\-C\-\_\-\-T\-H\-R\-E\-S\-H\-\_\-\-T\-A\-P, and conv\-\_\-byte\-\_\-hex\-\_\-bin().


\begin{DoxyCode}
\{
  uint8\_t *hvalue0, *hvalue1, *hvalue;
  \textcolor{keywordtype}{int} i;
  
  hvalue0=\hyperlink{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{acc\_read\_reg}(i2c\_dev,\hyperlink{imu__regs_8h_a007fa8d8ef9d89127ae5da32a2f42283}{ACC\_DEVID},1);
  printf(\textcolor{stringliteral}{"\(\backslash\)nhey"});
  printf(\textcolor{stringliteral}{"\(\backslash\)nhey3"});
  printf(\textcolor{stringliteral}{"\(\backslash\)nhey2"});
  printf(\textcolor{stringliteral}{"\(\backslash\)nhey3"});
  hvalue1=\hyperlink{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{acc\_read\_reg}(i2c\_dev,\hyperlink{imu__regs_8h_afa5af181c4af31e22baa9bd20ff322ef}{ACC\_THRESH\_TAP}, 29);
  printf(\textcolor{stringliteral}{"\(\backslash\)nhey3"});
  \textcolor{comment}{//hvalue--;}
  hvalue=(uint8\_t*)malloc(30*\textcolor{keyword}{sizeof}(uint8\_t));
  hvalue[0]=hvalue0[0];
  \textcolor{keywordflow}{for}( i=0; i<29; i++)
    hvalue[i+1]=hvalue1[i];
  printf(\textcolor{stringliteral}{"\(\backslash\)nhey4"});
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DEVID = 0x%02X = %s"}, hvalue0[0],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue0));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_THRESH\_TAP = 0x%02X = %s"}, hvalue1[0],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+1));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_OFSX = 0x%02X = %s"}, hvalue[2],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+2));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_OFSY = 0x%02X = %s"}, hvalue[3],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+3));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_OFSZ = 0x%02X = %s"}, hvalue[4],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+4));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DUR = 0x%02X = %s"}, hvalue[5],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+5));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_LATENT = 0x%02X = %s"}, hvalue[6],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+6));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_WINDOW = 0x%02X = %s"}, hvalue[7],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+7));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_THRESH\_ACT = 0x%02X = %s"}, hvalue[8],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+8));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_THRESH\_INACT = 0x%02X = %s"}, hvalue[9],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+9));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_TIME\_INACT = 0x%02X = %s"}, hvalue[10],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+10));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_ACT\_INACT\_CTL = 0x%02X = %s"}, hvalue[11],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+11));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_THRESH\_FF = 0x%02X = %s"}, hvalue[12],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+12));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_TIME\_FF = 0x%02X = %s"}, hvalue[13],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+13));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_TAP\_AXES = 0x%02X = %s"}, hvalue[14],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+14));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_ACT\_TAP\_STATUS = 0x%02X = %s"}, hvalue[15],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+15));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_BW\_RATE = 0x%02X = %s"}, hvalue[16],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+16));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_POWER\_CTL = 0x%02X = %s"}, hvalue[17],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+17));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_INT\_ENABLE = 0x%02X = %s"}, hvalue[18],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+18));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_INT\_MAP = 0x%02X = %s"}, hvalue[19],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+19));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_INT\_SOURCE = 0x%02X = %s"}, hvalue[20],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+20));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DATA\_FORMAT = 0x%02X = %s"}, hvalue1[20],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue1+21));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DATAX0 = 0x%02X = %s"}, hvalue1[21],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue1+22));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DATAX1 = 0x%02X = %s"}, hvalue1[22],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue1+23));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DATAY0 = 0x%02X = %s"}, hvalue1[23],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue1+24));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DATAY1 = 0x%02X = %s"}, hvalue1[24],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue1+25));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DATAZ0 = 0x%02X = %s"}, hvalue1[25],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue1+26));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_DATAZ1 = 0x%02X = %s"}, hvalue1[26],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue1+27));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_FIFO\_CTL = 0x%02X = %s"}, hvalue[28],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+28));
  printf(\textcolor{stringliteral}{"\(\backslash\)nACC\_FIFO\_STATUS = 0x%02X = %s"}, hvalue[29],\hyperlink{acc__functions_8c_a1a6b2f719b4fef8f97d6d1b8f495148e}{conv\_byte\_hex\_bin}
      (hvalue+29));
  \textcolor{keywordflow}{return} 1;
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=308pt]{group__acc_ga8509cccabb08e7267677f66f25718731_cgraph}
\end{center}
\end{figure}


\hypertarget{group__acc_ga041d6953f2bfc8c5efa4d5bbac812305}{\index{Functions for accelerometer A\-D\-X\-L345@{Functions for accelerometer A\-D\-X\-L345}!acc\-\_\-read\-\_\-data@{acc\-\_\-read\-\_\-data}}
\index{acc\-\_\-read\-\_\-data@{acc\-\_\-read\-\_\-data}!Functions for accelerometer ADXL345@{Functions for accelerometer A\-D\-X\-L345}}
\subsubsection[{acc\-\_\-read\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}short int acc\-\_\-read\-\_\-data (
\begin{DoxyParamCaption}
\item[{int}]{i2c\-\_\-dev, }
\item[{int}]{axis}
\end{DoxyParamCaption}
)}}\label{group__acc_ga041d6953f2bfc8c5efa4d5bbac812305}


R\-E\-A\-D D\-A\-T\-A (X, Y or Z) 


\begin{DoxyParams}[1]{Parameters}
 & {\em i2c\-\_\-dev} & Communication Port \\
\hline
\mbox{\tt in}  & {\em axis} & Accelerate's axis to read ('X' or 'Y' or 'Z')\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Definition at line 131 of file acc\-\_\-functions.\-c.



References A\-C\-C\-\_\-\-D\-A\-T\-A\-X0, A\-C\-C\-\_\-\-D\-A\-T\-A\-Y0, A\-C\-C\-\_\-\-D\-A\-T\-A\-Z0, and acc\-\_\-read\-\_\-reg().


\begin{DoxyCode}
\{
  uint8\_t *data;
  \textcolor{keyword}{union }result
  \{
    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} usgnd;
    \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} sgnd;
  \}result;

  \textcolor{keywordflow}{switch}(axis)\{
    \textcolor{keywordflow}{case} \textcolor{charliteral}{'X'}:
      data=\hyperlink{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{acc\_read\_reg}(i2c\_dev,\hyperlink{imu__regs_8h_afae448fbad872220013e5c3abf0f3d9f}{ACC\_DATAX0},2);
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} \textcolor{charliteral}{'Y'}:
      data=\hyperlink{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{acc\_read\_reg}(i2c\_dev,\hyperlink{imu__regs_8h_a6aa168a0f3e35bfee4da87c32dcb4b46}{ACC\_DATAY0},2);
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{case} \textcolor{charliteral}{'Z'}:
      data=\hyperlink{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{acc\_read\_reg}(i2c\_dev,\hyperlink{imu__regs_8h_ab87ce2339aeb4adb7fb71daa80f3bc68}{ACC\_DATAZ0},2);
      \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{default}:
      \textcolor{comment}{//perror("Wrong argument for axis in acc\_read\_data");}
      \textcolor{keywordflow}{return} -1;
  \}
  result.usgnd=0;
  result.usgnd=result.usgnd|(((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} int)data[0]))|(((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{
      int})data[1])<<8);
  \textcolor{keywordflow}{return} result.sgnd;
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=272pt]{group__acc_ga041d6953f2bfc8c5efa4d5bbac812305_cgraph}
\end{center}
\end{figure}


\hypertarget{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}{\index{Functions for accelerometer A\-D\-X\-L345@{Functions for accelerometer A\-D\-X\-L345}!acc\-\_\-read\-\_\-reg@{acc\-\_\-read\-\_\-reg}}
\index{acc\-\_\-read\-\_\-reg@{acc\-\_\-read\-\_\-reg}!Functions for accelerometer ADXL345@{Functions for accelerometer A\-D\-X\-L345}}
\subsubsection[{acc\-\_\-read\-\_\-reg}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t$\ast$ acc\-\_\-read\-\_\-reg (
\begin{DoxyParamCaption}
\item[{int}]{i2c\-\_\-dev, }
\item[{uint8\-\_\-t}]{reg, }
\item[{uint8\-\_\-t}]{count}
\end{DoxyParamCaption}
)}}\label{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9}


R\-E\-A\-D C\-O\-U\-N\-T 8-\/\-B\-I\-T R\-E\-G\-I\-S\-T\-E\-R I\-N S\-E\-Q\-U\-E\-N\-C\-E 


\begin{DoxyParams}[1]{Parameters}
 & {\em i2c\-\_\-dev} & Communication Port \\
\hline
\mbox{\tt in}  & {\em reg} & Register \\
\hline
\mbox{\tt in}  & {\em count} & Number of register in sequence (1-\/29)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Data of register or N\-U\-L\-L in case of any problem. 
\end{DoxyReturn}


Definition at line 109 of file acc\-\_\-functions.\-c.



Referenced by acc\-\_\-read\-\_\-all\-\_\-data(), acc\-\_\-read\-\_\-all\-\_\-reg(), and acc\-\_\-read\-\_\-data().


\begin{DoxyCode}
\{
  uint8\_t data[29];
  \textcolor{keywordtype}{int} i;

  \textcolor{comment}{//data=(uint8\_t*)malloc((count+1)*sizeof(data));}
  
  data[0] = reg;

  \textcolor{keywordflow}{if} ((write(i2c\_dev, &data, 1)) != 1) \{                 
        \textcolor{comment}{//perror("write before read");}
        \textcolor{keywordflow}{return} NULL;
  \}
  data[0] = 0;
  \textcolor{keywordflow}{if} ((read(i2c\_dev, &data, count)) != count) \{
        \textcolor{comment}{//perror("read");}
        \textcolor{keywordflow}{return} NULL;    
  \}

  \textcolor{keywordflow}{return} data;
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__acc_ga2a91c44eebbe44f4d3b8c508633512f9_icgraph}
\end{center}
\end{figure}


\hypertarget{group__acc_ga534116416343122de29a5b6ade6876bd}{\index{Functions for accelerometer A\-D\-X\-L345@{Functions for accelerometer A\-D\-X\-L345}!acc\-\_\-write\-\_\-reg@{acc\-\_\-write\-\_\-reg}}
\index{acc\-\_\-write\-\_\-reg@{acc\-\_\-write\-\_\-reg}!Functions for accelerometer ADXL345@{Functions for accelerometer A\-D\-X\-L345}}
\subsubsection[{acc\-\_\-write\-\_\-reg}]{\setlength{\rightskip}{0pt plus 5cm}int acc\-\_\-write\-\_\-reg (
\begin{DoxyParamCaption}
\item[{int}]{i2c\-\_\-dev, }
\item[{uint8\-\_\-t}]{reg, }
\item[{uint8\-\_\-t}]{data}
\end{DoxyParamCaption}
)}}\label{group__acc_ga534116416343122de29a5b6ade6876bd}


W\-R\-I\-T\-E T\-O R\-E\-G\-I\-S\-T\-E\-R. 


\begin{DoxyParams}[1]{Parameters}
 & {\em i2c\-\_\-dev} & Communication Port \\
\hline
\mbox{\tt in}  & {\em reg} & Register \\
\hline
\mbox{\tt in}  & {\em data} & Data to write \\
\hline
\end{DoxyParams}


Definition at line 87 of file acc\-\_\-functions.\-c.



References A\-C\-C\-\_\-\-A\-C\-T\-\_\-\-T\-A\-P\-\_\-\-S\-T\-A\-T\-U\-S, A\-C\-C\-\_\-\-D\-A\-T\-A\-X0, A\-C\-C\-\_\-\-D\-A\-T\-A\-X1, A\-C\-C\-\_\-\-D\-A\-T\-A\-Y0, A\-C\-C\-\_\-\-D\-A\-T\-A\-Y1, A\-C\-C\-\_\-\-D\-A\-T\-A\-Z0, A\-C\-C\-\_\-\-D\-A\-T\-A\-Z1, A\-C\-C\-\_\-\-D\-E\-V\-I\-D, A\-C\-C\-\_\-\-F\-I\-F\-O\-\_\-\-S\-T\-A\-T\-U\-S, A\-C\-C\-\_\-\-I\-N\-T\-\_\-\-S\-O\-U\-R\-C\-E, F\-A\-I\-L\-U\-R\-E, and S\-U\-C\-C\-E\-S\-S.



Referenced by acc\-\_\-init().


\begin{DoxyCode}
\{
  uint8\_t reg\_data[2];

  reg\_data[0] = reg;
  reg\_data[1] = data;

  \textcolor{keywordflow}{if}( reg==\hyperlink{imu__regs_8h_a007fa8d8ef9d89127ae5da32a2f42283}{ACC\_DEVID} || reg==\hyperlink{imu__regs_8h_a823b94e47b6d728fdf91d386d69db3e9}{ACC\_ACT\_TAP\_STATUS} || 
      reg==\hyperlink{imu__regs_8h_a7f9415e11f76d0666b842a875f5f5fd8}{ACC\_INT\_SOURCE} || reg==\hyperlink{imu__regs_8h_acb0760254230c73d4744bae2059e7367}{ACC\_FIFO\_STATUS} ||
      reg==\hyperlink{imu__regs_8h_afae448fbad872220013e5c3abf0f3d9f}{ACC\_DATAX0} || reg==\hyperlink{imu__regs_8h_a63d0e7c719fabce83422ef9856302129}{ACC\_DATAX1} || reg==\hyperlink{imu__regs_8h_a6aa168a0f3e35bfee4da87c32dcb4b46}{ACC\_DATAY0}
       || reg==\hyperlink{imu__regs_8h_a587970363cd2aeb2535ac314e98a2825}{ACC\_DATAY1} || reg==\hyperlink{imu__regs_8h_ab87ce2339aeb4adb7fb71daa80f3bc68}{ACC\_DATAZ0} || reg==\hyperlink{imu__regs_8h_afa9ea1f66d9d28dbb328498d6f7fa43d}{ACC\_DATAZ1}
      )
  \{
      perror(\textcolor{stringliteral}{"Write unsucessful: Read-Only Register"});
      \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}
        
  \textcolor{keywordflow}{if} ((write(i2c\_dev, &reg\_data, 2)) != 2) \{             
          perror(\textcolor{stringliteral}{"Write unsuccessful"});
          \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_a6d58f9ac447476b4e084d7ca383f5183}{FAILURE};
  \}

  \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__acc_ga534116416343122de29a5b6ade6876bd_icgraph}
\end{center}
\end{figure}


