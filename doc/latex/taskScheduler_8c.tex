\hypertarget{taskScheduler_8c}{\section{task\-Scheduler.\-c File Reference}
\label{taskScheduler_8c}\index{task\-Scheduler.\-c@{task\-Scheduler.\-c}}
}
{\ttfamily \#include \char`\"{}task\-Scheduler.\-h\char`\"{}}\\*
Include dependency graph for task\-Scheduler.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{taskScheduler_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{taskScheduler_8c_a2346be42760ac3f89c3e9e9414d83645}{timer\-\_\-new\-\_\-task} (\hyperlink{structTASK__S}{T\-A\-S\-K\-\_\-\-S} $\ast$task, void $\ast$run\-Funtion)
\item 
void \hyperlink{group__taskS_gac088a054258396a6e2dba77908f22b42}{timer\-\_\-start\-\_\-task} (\hyperlink{structTASK__S}{T\-A\-S\-K\-\_\-\-S} $\ast$task)
\begin{DoxyCompactList}\small\item\em Start some task. \end{DoxyCompactList}\item 
void \hyperlink{taskScheduler_8c_a39e4b92cd20da5838951ab5b0ad19fbb}{timer\-\_\-function\-\_\-task} (\hyperlink{structTASK__S}{T\-A\-S\-K\-\_\-\-S} $\ast$task)
\item 
void \hyperlink{group__taskS_ga8e48eacaac7d9cf7d82cc71cfbcd4b56}{timer\-\_\-stop\-\_\-task} (\hyperlink{structTASK__S}{T\-A\-S\-K\-\_\-\-S} $\ast$task)
\begin{DoxyCompactList}\small\item\em Stop some task. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{taskScheduler_8c_a39e4b92cd20da5838951ab5b0ad19fbb}{\index{task\-Scheduler.\-c@{task\-Scheduler.\-c}!timer\-\_\-function\-\_\-task@{timer\-\_\-function\-\_\-task}}
\index{timer\-\_\-function\-\_\-task@{timer\-\_\-function\-\_\-task}!taskScheduler.c@{task\-Scheduler.\-c}}
\subsubsection[{timer\-\_\-function\-\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-function\-\_\-task (
\begin{DoxyParamCaption}
\item[{{\bf T\-A\-S\-K\-\_\-\-S} $\ast$}]{task}
\end{DoxyParamCaption}
)}}\label{taskScheduler_8c_a39e4b92cd20da5838951ab5b0ad19fbb}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]make a function to set all times to zero \end{DoxyRefDesc}


Definition at line 49 of file task\-Scheduler.\-c.



References status, and t0.


\begin{DoxyCode}
50 \{
51   \textcolor{keywordtype}{int} \hyperlink{communication_2communication_8c_a6e27f49150e9a14580fb313cc2777e00}{status} = 0;
52   \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval timereset;
53   \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time;
54   \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time\_exec\_start;
55   \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time\_exec\_end;
56   \textcolor{keyword}{static} \textcolor{keywordtype}{double} T\_task,t\_task,t\_task\_previous;
57   \textcolor{keyword}{static} \textcolor{keywordtype}{double} T\_task\_mean,T\_task\_min,T\_task\_max,T\_task\_exec;
58 
59   gettimeofday(&time\_exec\_start, NULL);
60 
61   \textcolor{comment}{// Time calculation}
62   \textcolor{keywordflow}{if}((*task).isFirstExecution)
63     \{
64       gettimeofday(&timereset, NULL);
66     \}
67 
68   gettimeofday(&time, NULL);
69   t\_task = ((time.tv\_sec - timereset.tv\_sec) + (time.tv\_usec - timereset.tv\_usec)*1e-6);
70   T\_task = t\_task - t\_task\_previous;
71   t\_task\_previous = t\_task;
72 
73   \textcolor{keywordflow}{if}((*task).isFirstExecution)
74     \{
75       T\_task\_mean = T\_task;
76       T\_task\_min  = 1e200;
77       T\_task\_max  = 0.0;
78       \hyperlink{main2_8c_a86c2efd6da48b362806cdbb5b1e711d8}{t0} = t\_task;
79     \}
80   \textcolor{keywordflow}{else}
81     \{
82       T\_task\_mean = 0.05*T\_task + 0.95*T\_task\_mean;
83       \textcolor{keywordflow}{if}(T\_task < T\_task\_min) T\_task\_min  = T\_task;
84       \textcolor{keywordflow}{if}(T\_task > T\_task\_max) T\_task\_max  = T\_task;
85     \}
86 
87   \textcolor{comment}{// Run the thread}
88   status = (*task).runFunction();
89 
90   gettimeofday(&time\_exec\_end, NULL);
91   T\_task\_exec = ((time\_exec\_end.tv\_sec - time\_exec\_start.tv\_sec) + (time\_exec\_end.tv\_usec - time\_exec\_start
      .tv\_usec)*1e-6);
92 
93   (*task).t\_global = t\_task;
94   (*task).T\_mean\_global = T\_task\_mean;
95   (*task).T\_min\_global = T\_task\_min;
96   (*task).T\_max\_global = T\_task\_max;
97   (*task).T\_exec\_global = T\_task\_exec;
98 
99   (*task).isFirstExecution = 0;
100 \}
\end{DoxyCode}
\hypertarget{taskScheduler_8c_a2346be42760ac3f89c3e9e9414d83645}{\index{task\-Scheduler.\-c@{task\-Scheduler.\-c}!timer\-\_\-new\-\_\-task@{timer\-\_\-new\-\_\-task}}
\index{timer\-\_\-new\-\_\-task@{timer\-\_\-new\-\_\-task}!taskScheduler.c@{task\-Scheduler.\-c}}
\subsubsection[{timer\-\_\-new\-\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-new\-\_\-task (
\begin{DoxyParamCaption}
\item[{{\bf T\-A\-S\-K\-\_\-\-S} $\ast$}]{task, }
\item[{void $\ast$}]{run\-Funtion}
\end{DoxyParamCaption}
)}}\label{taskScheduler_8c_a2346be42760ac3f89c3e9e9414d83645}


Definition at line 7 of file task\-Scheduler.\-c.



References T\-A\-S\-K\-\_\-\-S\-::run.



Referenced by main().


\begin{DoxyCode}
7                                                   \{
8   (*task).t\_global = 0.0;
9   (*task).T\_exec\_global = 0.0;
10   (*task).T\_mean\_global = 0.0;
11   (*task).T\_max\_global = 0.0;
12   (*task).period\_us = 0.0;
13   (*task).isFirstExecution = 1;
14 
15   task->\hyperlink{structTASK__S_abe9c219d2f60c43991788786735599f2}{run} = runFunction;
16 \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{taskScheduler_8c_a2346be42760ac3f89c3e9e9414d83645_icgraph}
\end{center}
\end{figure}


