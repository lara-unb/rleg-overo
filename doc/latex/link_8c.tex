\hypertarget{link_8c}{\section{schunk\-\_\-high/src/kinematics/link.c File Reference}
\label{link_8c}\index{schunk\-\_\-high/src/kinematics/link.\-c@{schunk\-\_\-high/src/kinematics/link.\-c}}
}
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$schunk\-\_\-high/link.\-h$>$}\\*
{\ttfamily \#include $<$schunk\-\_\-high/dualquaternion.\-h$>$}\\*
{\ttfamily \#include $<$math.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structLink}{Link} $\ast$ \hyperlink{link_8c_a63108dab9690ad80af31aaa380d49048}{Link\-\_\-create} (double theta, double d, double a, double alpha)
\begin{DoxyCompactList}\small\item\em \hyperlink{structRobot}{Robot}'s \hyperlink{structLink}{Link} Library. \end{DoxyCompactList}\item 
void \hyperlink{link_8c_aa5732848aecbf1cb2f8605b2f43aa14e}{Link\-\_\-free} (\hyperlink{structLink}{Link} $\ast$l)
\begin{DoxyCompactList}\small\item\em Frees a \hyperlink{structLink}{Link} from memory. \end{DoxyCompactList}\item 
\hyperlink{structDQ}{D\-Q} $\ast$ \hyperlink{link_8c_a214ddb7cd91bd6b6b3a9ee37d1ec5a92}{Link\-\_\-\-D\-Q\-F\-T} (\hyperlink{structLink}{Link} $\ast$l)
\begin{DoxyCompactList}\small\item\em Dual\-Quaternion \hyperlink{structLink}{Link} Frame Transformation. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{link_8c_a63108dab9690ad80af31aaa380d49048}{\index{link.\-c@{link.\-c}!Link\-\_\-create@{Link\-\_\-create}}
\index{Link\-\_\-create@{Link\-\_\-create}!link.c@{link.\-c}}
\subsubsection[{Link\-\_\-create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Link}$\ast$ Link\-\_\-create (
\begin{DoxyParamCaption}
\item[{double}]{theta, }
\item[{double}]{d, }
\item[{double}]{a, }
\item[{double}]{alpha}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [read]}}}\label{link_8c_a63108dab9690ad80af31aaa380d49048}


\hyperlink{structRobot}{Robot}'s \hyperlink{structLink}{Link} Library. 

Holds the D\-H's parameters of each \hyperlink{structLink}{Link} and the transformations of each \hyperlink{structLink}{Link}.

\begin{DoxyAuthor}{Author}
Murilo Marques Marinho. Allocates a new \hyperlink{structLink}{Link} and initializes it using the given D\-H parameters.
\end{DoxyAuthor}

\begin{DoxyParams}{Parameters}
{\em theta} & The link's D\-H's theta \\
\hline
{\em d} & The \hyperlink{structLink}{Link}'s D\-H's d \\
\hline
{\em a} & The \hyperlink{structLink}{Link}'s D\-H's a \\
\hline
{\em alpha} & The \hyperlink{structLink}{Link}'s D\-H's alpha \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A \hyperlink{structLink}{Link} with the given D\-H parameters. 
\end{DoxyReturn}


Definition at line 26 of file link.\-c.



References Link\-::a, Link\-::alpha, Link\-::d, Link\-::jvel, Link\-::n, and Link\-::theta.



Referenced by Robot\-\_\-add\-Link().


\begin{DoxyCode}
                                                                 \{
        
        \hyperlink{structLink}{Link}* l = (\hyperlink{structLink}{Link}*)malloc(\textcolor{keyword}{sizeof}(\hyperlink{structLink}{Link}));
        l->\hyperlink{structLink_a88e705bc7fb6c7c8c7fa6987b52667d6}{theta} = theta;
        l->\hyperlink{structLink_a4e5e4ea2ef9be2aae1e9fdef406be185}{d}     = d;
        l->\hyperlink{structLink_a3ef89c4478d7e2de8a59de9c88052123}{a}     = a;
        l->\hyperlink{structLink_ab838e5bc121c212cb1a81fdf78de8757}{alpha} = alpha;
        l->\hyperlink{structLink_a9ba28f0b8b867ad4624abb9730ef30d2}{jvel}  = 0;
        l->\hyperlink{structLink_a185503cf680f8e9395c19c0521997c5c}{n} = NULL;
        
        \textcolor{keywordflow}{return} l;
\}
\end{DoxyCode}
\hypertarget{link_8c_a214ddb7cd91bd6b6b3a9ee37d1ec5a92}{\index{link.\-c@{link.\-c}!Link\-\_\-\-D\-Q\-F\-T@{Link\-\_\-\-D\-Q\-F\-T}}
\index{Link\-\_\-\-D\-Q\-F\-T@{Link\-\_\-\-D\-Q\-F\-T}!link.c@{link.\-c}}
\subsubsection[{Link\-\_\-\-D\-Q\-F\-T}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\-Q}$\ast$ Link\-\_\-\-D\-Q\-F\-T (
\begin{DoxyParamCaption}
\item[{{\bf Link} $\ast$}]{l}
\end{DoxyParamCaption}
)}}\label{link_8c_a214ddb7cd91bd6b6b3a9ee37d1ec5a92}


Dual\-Quaternion \hyperlink{structLink}{Link} Frame Transformation. 


\begin{DoxyParams}{Parameters}
{\em l} & The \hyperlink{structLink}{Link} which Dual\-Quaternion Frame Transformation you want. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A Dual\-Quaternion representing it's transformation. 
\end{DoxyReturn}


Definition at line 55 of file link.\-c.



References Link\-::a, Link\-::alpha, Link\-::d, D\-Q\-::d, D\-Q\-\_\-alloc(), D\-Q\-::p, Q\-\_\-alloc(), Link\-::theta, and Q\-::v.



Referenced by Robot\-\_\-\-F\-K\-M(), Robot\-\_\-get\-A\-Jacobian(), and Robot\-\_\-get\-G\-Jacobian().


\begin{DoxyCode}
                      \{

        \textcolor{comment}{//Link's values}
        \textcolor{keywordtype}{double} theta = l->\hyperlink{structLink_a88e705bc7fb6c7c8c7fa6987b52667d6}{theta};
        \textcolor{keywordtype}{double} d = l->\hyperlink{structLink_a4e5e4ea2ef9be2aae1e9fdef406be185}{d};
        \textcolor{keywordtype}{double} a = l->\hyperlink{structLink_a3ef89c4478d7e2de8a59de9c88052123}{a};
        \textcolor{keywordtype}{double} alpha = l->\hyperlink{structLink_ab838e5bc121c212cb1a81fdf78de8757}{alpha};

        \textcolor{comment}{//Used values}
        \textcolor{keywordtype}{double} ct2 = cos(theta/2); \textcolor{keywordtype}{double} st2 = sin(theta/2);
        \textcolor{keywordtype}{double} ca2 = cos(alpha/2); \textcolor{keywordtype}{double} sa2 = sin(alpha/2);
        \textcolor{keywordtype}{double} d2 = d/2;           \textcolor{keywordtype}{double} a2 = a/2;

        \textcolor{comment}{//Memory Alloc  }
        \hyperlink{structDQ}{DQ}* dq = \hyperlink{dualquaternion_8h_aaa019fc9bc7de2150887a4b323cedc50}{DQ\_alloc}();
        \hyperlink{structQ}{Q}* pp = \hyperlink{quaternion_8h_a2267ada2076193cc73def7d5df3281c0}{Q\_alloc}();
        \hyperlink{structQ}{Q}* dp = \hyperlink{quaternion_8h_a2267ada2076193cc73def7d5df3281c0}{Q\_alloc}();
        
        \textcolor{comment}{//Calculation}
    pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[0] = ct2*ca2;
        pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[1] = ct2*sa2;
        pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[2] = st2*sa2;
        pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[3] = st2*ca2;
        dp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[0] = (-d2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[3] - (a2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[1];
        dp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[1] = (-d2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[2] + (a2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[0];
        dp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[2] =  (d2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[1] + (a2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[3];
        dp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[3] =  (d2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[0] - (a2)*pp->\hyperlink{structQ_a2a0074b583999340d42804e4c1141ac4}{v}[2];
        
        \textcolor{comment}{//Atrib}
        dq->\hyperlink{structDQ_a878210bff170f4392d6cbe2d4704ffdc}{p} = pp;
        dq->\hyperlink{structDQ_a535cdb52876521fd6abbfcf211a7c702}{d} = dp;
        
        \textcolor{keywordflow}{return} dq;
\}
\end{DoxyCode}
\hypertarget{link_8c_aa5732848aecbf1cb2f8605b2f43aa14e}{\index{link.\-c@{link.\-c}!Link\-\_\-free@{Link\-\_\-free}}
\index{Link\-\_\-free@{Link\-\_\-free}!link.c@{link.\-c}}
\subsubsection[{Link\-\_\-free}]{\setlength{\rightskip}{0pt plus 5cm}void Link\-\_\-free (
\begin{DoxyParamCaption}
\item[{{\bf Link} $\ast$}]{l}
\end{DoxyParamCaption}
)}}\label{link_8c_aa5732848aecbf1cb2f8605b2f43aa14e}


Frees a \hyperlink{structLink}{Link} from memory. 


\begin{DoxyParams}{Parameters}
{\em l} & The \hyperlink{structLink}{Link} to be freed. \\
\hline
\end{DoxyParams}


Definition at line 44 of file link.\-c.



Referenced by Robot\-\_\-free().


\begin{DoxyCode}
                       \{
        free(l);
\}
\end{DoxyCode}
