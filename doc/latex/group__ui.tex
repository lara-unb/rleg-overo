\hypertarget{group__ui}{
\section{Functions to deal the User Inteface using ncurses}
\label{group__ui}\index{Functions to deal the User Inteface using ncurses@{Functions to deal the User Inteface using ncurses}}
}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__ui_gab7bfb453918dcc296ff0cea3c79453d0}{ui\_\-init} (void)
\begin{DoxyCompactList}\small\item\em Initialize UI. \item\end{DoxyCompactList}\item 
int \hyperlink{group__ui_ga65d8b92b634da17c344458cd57e61f3e}{ui\_\-close} (void)
\begin{DoxyCompactList}\small\item\em Close UI. \item\end{DoxyCompactList}\item 
int \hyperlink{group__ui_ga42e4dac2d138061a74c572358c8ebf49}{ui\_\-update} (\hyperlink{structIMU__DATA__STRUCT}{IMU\_\-DATA\_\-STRUCT} $\ast$pimu\_\-data, \hyperlink{structEFF__DATA__STRUCT}{EFF\_\-DATA\_\-STRUCT} $\ast$peff\_\-data, \hyperlink{structMRA__DATA__STRUCT}{MRA\_\-DATA\_\-STRUCT} $\ast$pmra\_\-data, \hyperlink{structENC__DATA__STRUCT}{ENC\_\-DATA\_\-STRUCT} $\ast$\hyperlink{main2_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{enc\_\-data}, int \hyperlink{threads__linux_8c_ac7af894858cf396a219d632f40afdc8d}{total}, int \hyperlink{threads__linux_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure})
\begin{DoxyCompactList}\small\item\em Update Screen with new data of sensors. \item\end{DoxyCompactList}\item 
int \hyperlink{group__ui_ga7d5a9d9a75693709de408781d001a6a6}{ui\_\-imu\_\-data} (\hyperlink{structIMU__DATA__STRUCT}{IMU\_\-DATA\_\-STRUCT} $\ast$pimu\_\-data)
\begin{DoxyCompactList}\small\item\em Print IMU data. \item\end{DoxyCompactList}\item 
int \hyperlink{group__ui_gaefec243c5df45db0350c1abbccf20e3b}{ui\_\-mra\_\-data} (\hyperlink{structMRA__DATA__STRUCT}{MRA\_\-DATA\_\-STRUCT} $\ast$pmra\_\-data)
\begin{DoxyCompactList}\small\item\em Print MRA data. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{group__ui_ga65d8b92b634da17c344458cd57e61f3e}{
\index{ui@{ui}!ui\_\-close@{ui\_\-close}}
\index{ui\_\-close@{ui\_\-close}!ui@{ui}}
\subsubsection[{ui\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}int ui\_\-close (void)}}
\label{group__ui_ga65d8b92b634da17c344458cd57e61f3e}


Close UI. 



Definition at line 41 of file ui.c.



References SUCCESS.



Referenced by main(), and threads\_\-linux\_\-init().




\begin{DoxyCode}
42 {
43     #if UI_MODULE_ENABLED
44         clear();
45         printw("Cleaning up...\n");
46         refresh();
47         endwin();
48     #endif
49 
50           return SUCCESS;
51 }
\end{DoxyCode}




Here is the caller graph for this function:

\hypertarget{group__ui_ga7d5a9d9a75693709de408781d001a6a6}{
\index{ui@{ui}!ui\_\-imu\_\-data@{ui\_\-imu\_\-data}}
\index{ui\_\-imu\_\-data@{ui\_\-imu\_\-data}!ui@{ui}}
\subsubsection[{ui\_\-imu\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}int ui\_\-imu\_\-data ({\bf IMU\_\-DATA\_\-STRUCT} $\ast$ {\em pimu\_\-data})}}
\label{group__ui_ga7d5a9d9a75693709de408781d001a6a6}


Print IMU data. 



Definition at line 130 of file ui.c.



References IMU\_\-DATA\_\-STRUCT::calibrated::acc, IMU\_\-DATA\_\-STRUCT::acc, IMU\_\-DATA\_\-STRUCT::calib, IMU\_\-DATA\_\-STRUCT::calibrated::gyr, IMU\_\-DATA\_\-STRUCT::gyr, IMU\_\-DATA\_\-STRUCT::calibrated::mag, IMU\_\-DATA\_\-STRUCT::mag, SUCCESS, DATA\_\-XYZ\_\-DOUBLE::x, DATA\_\-XYZ::x, DATA\_\-XYZ\_\-DOUBLE::y, DATA\_\-XYZ::y, DATA\_\-XYZ\_\-DOUBLE::z, and DATA\_\-XYZ::z.



Referenced by ui\_\-update().




\begin{DoxyCode}
131 {
132         mvprintw(2, 0, "Accelerometer X (raw): %d", pimu_data->acc.x);
133         mvprintw(2, 40, "Accelerometer X (g): %lf", pimu_data->calib.acc.x);
134         mvprintw(3, 0, "Accelerometer Y (raw): %d", pimu_data->acc.y);
135         mvprintw(3, 40, "Accelerometer Y (g): %lf", pimu_data->calib.acc.y);
136         mvprintw(4, 0, "Accelerometer Z (raw): %d", pimu_data->acc.z);
137         mvprintw(4, 40, "Accelerometer Z (g): %lf", pimu_data->calib.acc.z);
138         mvprintw(5, 0, "Gyrometer X (raw):     %d", pimu_data->gyr.x);
139         mvprintw(5, 40, "Gyrometer X (rad/sec):   %lf", pimu_data->calib.gyr.x);
140         mvprintw(6, 0, "Gyrometer Y (raw):     %d", pimu_data->gyr.y);
141         mvprintw(6, 40, "Gyrometer Y (rad/sec):   %lf", pimu_data->calib.gyr.y);
142         mvprintw(7, 0, "Gyrometer Z (raw):     %d", pimu_data->gyr.z);
143         mvprintw(7, 40, "Gyrometer Z (rad/sec):   %lf", pimu_data->calib.gyr.z);
144         mvprintw(8, 0, "Magnetometer X (raw):  %d", pimu_data->mag.x);
145         mvprintw(8, 40, "Magnetometer X (B):     %lf", pimu_data->calib.mag.x);
146         mvprintw(9, 0, "Magnetometer Y (raw):  %d", pimu_data->mag.y);
147         mvprintw(9, 40, "Magnetometer Y (B):     %lf", pimu_data->calib.mag.y);
148         mvprintw(10,0, "Magnetometer Z (raw):  %d", pimu_data->mag.z);
149         mvprintw(10,40, "Magnetometer Z (B):     %lf", pimu_data->calib.mag.z);
150         mvprintw(12,0,"Total Acceleromter: %lf",sqrt(pimu_data->calib.acc.x*pimu_
      data->calib.acc.x+pimu_data->calib.acc.y*pimu_data->calib.acc.y+pimu_data->calib.
      acc.z*pimu_data->calib.acc.z));
151         mvprintw(13,0,"Total Gyrometer: %lf",sqrt(pimu_data->calib.gyr.x*pimu_dat
      a->calib.gyr.x+pimu_data->calib.gyr.y*pimu_data->calib.gyr.y+pimu_data->calib.
      gyr.z*pimu_data->calib.gyr.z));
152         mvprintw(14,0,"Total Magnetometer: %lf",sqrt(pimu_data->calib.mag.x*pimu_
      data->calib.mag.x+pimu_data->calib.mag.y*pimu_data->calib.mag.y+pimu_data->calib.
      mag.z*pimu_data->calib.mag.z));
153         //mvprintw(15, 0, "Encoder (raw): %lf", enc.data);
154 
155         return SUCCESS;
156 }
\end{DoxyCode}




Here is the caller graph for this function:

\hypertarget{group__ui_gab7bfb453918dcc296ff0cea3c79453d0}{
\index{ui@{ui}!ui\_\-init@{ui\_\-init}}
\index{ui\_\-init@{ui\_\-init}!ui@{ui}}
\subsubsection[{ui\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int ui\_\-init (void)}}
\label{group__ui_gab7bfb453918dcc296ff0cea3c79453d0}


Initialize UI. 



Definition at line 26 of file ui.c.



References SUCCESS, and TRUE.



Referenced by main(), and threads\_\-linux\_\-init().




\begin{DoxyCode}
27 {
28     #if UI_MODULE_ENABLED
29         //NCURSES
30         initscr();
31         scrollok(stdscr,TRUE);
32         //resizeterm(33,100);
33         //wresize(scr,32,100);
34         //erase();
35         timeout(0); //No delay for getch();
36     #endif
37 
38         return SUCCESS;
39 }
\end{DoxyCode}




Here is the caller graph for this function:

\hypertarget{group__ui_gaefec243c5df45db0350c1abbccf20e3b}{
\index{ui@{ui}!ui\_\-mra\_\-data@{ui\_\-mra\_\-data}}
\index{ui\_\-mra\_\-data@{ui\_\-mra\_\-data}!ui@{ui}}
\subsubsection[{ui\_\-mra\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}int ui\_\-mra\_\-data ({\bf MRA\_\-DATA\_\-STRUCT} $\ast$ {\em pmra\_\-data})}}
\label{group__ui_gaefec243c5df45db0350c1abbccf20e3b}


Print MRA data. 



Definition at line 183 of file ui.c.



References SUCCESS, MRA\_\-DATA\_\-STRUCT::v\_\-ctl, and MRA\_\-DATA\_\-STRUCT::v\_\-ctl\_\-read.



Referenced by ui\_\-update().




\begin{DoxyCode}
184 {
185         mvprintw(2,0,"V_ctl (bits): %d",pmra_data->v_ctl);
186         mvprintw(3,0,"V_ctl_read (bits): %d",pmra_data->v_ctl_read);
187         //mvprintw(2,40,"Fx (N): %lf",peff_data->??);
188 
189         return SUCCESS;
190 }
\end{DoxyCode}




Here is the caller graph for this function:

\hypertarget{group__ui_ga42e4dac2d138061a74c572358c8ebf49}{
\index{ui@{ui}!ui\_\-update@{ui\_\-update}}
\index{ui\_\-update@{ui\_\-update}!ui@{ui}}
\subsubsection[{ui\_\-update}]{\setlength{\rightskip}{0pt plus 5cm}int ui\_\-update ({\bf IMU\_\-DATA\_\-STRUCT} $\ast$ {\em pimu\_\-data}, \/  {\bf EFF\_\-DATA\_\-STRUCT} $\ast$ {\em peff\_\-data}, \/  {\bf MRA\_\-DATA\_\-STRUCT} $\ast$ {\em pmra\_\-data}, \/  {\bf ENC\_\-DATA\_\-STRUCT} $\ast$ {\em enc\_\-data}, \/  int {\em total}, \/  int {\em failure})}}
\label{group__ui_ga42e4dac2d138061a74c572358c8ebf49}


Update Screen with new data of sensors. 



Definition at line 53 of file ui.c.



References exit\_\-program(), FAILURE, SUCCESS, ui\_\-eff\_\-data(), ui\_\-enc\_\-data(), ui\_\-imu\_\-data(), ui\_\-mra\_\-data(), and ui\_\-overview\_\-data().



Referenced by periodic\_\-task\_\-2(), threads\_\-linux\_\-periodic\_\-task\_\-2(), and ui\_\-task().




\begin{DoxyCode}
54 {
55         unsigned char user_char = 0;
56 
57         static enum {UI_OVERVIEW = 0, UI_IMU, UI_EFF, UI_MRA , UI_ENC} ui_state;
58 
59         erase();
60         //wresize(scr,32,100);
61         attron(A_STANDOUT);
62 
63         mvaddstr(0,15,"RLEG Data");
64         attroff(A_STANDOUT);
65 
66         switch(ui_state)
67         {
68                 case UI_IMU:
69                         if(ui_imu_data(pimu_data) != SUCCESS) return FAILURE;
70                         break;
71                 case UI_EFF:
72                         if(ui_eff_data(peff_data) != SUCCESS) return FAILURE;
73                         break;
74                 case UI_MRA:
75                         if(ui_mra_data(pmra_data) != SUCCESS) return FAILURE;
76                         break;
77         case UI_ENC:
78                         if(ui_enc_data(enc_data) != SUCCESS) return FAILURE;
79                         break;
80                 case UI_OVERVIEW:
81                 default:
82                         if(ui_overview_data(total, failure, pimu_data, peff_data,
       pmra_data, enc_data) != SUCCESS) return FAILURE;
83                         break;
84         }
85 
86         refresh();
87 
88         user_char = getch(); //Getting a char typed by the user
89         switch(user_char)
90         {
91                 case 'Q':
92                 case 'q': //Quit
93                         exit_program();
94                         break;
95                 case 'i': //IMU view
96                         ui_state = UI_IMU;
97                         break;
98                 case 'f': //EFF view
99                         ui_state = UI_EFF;
100                         break;
101             case 'e': // ENCODER view
102                     ui_state = UI_ENC;
103                     break;
104                 case 'o': //Overview
105                         ui_state = UI_OVERVIEW;
106                         break;
107                 case 'm': //MRA
108                         ui_state = UI_MRA;
109                 
110                         break;
111                 /* removed datalogger
112                 case 'd': //Datalogger start/stop
113                   if(datalogger_status() == DATALOGGER_RUNNING)
114                   {
115                     datalogger_stop();
116                   }
117                   else
118                   {
119                     datalogger_start();
120                   }
121                   break;
122                 */
123                default:
124                  break;
125         }
126 
127         return SUCCESS;
128 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

