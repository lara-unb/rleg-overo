\hypertarget{datalogger_8c}{
\section{datalogger.c File Reference}
\label{datalogger_8c}\index{datalogger.c@{datalogger.c}}
}
{\ttfamily \#include $<$stdlib.h$>$}\par
{\ttfamily \#include $<$stdio.h$>$}\par
{\ttfamily \#include $<$string.h$>$}\par
{\ttfamily \#include $<$pthread.h$>$}\par
{\ttfamily \#include \char`\"{}gdatalogger/gqueue.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}communication/communication.h\char`\"{}}\par
Include dependency graph for datalogger.c:This graph shows which files directly or indirectly include this file:\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{datalogger_8c_a54b06d9395b2e370a5a72beb7f9524b2}{datalogger\_\-lock\_\-mutex} (void)
\item 
int \hyperlink{datalogger_8c_a85453211c0c809083c36cc56b275aeeb}{datalogger\_\-unlock\_\-mutex} (void)
\item 
int \hyperlink{datalogger_8c_a1977ef253746fd8c008a3641d9822551}{datalogger\_\-init} (void)
\item 
int \hyperlink{datalogger_8c_ad22dbe9e235e7ae5737a23796d13ffbd}{datalogger\_\-close} (void)
\item 
int \hyperlink{datalogger_8c_a2aedecfce53e1935a41615ceaf378013}{datalogger\_\-write\_\-file} (void)
\item 
int \hyperlink{datalogger_8c_a25bb814a0877f419ae09b08cd7e91ee9}{datalogger\_\-update\_\-IPC} (void)
\item 
int \hyperlink{datalogger_8c_ad89a56e2f057ace8c28d78eb67703e7d}{datalogger\_\-update} (double t\_\-s, double t\_\-control\_\-exec\_\-s, double t\_\-ui\_\-exec\_\-s, double t0\_\-s, \hyperlink{structIMU__DATA__STRUCT}{IMU\_\-DATA\_\-STRUCT} $\ast$pimu\_\-data, \hyperlink{structEFF__DATA__STRUCT}{EFF\_\-DATA\_\-STRUCT} $\ast$peff\_\-data, \hyperlink{structMRA__DATA__STRUCT}{MRA\_\-DATA\_\-STRUCT} $\ast$pmra\_\-data)
\item 
int \hyperlink{datalogger_8c_afb69d166f8d53042825174cee225ea49}{datalogger\_\-set\_\-Ts} (double Ts)
\item 
int \hyperlink{datalogger_8c_a46fd1290d9ee97d5fc7171e1e0dcb0aa}{datalogger\_\-status} (void)
\item 
int \hyperlink{datalogger_8c_a1f254ef380d595d6605c10811fd0dee6}{datalogger\_\-start} (void)
\item 
int \hyperlink{datalogger_8c_aae2ffbc6cbf8f1cfecceb42c5139530a}{datalogger\_\-stop} (void)
\item 
int \hyperlink{datalogger_8c_a29bc3190cba1f225ad3b2eed899a6762}{datalogger\_\-file\_\-exists} (const char $\ast$filename)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structGDATALOGGER}{GDATALOGGER} \hyperlink{datalogger_8c_abe3b9c2c4e21e79c7b046b5986d13acc}{gDataLogger}
\item 
unsigned int \hyperlink{datalogger_8c_a35e8fbe04b90452afdc3c1be16ff6187}{datalogger\_\-initialized} = DATALOGGER\_\-NOT\_\-INITIALIZED
\item 
unsigned int \hyperlink{datalogger_8c_a185c3ede96449d14f330fe5ac664e799}{datalogger\_\-running} = DATALOGGER\_\-NOT\_\-RUNNING
\item 
pthread\_\-mutex\_\-t \hyperlink{datalogger_8c_a824d6f7fd1d3898ba0b1100ba37875c6}{datalogger\_\-mutex} = PTHREAD\_\-MUTEX\_\-INITIALIZER
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{datalogger_8c_ad22dbe9e235e7ae5737a23796d13ffbd}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-close@{datalogger\_\-close}}
\index{datalogger\_\-close@{datalogger\_\-close}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-close (void)}}
\label{datalogger_8c_ad22dbe9e235e7ae5737a23796d13ffbd}


Definition at line 215 of file datalogger.c.



References DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), datalogger\_\-mutex, DATALOGGER\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-SUCCESS, datalogger\_\-unlock\_\-mutex(), gDataLogger\_\-Close(), and gDataLogger\_\-MatfileUpdate().



Referenced by main(), and threads\_\-linux\_\-init().




\begin{DoxyCode}
216 {
217     #if DATALOGGER_MODULE_ENABLED
218         datalogger_lock_mutex();
219         if(datalogger_initialized != DATALOGGER_INITIALIZED)
220     {
221             datalogger_unlock_mutex();
222         return DATALOGGER_ERROR_NOT_INITIALIZED;
223     }
224 
225     gDataLogger_MatfileUpdate(&gDataLogger); // Update data
226     gDataLogger_Close(&gDataLogger); // Close datalogger
227 
228     datalogger_initialized = DATALOGGER_NOT_INITIALIZED;
229     datalogger_unlock_mutex();
230 
231         #if ANU_COMPILE_FOR_XENOMAI
232     rt_mutex_delete(&datalogger_mutex);
233         #endif  //ANU_COMPILE_FOR_XENOMAI
234 
235     #endif //DATALOGGER_MODULE_ENABLED
236 
237     return DATALOGGER_SUCCESS;
238 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

\hypertarget{datalogger_8c_a29bc3190cba1f225ad3b2eed899a6762}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-file\_\-exists@{datalogger\_\-file\_\-exists}}
\index{datalogger\_\-file\_\-exists@{datalogger\_\-file\_\-exists}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-file\_\-exists}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-file\_\-exists (const char $\ast$ {\em filename})}}
\label{datalogger_8c_a29bc3190cba1f225ad3b2eed899a6762}


Definition at line 618 of file datalogger.c.



References DATALOGGER\_\-FAILURE, and DATALOGGER\_\-SUCCESS.



Referenced by datalogger\_\-init().




\begin{DoxyCode}
619 {
620     FILE *file;
621     if((file = fopen(filename, "r")))
622     {
623         fclose(file);
624         return DATALOGGER_SUCCESS;
625     }
626     return DATALOGGER_FAILURE;
627 }
\end{DoxyCode}




Here is the caller graph for this function:

\hypertarget{datalogger_8c_a1977ef253746fd8c008a3641d9822551}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-init@{datalogger\_\-init}}
\index{datalogger\_\-init@{datalogger\_\-init}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-init (void)}}
\label{datalogger_8c_a1977ef253746fd8c008a3641d9822551}


Definition at line 41 of file datalogger.c.



References DATALOGGER\_\-FAILURE, datalogger\_\-file\_\-exists(), DATALOGGER\_\-FILE\_\-NAME, DATALOGGER\_\-FOLDER, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), DATALOGGER\_\-LOG\_\-CALIBRATED\_\-IMU, DATALOGGER\_\-LOG\_\-EFFORTS, DATALOGGER\_\-LOG\_\-EXECTIMES, DATALOGGER\_\-LOG\_\-MRA, DATALOGGER\_\-LOG\_\-RAW\_\-IMU, DATALOGGER\_\-LOG\_\-TIME, datalogger\_\-mutex, DATALOGGER\_\-NOT\_\-RUNNING, datalogger\_\-running, DATALOGGER\_\-STANDARD\_\-QUEUE\_\-SIZE, DATALOGGER\_\-SUCCESS, datalogger\_\-unlock\_\-mutex(), gDataLogger\_\-DeclareVariable(), gDataLogger\_\-Init(), and gDataLogger\_\-InsertVariable().



Referenced by main(), and threads\_\-linux\_\-init().




\begin{DoxyCode}
42 {
43     #if DATALOGGER_MODULE_ENABLED
44     double enabled_variables[16][1];
45     char datalogger_filename[256];
46         #if ANU_COMPILE_FOR_XENOMAI
47     rt_mutex_create(&datalogger_mutex,"Data Logger Mutex");
48         #endif
49     datalogger_lock_mutex();
50 
51     if(datalogger_initialized == DATALOGGER_INITIALIZED)
52     {
53         datalogger_unlock_mutex();
54         return DATALOGGER_FAILURE;
55     }
56 
57     datalogger_running = DATALOGGER_NOT_RUNNING;
58 
59         // Init datalogger
60     strcpy(datalogger_filename, DATALOGGER_FOLDER);
61     strcat(datalogger_filename, "/");
62     strcat(datalogger_filename, DATALOGGER_FILE_NAME);
63     strcat(datalogger_filename, ".mat");
64         #if DATALOGGER_ENABLE_NEW_FILE_ENNUMERATION
65     char datalogger_tmp[256];
66     int i = 0;
67     if(datalogger_file_exists(datalogger_filename) == DATALOGGER_SUCCESS) // File
       exists
68     {
69         strcpy(datalogger_tmp, DATALOGGER_FOLDER);
70         strcat(datalogger_tmp, "/");
71         strcat(datalogger_tmp, DATALOGGER_FILE_NAME);
72         strcat(datalogger_tmp, "_%d.mat");
73         do
74         {
75             sprintf(datalogger_filename, datalogger_tmp, ++i);
76         }
77         while((datalogger_file_exists(datalogger_filename) == DATALOGGER_SUCCESS)
       && (i<100));
78         if(i == 100)
79         {
80             datalogger_unlock_mutex();
81             return DATALOGGER_FAILURE;
82         }
83     }
84         #endif //DATALOGGER_ENABLE_NEW_FILE_ENNUMERATION
85 
86     if(!gDataLogger_Init(&gDataLogger, datalogger_filename, NULL))
87     {
88         datalogger_unlock_mutex();
89         return DATALOGGER_FAILURE;
90     }
91 
92         // Declare variables
93         // Arguments for gDataLogger_DeclareVariable:
94         // datalogger pointer, variable name, units, number of rows, number of co
      lumns, queue size
95 
96         // Variable that tells MATLAB which variables are enabled
97     enabled_variables[0][0] = (double) DATALOGGER_LOG_TIME;
98     enabled_variables[1][0] = (double) DATALOGGER_LOG_EXECTIMES;
99     enabled_variables[2][0] = (double) DATALOGGER_LOG_RAW_IMU;
100     enabled_variables[3][0] = (double) DATALOGGER_LOG_CALIBRATED_IMU;
101     enabled_variables[4][0] = (double) DATALOGGER_LOG_EFFORTS;
102     enabled_variables[5][0] = (double) DATALOGGER_LOG_MRA;
103     //enabled_variables[12][0] = (double) DATALOGGER_LOG_LOCAL_COORDINATE_SYSTEM;
      
104     //enabled_variables[13][0] = (double) DATALOGGER_LOG_LOCAL_FIELDS;
105     //enabled_variables[14][0] = (double) DATALOGGER_LOG_ESTIMATOR;
106     //enabled_variables[15][0] = (double) DATALOGGER_LOG_CONTROLLERS;
107 
108     gDataLogger_DeclareVariable(&gDataLogger, "enabled_vars", "", 6, 1, 1);
109     gDataLogger_InsertVariable(&gDataLogger, "enabled_vars", &enabled_variables[0
      ][0]);
110 
111         #if DATALOGGER_LOG_TIME
112         gDataLogger_DeclareVariable(&gDataLogger, "t", "s", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
113     gDataLogger_DeclareVariable(&gDataLogger, "Ts", "s", 1, 1, 1);
114     #endif // DATALOGGER_LOG_TIME
115 
116     #if DATALOGGER_LOG_EXECTIMES
117     gDataLogger_DeclareVariable(&gDataLogger, "t_control_exec", "s", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
118     gDataLogger_DeclareVariable(&gDataLogger, "t_ui_exec", "s", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
119     #endif // DATALOGGER_LOG_EXECTIMES
120 
121         #if DATALOGGER_LOG_RAW_IMU
122         gDataLogger_DeclareVariable(&gDataLogger, "imu_accelerometer_x_raw", "raw
      ", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
123         gDataLogger_DeclareVariable(&gDataLogger, "imu_accelerometer_y_raw", "raw
      ", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
124         gDataLogger_DeclareVariable(&gDataLogger, "imu_accelerometer_z_raw", "raw
      ", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
125         gDataLogger_DeclareVariable(&gDataLogger, "imu_magnetometer_x_raw", "raw"
      , 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
126         gDataLogger_DeclareVariable(&gDataLogger, "imu_magnetometer_y_raw", "raw"
      , 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
127         gDataLogger_DeclareVariable(&gDataLogger, "imu_magnetometer_z_raw", "raw"
      , 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
128         gDataLogger_DeclareVariable(&gDataLogger, "imu_gyrometer_x_raw", "raw", 1
      , 1, DATALOGGER_STANDARD_QUEUE_SIZE);
129         gDataLogger_DeclareVariable(&gDataLogger, "imu_gyrometer_y_raw", "raw", 1
      , 1, DATALOGGER_STANDARD_QUEUE_SIZE);
130         gDataLogger_DeclareVariable(&gDataLogger, "imu_gyrometer_z_raw", "raw", 1
      , 1, DATALOGGER_STANDARD_QUEUE_SIZE);
131     gDataLogger_DeclareVariable(&gDataLogger, "imu_valid_data", "", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
132         #endif // DATALOGGER_LOG_IMU
133         
134     #if DATALOGGER_LOG_EFFORTS
135     gDataLogger_DeclareVariable(&gDataLogger, "Vin0", "mV", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
136     gDataLogger_DeclareVariable(&gDataLogger, "Vin0_valid_data", "", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
137     #endif
138     
139     #if DATALOGGER_LOG_MRA
140     gDataLogger_DeclareVariable(&gDataLogger, "v_ctl", "mV", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
141     gDataLogger_DeclareVariable(&gDataLogger, "v_ctl_read", "mV", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
142     #endif
143 
144     #if DATALOGGER_LOG_CALIBRATED_IMU
145     gDataLogger_DeclareVariable(&gDataLogger, "imu_accelerometer_x_g", "g", 1, 1,
       DATALOGGER_STANDARD_QUEUE_SIZE);
146     gDataLogger_DeclareVariable(&gDataLogger, "imu_accelerometer_y_g", "g", 1, 1,
       DATALOGGER_STANDARD_QUEUE_SIZE);
147     gDataLogger_DeclareVariable(&gDataLogger, "imu_accelerometer_z_g", "g", 1, 1,
       DATALOGGER_STANDARD_QUEUE_SIZE);
148     gDataLogger_DeclareVariable(&gDataLogger, "imu_magnetometer_x_B", "B", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
149     gDataLogger_DeclareVariable(&gDataLogger, "imu_magnetometer_y_B", "B", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
150     gDataLogger_DeclareVariable(&gDataLogger, "imu_magnetometer_z_B", "B", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
151     gDataLogger_DeclareVariable(&gDataLogger, "imu_gyrometer_x_rads", "rads", 1, 
      1, DATALOGGER_STANDARD_QUEUE_SIZE);
152     gDataLogger_DeclareVariable(&gDataLogger, "imu_gyrometer_y_rads", "rads", 1, 
      1, DATALOGGER_STANDARD_QUEUE_SIZE);
153     gDataLogger_DeclareVariable(&gDataLogger, "imu_gyrometer_z_rads", "rads", 1, 
      1, DATALOGGER_STANDARD_QUEUE_SIZE);
154     gDataLogger_DeclareVariable(&gDataLogger, "imu_calibrated_valid_data", "", 1,
       1, DATALOGGER_STANDARD_QUEUE_SIZE);
155     //gDataLogger_DeclareVariable(&gDataLogger, "imu_calibrated_valid_acceleromet
      er_data", "", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
156     //gDataLogger_DeclareVariable(&gDataLogger, "imu_calibrated_valid_gyrometer_d
      ata", "", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
157     //gDataLogger_DeclareVariable(&gDataLogger, "imu_calibrated_valid_magnetomete
      r_data", "", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
158     #endif // DATALOGGER_LOG_CALIBRATED_IMU
159 
160 
161 /*
162     #if DATALOGGER_LOG_LOCAL_COORDINATE_SYSTEM
163     gDataLogger_DeclareVariable(&gDataLogger, "initial_altitude", "m", 1, 1, 1);
164     gDataLogger_DeclareVariable(&gDataLogger, "initial_latitude", "radians", 1, 1
      , 1);
165     gDataLogger_DeclareVariable(&gDataLogger, "initial_longitude", "radians", 1, 
      1, 1);
166     gDataLogger_DeclareVariable(&gDataLogger, "initial_ecef_x", "m", 1, 1, 1);
167     gDataLogger_DeclareVariable(&gDataLogger, "initial_ecef_y", "m", 1, 1, 1);
168     gDataLogger_DeclareVariable(&gDataLogger, "initial_ecef_z", "m", 1, 1, 1);
169     gDataLogger_DeclareVariable(&gDataLogger, "rotation_matrix", "matrix", 3, 3, 
      1);
170     #endif // DATALOGGER_LOG_LOCAL_COORDINATE_SYSTEM
171 
172     #if DATALOGGER_LOG_LOCAL_FIELDS
173     gDataLogger_DeclareVariable(&gDataLogger, "local_magnetic", "field", 3, 1, 1)
      ;
174     gDataLogger_DeclareVariable(&gDataLogger, "local_gravity", "field", 3, 1, 1);
      
175     gDataLogger_DeclareVariable(&gDataLogger, "magnetic_magnitude", "uT", 1, 1, 1
      );
176     gDataLogger_DeclareVariable(&gDataLogger, "gravity_magnitude", "ms2", 1, 1, 1
      );
177     #endif // DATALOGGER_LOG_LOCAL_FIELDS
178 
179     #if DATALOGGER_LOG_ESTIMATOR
180     gDataLogger_DeclareVariable(&gDataLogger, "estimated_roll_angle_radians", "ra
      dians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
181     gDataLogger_DeclareVariable(&gDataLogger, "estimated_pitch_angle_radians", "r
      adians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
182     gDataLogger_DeclareVariable(&gDataLogger, "estimated_yaw_angle_radians", "rad
      ians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
183     gDataLogger_DeclareVariable(&gDataLogger, "estimated_q0", "quaternion", 1, 1,
       DATALOGGER_STANDARD_QUEUE_SIZE);
184     gDataLogger_DeclareVariable(&gDataLogger, "estimated_q1", "quaternion", 1, 1,
       DATALOGGER_STANDARD_QUEUE_SIZE);
185     gDataLogger_DeclareVariable(&gDataLogger, "estimated_q2", "quaternion", 1, 1,
       DATALOGGER_STANDARD_QUEUE_SIZE);
186     gDataLogger_DeclareVariable(&gDataLogger, "estimated_q3", "quaternion", 1, 1,
       DATALOGGER_STANDARD_QUEUE_SIZE);
187     gDataLogger_DeclareVariable(&gDataLogger, "estimated_x_position_meters", "met
      ers", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
188     gDataLogger_DeclareVariable(&gDataLogger, "estimated_y_position_meters", "met
      ers", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
189     gDataLogger_DeclareVariable(&gDataLogger, "estimated_z_position_meters", "met
      ers", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
190     gDataLogger_DeclareVariable(&gDataLogger, "estimated_x_velocity_meters_second
      ", "meters", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
191     gDataLogger_DeclareVariable(&gDataLogger, "estimated_y_velocity_meters_second
      ", "meters", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
192     gDataLogger_DeclareVariable(&gDataLogger, "estimated_z_velocity_meters_second
      ", "meters", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
193     #endif // DATALOGGER_LOG_ESTIMATOR
194 
195     #if DATALOGGER_LOG_CONTROLLERS
196     gDataLogger_DeclareVariable(&gDataLogger, "control_roll_angle_trim_radians", 
      "radians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
197     gDataLogger_DeclareVariable(&gDataLogger, "control_pitch_angle_trim_radians",
       "radians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
198     gDataLogger_DeclareVariable(&gDataLogger, "control_yaw_angle_trim_radians", "
      radians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
199     gDataLogger_DeclareVariable(&gDataLogger, "control_left_aileron_trim", "us", 
      1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
200     gDataLogger_DeclareVariable(&gDataLogger, "control_right_aileron_trim", "us",
       1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
201     gDataLogger_DeclareVariable(&gDataLogger, "control_elevator_trim", "us", 1, 1
      , DATALOGGER_STANDARD_QUEUE_SIZE);
202     gDataLogger_DeclareVariable(&gDataLogger, "control_rudder_trim", "us", 1, 1, 
      DATALOGGER_STANDARD_QUEUE_SIZE);
203     gDataLogger_DeclareVariable(&gDataLogger, "control_roll_angle_reference_radia
      ns", "radians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
204     gDataLogger_DeclareVariable(&gDataLogger, "control_pitch_angle_reference_radi
      ans", "radians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
205     gDataLogger_DeclareVariable(&gDataLogger, "control_yaw_angle_reference_radian
      s", "radians", 1, 1, DATALOGGER_STANDARD_QUEUE_SIZE);
206     #endif // DATALOGGER_LOG_CONTROLLERS
207 */
208     datalogger_initialized = DATALOGGER_INITIALIZED;
209     datalogger_unlock_mutex();
210     #endif //DATALOGGER_MODULE_ENABLED
211 
212     return DATALOGGER_SUCCESS;
213 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

\hypertarget{datalogger_8c_a54b06d9395b2e370a5a72beb7f9524b2}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-lock\_\-mutex@{datalogger\_\-lock\_\-mutex}}
\index{datalogger\_\-lock\_\-mutex@{datalogger\_\-lock\_\-mutex}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-lock\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-lock\_\-mutex (void)}}
\label{datalogger_8c_a54b06d9395b2e370a5a72beb7f9524b2}


Definition at line 629 of file datalogger.c.



References datalogger\_\-mutex, and DATALOGGER\_\-SUCCESS.



Referenced by datalogger\_\-close(), datalogger\_\-init(), datalogger\_\-set\_\-Ts(), datalogger\_\-start(), datalogger\_\-status(), datalogger\_\-stop(), datalogger\_\-update(), datalogger\_\-update\_\-IPC(), and datalogger\_\-write\_\-file().




\begin{DoxyCode}
630 {
631         #if ANU_COMPILE_FOR_XENOMAI
632         rt_mutex_acquire(&datalogger_mutex,TM_INFINITE);
633         #else
634         pthread_mutex_lock(&datalogger_mutex);
635         #endif
636         return DATALOGGER_SUCCESS;
637 }
\end{DoxyCode}




Here is the caller graph for this function:

\hypertarget{datalogger_8c_afb69d166f8d53042825174cee225ea49}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-set\_\-Ts@{datalogger\_\-set\_\-Ts}}
\index{datalogger\_\-set\_\-Ts@{datalogger\_\-set\_\-Ts}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-set\_\-Ts}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-set\_\-Ts (double {\em Ts})}}
\label{datalogger_8c_afb69d166f8d53042825174cee225ea49}


Definition at line 540 of file datalogger.c.



References DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), DATALOGGER\_\-SUCCESS, datalogger\_\-unlock\_\-mutex(), DATALOGGER\_\-VARIABLE\_\-INSERTED, DATALOGGER\_\-VARIABLE\_\-NOT\_\-INSERTED, DATALOGGER\_\-VARIBALE\_\-ALREADY\_\-INSERTED, and gDataLogger\_\-InsertVariable().



Referenced by periodic\_\-task\_\-1(), and threads\_\-linux\_\-periodic\_\-task\_\-1().




\begin{DoxyCode}
541 {
542     static int datalogger_Ts_inserted = DATALOGGER_VARIABLE_NOT_INSERTED;
543 
544     datalogger_lock_mutex();
545 
546     if(datalogger_initialized != DATALOGGER_INITIALIZED)
547     {
548         datalogger_unlock_mutex();
549         return DATALOGGER_ERROR_NOT_INITIALIZED;
550     }
551 
552     #if DATALOGGER_LOG_TIME
553     if(datalogger_Ts_inserted == DATALOGGER_VARIABLE_NOT_INSERTED)
554     {
555         datalogger_Ts_inserted = DATALOGGER_VARIABLE_INSERTED;
556         gDataLogger_InsertVariable(&gDataLogger, "Ts", &Ts);
557     }
558     else
559         {
560         datalogger_unlock_mutex();
561         return DATALOGGER_VARIBALE_ALREADY_INSERTED;
562         }
563     #else
564     double tmp = Ts; // Remove warning
565     #endif // DATALOGGER_LOG_TIME
566 
567     datalogger_unlock_mutex();
568     return DATALOGGER_SUCCESS;
569 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

\hypertarget{datalogger_8c_a1f254ef380d595d6605c10811fd0dee6}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-start@{datalogger\_\-start}}
\index{datalogger\_\-start@{datalogger\_\-start}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-start}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-start (void)}}
\label{datalogger_8c_a1f254ef380d595d6605c10811fd0dee6}


Definition at line 584 of file datalogger.c.



References DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), DATALOGGER\_\-RUNNING, datalogger\_\-running, DATALOGGER\_\-SUCCESS, and datalogger\_\-unlock\_\-mutex().




\begin{DoxyCode}
585 {
586     #if DATALOGGER_MODULE_ENABLED
587     datalogger_lock_mutex();
588     if(datalogger_initialized != DATALOGGER_INITIALIZED)
589     {
590         datalogger_unlock_mutex();
591         return DATALOGGER_ERROR_NOT_INITIALIZED;
592     }
593 
594     datalogger_running = DATALOGGER_RUNNING;
595     datalogger_unlock_mutex();
596     #endif
597 
598     return DATALOGGER_SUCCESS;
599 }
\end{DoxyCode}




Here is the call graph for this function:

\hypertarget{datalogger_8c_a46fd1290d9ee97d5fc7171e1e0dcb0aa}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-status@{datalogger\_\-status}}
\index{datalogger\_\-status@{datalogger\_\-status}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-status (void)}}
\label{datalogger_8c_a46fd1290d9ee97d5fc7171e1e0dcb0aa}


Definition at line 571 of file datalogger.c.



References DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), datalogger\_\-running, and datalogger\_\-unlock\_\-mutex().



Referenced by main(), periodic\_\-task\_\-1(), threads\_\-linux\_\-init(), and threads\_\-linux\_\-periodic\_\-task\_\-1().




\begin{DoxyCode}
572 {
573     datalogger_lock_mutex();
574     if(datalogger_initialized != DATALOGGER_INITIALIZED)
575     {
576         datalogger_unlock_mutex();
577         return DATALOGGER_ERROR_NOT_INITIALIZED;
578     }
579 
580     datalogger_unlock_mutex();
581     return datalogger_running;
582 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

\hypertarget{datalogger_8c_aae2ffbc6cbf8f1cfecceb42c5139530a}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-stop@{datalogger\_\-stop}}
\index{datalogger\_\-stop@{datalogger\_\-stop}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-stop}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-stop (void)}}
\label{datalogger_8c_aae2ffbc6cbf8f1cfecceb42c5139530a}


Definition at line 601 of file datalogger.c.



References DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), DATALOGGER\_\-NOT\_\-RUNNING, datalogger\_\-running, DATALOGGER\_\-SUCCESS, and datalogger\_\-unlock\_\-mutex().



Referenced by main().




\begin{DoxyCode}
602 {
603     #if DATALOGGER_MODULE_ENABLED
604     datalogger_lock_mutex();
605     if(datalogger_initialized != DATALOGGER_INITIALIZED)
606     {
607         datalogger_unlock_mutex();
608         return DATALOGGER_ERROR_NOT_INITIALIZED;
609     }
610 
611     datalogger_running = DATALOGGER_NOT_RUNNING;
612     datalogger_unlock_mutex();
613     #endif
614 
615     return DATALOGGER_SUCCESS;
616 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

\hypertarget{datalogger_8c_a85453211c0c809083c36cc56b275aeeb}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-unlock\_\-mutex@{datalogger\_\-unlock\_\-mutex}}
\index{datalogger\_\-unlock\_\-mutex@{datalogger\_\-unlock\_\-mutex}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-unlock\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-unlock\_\-mutex (void)}}
\label{datalogger_8c_a85453211c0c809083c36cc56b275aeeb}


Definition at line 639 of file datalogger.c.



References datalogger\_\-mutex, and DATALOGGER\_\-SUCCESS.



Referenced by datalogger\_\-close(), datalogger\_\-init(), datalogger\_\-set\_\-Ts(), datalogger\_\-start(), datalogger\_\-status(), datalogger\_\-stop(), datalogger\_\-update(), datalogger\_\-update\_\-IPC(), and datalogger\_\-write\_\-file().




\begin{DoxyCode}
640 {
641         #if ANU_COMPILE_FOR_XENOMAI
642         rt_mutex_release(&datalogger_mutex);
643         #else
644         pthread_mutex_unlock(&datalogger_mutex);
645         #endif
646         return DATALOGGER_SUCCESS;
647 }
\end{DoxyCode}




Here is the caller graph for this function:

\hypertarget{datalogger_8c_ad89a56e2f057ace8c28d78eb67703e7d}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-update@{datalogger\_\-update}}
\index{datalogger\_\-update@{datalogger\_\-update}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-update}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-update (double {\em t\_\-s}, \/  double {\em t\_\-control\_\-exec\_\-s}, \/  double {\em t\_\-ui\_\-exec\_\-s}, \/  double {\em t0\_\-s}, \/  {\bf IMU\_\-DATA\_\-STRUCT} $\ast$ {\em pimu\_\-data}, \/  {\bf EFF\_\-DATA\_\-STRUCT} $\ast$ {\em peff\_\-data}, \/  {\bf MRA\_\-DATA\_\-STRUCT} $\ast$ {\em pmra\_\-data})}}
\label{datalogger_8c_ad89a56e2f057ace8c28d78eb67703e7d}


Definition at line 272 of file datalogger.c.



References IMU\_\-DATA\_\-STRUCT::calibrated::acc, IMU\_\-DATA\_\-STRUCT::acc, IMU\_\-DATA\_\-STRUCT::calib, DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), DATALOGGER\_\-SUCCESS, datalogger\_\-unlock\_\-mutex(), EFF\_\-DATA\_\-STRUCT::F, gDataLogger\_\-InsertVariable(), IMU\_\-DATA\_\-STRUCT::calibrated::gyr, IMU\_\-DATA\_\-STRUCT::gyr, IMU\_\-DATA\_\-STRUCT::calibrated::mag, IMU\_\-DATA\_\-STRUCT::mag, EFF\_\-DATA\_\-STRUCT::new\_\-data, IMU\_\-DATA\_\-STRUCT::new\_\-data, MRA\_\-DATA\_\-STRUCT::v\_\-ctl, MRA\_\-DATA\_\-STRUCT::v\_\-ctl\_\-read, DATA\_\-XYZ\_\-DOUBLE::x, DATA\_\-XYZ::x, DATA\_\-XYZ\_\-DOUBLE::y, DATA\_\-XYZ::y, DATA\_\-XYZ\_\-DOUBLE::z, and DATA\_\-XYZ::z.



Referenced by periodic\_\-task\_\-1(), and threads\_\-linux\_\-periodic\_\-task\_\-1().




\begin{DoxyCode}
273 {
274     double tmp = 0.0;
275 
276     datalogger_lock_mutex();
277 
278     if(datalogger_initialized != DATALOGGER_INITIALIZED)
279     {
280         datalogger_unlock_mutex();
281         return DATALOGGER_ERROR_NOT_INITIALIZED;
282     }
283 
284     #if DATALOGGER_LOG_TIME
285     double tmp_t = t_s - t0_s;
286     gDataLogger_InsertVariable(&gDataLogger, "t", &tmp_t);
287     #else
288     double tmp_t = 0.0;
289     tmp_t = t_s; // Remove warning
290     #endif // DATALOGGER_LOG_TIME
291 
292     #if DATALOGGER_LOG_EXECTIMES
293     gDataLogger_InsertVariable(&gDataLogger, "t_control_exec", &t_control_exec_s)
      ;
294     gDataLogger_InsertVariable(&gDataLogger, "t_ui_exec", &t_ui_exec_s);
295     #else
296     double tmp_e = 0.0; // Remove warning
297     tmp_e = t_control_exec_s; // Remove warning
298     tmp_e = t_ui_exec_s; // Remove warning
299     #endif // DATALOGGER_LOG_EXECTIMES
300 
301 
302     #if DATALOGGER_LOG_RAW_IMU
303     tmp = (double) pimu_data->acc.x;
304     gDataLogger_InsertVariable(&gDataLogger, "imu_accelerometer_x_raw", &tmp);
305     tmp = (double) pimu_data->acc.y;
306     gDataLogger_InsertVariable(&gDataLogger, "imu_accelerometer_y_raw", &tmp);
307     tmp = (double) pimu_data->acc.z;
308     gDataLogger_InsertVariable(&gDataLogger, "imu_accelerometer_z_raw", &tmp);
309     tmp = (double) pimu_data->mag.x;
310     gDataLogger_InsertVariable(&gDataLogger, "imu_magnetometer_x_raw", &tmp);
311     tmp = (double) pimu_data->mag.y;
312     gDataLogger_InsertVariable(&gDataLogger, "imu_magnetometer_y_raw", &tmp);
313     tmp = (double) pimu_data->mag.z;
314     gDataLogger_InsertVariable(&gDataLogger, "imu_magnetometer_z_raw", &tmp);
315     tmp = (double) pimu_data->gyr.x;
316     gDataLogger_InsertVariable(&gDataLogger, "imu_gyrometer_x_raw", &tmp);
317     tmp = (double) pimu_data->gyr.y;
318     gDataLogger_InsertVariable(&gDataLogger, "imu_gyrometer_y_raw", &tmp);
319     tmp = (double) pimu_data->gyr.z;
320     gDataLogger_InsertVariable(&gDataLogger, "imu_gyrometer_z_raw", &tmp);
321     tmp = (double) pimu_data->new_data;
322     gDataLogger_InsertVariable(&gDataLogger, "imu_valid_data", &tmp);
323     #else
324     double tmp_ri = 0; // Remove warning
325     tmp_ri = pimu_data->new_data; // Remove warning ???
326     #endif //DATALOGGER_LOG_RAW_IMU
327     
328     #if DATALOGGER_LOG_EFFORTS
329     tmp = (double) peff_data->F.x;
330     gDataLogger_InsertVariable(&gDataLogger, "Vin0", &tmp);
331     tmp = (double) peff_data->new_data;
332     gDataLogger_InsertVariable(&gDataLogger, "Vin0_valid_data", &tmp);
333     #endif
334     
335     #if DATALOGGER_LOG_MRA
336     tmp = (double) pmra_data->v_ctl;
337     gDataLogger_InsertVariable(&gDataLogger, "v_ctl", &tmp);
338     tmp = (double) pmra_data->v_ctl_read;
339     gDataLogger_InsertVariable(&gDataLogger, "v_ctl_read", &tmp);
340     #endif
341     
342     
343        
344     #if DATALOGGER_LOG_CALIBRATED_IMU
345     gDataLogger_InsertVariable(&gDataLogger, "imu_accelerometer_x_g", &(pimu_data
      ->calib.acc.x));
346     gDataLogger_InsertVariable(&gDataLogger, "imu_accelerometer_y_g", &(pimu_data
      ->calib.acc.y));
347     gDataLogger_InsertVariable(&gDataLogger, "imu_accelerometer_z_g", &(pimu_data
      ->calib.acc.z));
348     gDataLogger_InsertVariable(&gDataLogger, "imu_magnetometer_x_B", &(pimu_data-
      >calib.mag.x));
349     gDataLogger_InsertVariable(&gDataLogger, "imu_magnetometer_y_B", &(pimu_data-
      >calib.mag.y));
350     gDataLogger_InsertVariable(&gDataLogger, "imu_magnetometer_z_B", &(pimu_data-
      >calib.mag.z));
351     gDataLogger_InsertVariable(&gDataLogger, "imu_gyrometer_x_rads", &(pimu_data-
      >calib.gyr.x));
352     gDataLogger_InsertVariable(&gDataLogger, "imu_gyrometer_y_rads", &(pimu_data-
      >calib.gyr.y));
353     gDataLogger_InsertVariable(&gDataLogger, "imu_gyrometer_z_rads", &(pimu_data-
      >calib.gyr.z));
354     tmp = (double) pimu_data->new_data;
355     gDataLogger_InsertVariable(&gDataLogger, "imu_calibrated_valid_data", &tmp);
356     //tmp = pimu_measure->FlagValidAccerometerMeasure;
357     //gDataLogger_InsertVariable(&gDataLogger, "imu_calibrated_valid_acceleromete
      r_data", &tmp);
358     //tmp = pimu_measure->FlagValidGyrometerMeasure;
359     //gDataLogger_InsertVariable(&gDataLogger, "imu_calibrated_valid_gyrometer_da
      ta", &tmp);
360     //tmp = pmagnetometer_measure->FlagValidMeasure;
361     //gDataLogger_InsertVariable(&gDataLogger, "imu_calibrated_valid_magnetometer
      _data", &tmp);
362     #else
363     double tmp_ci = 0.0;
364     tmp_ci = pimu_measure->ax; // Remove warning
365     tmp_ci = pmagnetometer_measure->mx; // Remove warning
366     #endif // DATALOGGER_LOG_CALIBRATED_IMU
367 
368  /*
369     #if DATALOGGER_LOG_ESTIMATOR
370     gDataLogger_InsertVariable(&gDataLogger, "estimated_roll_angle_radians", &(pe
      stimation_data->roll_angle_radians));
371     gDataLogger_InsertVariable(&gDataLogger, "estimated_pitch_angle_radians", &(p
      estimation_data->pitch_angle_radians));
372     gDataLogger_InsertVariable(&gDataLogger, "estimated_yaw_angle_radians", &(pes
      timation_data->yaw_angle_radians));
373     gDataLogger_InsertVariable(&gDataLogger, "estimated_q0", &(pestimation_data->
      q0));
374     gDataLogger_InsertVariable(&gDataLogger, "estimated_q1", &(pestimation_data->
      q1));
375     gDataLogger_InsertVariable(&gDataLogger, "estimated_q2", &(pestimation_data->
      q2));
376     gDataLogger_InsertVariable(&gDataLogger, "estimated_q3", &(pestimation_data->
      q3));
377     gDataLogger_InsertVariable(&gDataLogger, "estimated_x_position_meters", &(pes
      timation_data->x_position_meters));
378     gDataLogger_InsertVariable(&gDataLogger, "estimated_y_position_meters", &(pes
      timation_data->y_position_meters));
379     gDataLogger_InsertVariable(&gDataLogger, "estimated_z_position_meters", &(pes
      timation_data->z_position_meters));
380     gDataLogger_InsertVariable(&gDataLogger, "estimated_x_velocity_meters_second"
      , &(pestimation_data->x_velocity_meters_second));
381     gDataLogger_InsertVariable(&gDataLogger, "estimated_y_velocity_meters_second"
      , &(pestimation_data->y_velocity_meters_second));
382     gDataLogger_InsertVariable(&gDataLogger, "estimated_z_velocity_meters_second"
      , &(pestimation_data->z_velocity_meters_second));
383         #else
384     double tmp_est = 0.0;
385         tmp_est = pestimation_data->roll_angle_radians; // Remove warning
386     #endif // DATALOGGER_LOG_ESTIMATOR
387 
388     #if DATALOGGER_LOG_CONTROLLERS
389         gDataLogger_InsertVariable(&gDataLogger, "control_roll_angle_trim_radians
      ", &(pcontrol_data->roll_angle_trim_radians));
390         gDataLogger_InsertVariable(&gDataLogger, "control_pitch_angle_trim_radian
      s", &(pcontrol_data->pitch_angle_trim_radians));
391         gDataLogger_InsertVariable(&gDataLogger, "control_yaw_angle_trim_radians"
      , &(pcontrol_data->yaw_angle_trim_radians));
392         gDataLogger_InsertVariable(&gDataLogger, "control_left_aileron_trim", &(p
      control_data->left_aileron_trim));
393         gDataLogger_InsertVariable(&gDataLogger, "control_right_aileron_trim", &(
      pcontrol_data->right_aileron_trim));
394         gDataLogger_InsertVariable(&gDataLogger, "control_elevator_trim", &(pcont
      rol_data->elevator_trim));
395         gDataLogger_InsertVariable(&gDataLogger, "control_rudder_trim", &(pcontro
      l_data->rudder_trim));
396         gDataLogger_InsertVariable(&gDataLogger, "control_roll_angle_reference_ra
      dians", &(pcontrol_data->roll_angle_reference_radians));
397         gDataLogger_InsertVariable(&gDataLogger, "control_pitch_angle_reference_r
      adians", &(pcontrol_data->pitch_angle_reference_radians));
398         gDataLogger_InsertVariable(&gDataLogger, "control_yaw_angle_reference_rad
      ians", &(pcontrol_data->yaw_angle_reference_radians));
399     #else
400     double tmp_control = 0.0;
401     tmp_control = pcontrol_data->roll_angle_trim_radians;
402     #endif // DATALOGGER_LOG_CONTROLLERS
403 */
404     datalogger_unlock_mutex();
405 
406     return DATALOGGER_SUCCESS;
407 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

\hypertarget{datalogger_8c_a25bb814a0877f419ae09b08cd7e91ee9}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-update\_\-IPC@{datalogger\_\-update\_\-IPC}}
\index{datalogger\_\-update\_\-IPC@{datalogger\_\-update\_\-IPC}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-update\_\-IPC}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-update\_\-IPC (void)}}
\label{datalogger_8c_a25bb814a0877f419ae09b08cd7e91ee9}


Definition at line 256 of file datalogger.c.



References DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), DATALOGGER\_\-SUCCESS, datalogger\_\-unlock\_\-mutex(), and gDataLogger\_\-IPCUpdate().



Referenced by threads\_\-linux\_\-init().




\begin{DoxyCode}
257 {
258     #if DATALOGGER_MODULE_ENABLED
259     datalogger_lock_mutex();
260     if(datalogger_initialized != DATALOGGER_INITIALIZED)
261     {
262         datalogger_unlock_mutex();
263         return DATALOGGER_ERROR_NOT_INITIALIZED;
264     }
265 
266     gDataLogger_IPCUpdate(&gDataLogger); // Manages IPC
267     datalogger_unlock_mutex();
268     #endif
269     return DATALOGGER_SUCCESS;
270 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:

\hypertarget{datalogger_8c_a2aedecfce53e1935a41615ceaf378013}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-write\_\-file@{datalogger\_\-write\_\-file}}
\index{datalogger\_\-write\_\-file@{datalogger\_\-write\_\-file}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-write\_\-file}]{\setlength{\rightskip}{0pt plus 5cm}int datalogger\_\-write\_\-file (void)}}
\label{datalogger_8c_a2aedecfce53e1935a41615ceaf378013}


Definition at line 240 of file datalogger.c.



References DATALOGGER\_\-ERROR\_\-NOT\_\-INITIALIZED, DATALOGGER\_\-INITIALIZED, datalogger\_\-initialized, datalogger\_\-lock\_\-mutex(), DATALOGGER\_\-SUCCESS, datalogger\_\-unlock\_\-mutex(), and gDataLogger\_\-MatfileUpdate().



Referenced by main(), and threads\_\-linux\_\-init().




\begin{DoxyCode}
241 {
242     #if DATALOGGER_MODULE_ENABLED
243     datalogger_lock_mutex();
244     if(datalogger_initialized != DATALOGGER_INITIALIZED)
245     {
246         datalogger_unlock_mutex();
247         return DATALOGGER_ERROR_NOT_INITIALIZED;
248     }
249     gDataLogger_MatfileUpdate(&gDataLogger); // Empty buffers in the file
250     datalogger_unlock_mutex();
251     #endif
252 
253     return DATALOGGER_SUCCESS;
254 }
\end{DoxyCode}




Here is the call graph for this function:



Here is the caller graph for this function:



\subsection{Variable Documentation}
\hypertarget{datalogger_8c_a35e8fbe04b90452afdc3c1be16ff6187}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-initialized@{datalogger\_\-initialized}}
\index{datalogger\_\-initialized@{datalogger\_\-initialized}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-initialized}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int {\bf datalogger\_\-initialized} = DATALOGGER\_\-NOT\_\-INITIALIZED}}
\label{datalogger_8c_a35e8fbe04b90452afdc3c1be16ff6187}


Definition at line 29 of file datalogger.c.



Referenced by datalogger\_\-close(), datalogger\_\-init(), datalogger\_\-set\_\-Ts(), datalogger\_\-start(), datalogger\_\-status(), datalogger\_\-stop(), datalogger\_\-update(), datalogger\_\-update\_\-IPC(), and datalogger\_\-write\_\-file().

\hypertarget{datalogger_8c_a824d6f7fd1d3898ba0b1100ba37875c6}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-mutex@{datalogger\_\-mutex}}
\index{datalogger\_\-mutex@{datalogger\_\-mutex}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\_\-mutex\_\-t {\bf datalogger\_\-mutex} = PTHREAD\_\-MUTEX\_\-INITIALIZER}}
\label{datalogger_8c_a824d6f7fd1d3898ba0b1100ba37875c6}


Definition at line 34 of file datalogger.c.



Referenced by datalogger\_\-close(), datalogger\_\-init(), datalogger\_\-lock\_\-mutex(), and datalogger\_\-unlock\_\-mutex().

\hypertarget{datalogger_8c_a185c3ede96449d14f330fe5ac664e799}{
\index{datalogger.c@{datalogger.c}!datalogger\_\-running@{datalogger\_\-running}}
\index{datalogger\_\-running@{datalogger\_\-running}!datalogger.c@{datalogger.c}}
\subsubsection[{datalogger\_\-running}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int {\bf datalogger\_\-running} = DATALOGGER\_\-NOT\_\-RUNNING}}
\label{datalogger_8c_a185c3ede96449d14f330fe5ac664e799}


Definition at line 30 of file datalogger.c.



Referenced by datalogger\_\-init(), datalogger\_\-start(), datalogger\_\-status(), and datalogger\_\-stop().

\hypertarget{datalogger_8c_abe3b9c2c4e21e79c7b046b5986d13acc}{
\index{datalogger.c@{datalogger.c}!gDataLogger@{gDataLogger}}
\index{gDataLogger@{gDataLogger}!datalogger.c@{datalogger.c}}
\subsubsection[{gDataLogger}]{\setlength{\rightskip}{0pt plus 5cm}{\bf GDATALOGGER} {\bf gDataLogger}}}
\label{datalogger_8c_abe3b9c2c4e21e79c7b046b5986d13acc}


Definition at line 28 of file datalogger.c.

