\hypertarget{main2_8h}{\section{main2.\-h File Reference}
\label{main2_8h}\index{main2.\-h@{main2.\-h}}
}
This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=180pt]{main2_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{main2_8h_aa90cac659d18e8ef6294c7ae337f6b58}{S\-U\-C\-C\-E\-S\-S}~1
\item 
\#define \hyperlink{main2_8h_a6d58f9ac447476b4e084d7ca383f5183}{F\-A\-I\-L\-U\-R\-E}~-\/1
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{main2_8h_a840291bc02cba5474a4cb46a9b9566fe}{main} (void)
\item 
int \hyperlink{main2_8h_a26855b7739897854265d51aa61329390}{periodic\-\_\-task\-\_\-1} (void)
\item 
int \hyperlink{main2_8h_a944f7352f18ed248c1b1143f51edc391}{periodic\-\_\-task\-\_\-2} (void)
\item 
void \hyperlink{main2_8h_a0e411070b7f487a8ab6a60b180f50e12}{timer\-\_\-start\-\_\-task\-\_\-1} (void)
\item 
void \hyperlink{main2_8h_ae59c93969d017f18e3e38b2f9f7888ca}{timer\-\_\-start\-\_\-task\-\_\-2} (void)
\item 
void \hyperlink{main2_8h_a54bb5066619e443a28ae5601b5ea3642}{timer\-\_\-stop\-\_\-task\-\_\-1} (void)
\item 
void \hyperlink{main2_8h_a0c69dbcb7b2885a2de116b9d690280de}{timer\-\_\-stop\-\_\-task\-\_\-2} (void)
\item 
void \hyperlink{main2_8h_a90885bae1b9535b16e014fb928e98e37}{timer\-\_\-function\-\_\-task\-\_\-1} (void)
\item 
void \hyperlink{main2_8h_a01c18e97a4488be2912eb738b2e7f890}{timer\-\_\-function\-\_\-task\-\_\-2} (void)
\item 
int \hyperlink{main2_8h_a97a188c3a74115770124cf0bf0c1e407}{reset\-\_\-timer} (void)
\item 
int \hyperlink{main2_8h_a5b2b1fdd5e517470c10e84a2b2bcc5c8}{get\-\_\-time} (double $\ast$time\-\_\-control\-\_\-task\-\_\-s, double $\ast$Ts\-\_\-control\-\_\-task\-\_\-s, double $\ast$mean\-\_\-time\-\_\-control\-\_\-task\-\_\-s, double $\ast$t0\-\_\-control\-\_\-task\-\_\-s)
\item 
void \hyperlink{main2_8h_a5f05ce725141ddfab683e059b1cd95ea}{exit\-\_\-program} (void)
\begin{DoxyCompactList}\small\item\em Internal function to end program. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{main2_8h_a6d58f9ac447476b4e084d7ca383f5183}{\index{main2.\-h@{main2.\-h}!F\-A\-I\-L\-U\-R\-E@{F\-A\-I\-L\-U\-R\-E}}
\index{F\-A\-I\-L\-U\-R\-E@{F\-A\-I\-L\-U\-R\-E}!main2.h@{main2.\-h}}
\subsubsection[{F\-A\-I\-L\-U\-R\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define F\-A\-I\-L\-U\-R\-E~-\/1}}\label{main2_8h_a6d58f9ac447476b4e084d7ca383f5183}


Definition at line 6 of file main2.\-h.

\hypertarget{main2_8h_aa90cac659d18e8ef6294c7ae337f6b58}{\index{main2.\-h@{main2.\-h}!S\-U\-C\-C\-E\-S\-S@{S\-U\-C\-C\-E\-S\-S}}
\index{S\-U\-C\-C\-E\-S\-S@{S\-U\-C\-C\-E\-S\-S}!main2.h@{main2.\-h}}
\subsubsection[{S\-U\-C\-C\-E\-S\-S}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\-U\-C\-C\-E\-S\-S~1}}\label{main2_8h_aa90cac659d18e8ef6294c7ae337f6b58}


Definition at line 5 of file main2.\-h.



\subsection{Function Documentation}
\hypertarget{main2_8h_a5f05ce725141ddfab683e059b1cd95ea}{\index{main2.\-h@{main2.\-h}!exit\-\_\-program@{exit\-\_\-program}}
\index{exit\-\_\-program@{exit\-\_\-program}!main2.h@{main2.\-h}}
\subsubsection[{exit\-\_\-program}]{\setlength{\rightskip}{0pt plus 5cm}void exit\-\_\-program (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a5f05ce725141ddfab683e059b1cd95ea}


Internal function to end program. 



Definition at line 135 of file main.\-c.


\begin{DoxyCode}
                       \{
  \hyperlink{main_8c_a9d28d012aca080b397aa05c88ee0e94c}{quittask} = 1;
  \textcolor{keywordflow}{return};
\}
\end{DoxyCode}
\hypertarget{main2_8h_a5b2b1fdd5e517470c10e84a2b2bcc5c8}{\index{main2.\-h@{main2.\-h}!get\-\_\-time@{get\-\_\-time}}
\index{get\-\_\-time@{get\-\_\-time}!main2.h@{main2.\-h}}
\subsubsection[{get\-\_\-time}]{\setlength{\rightskip}{0pt plus 5cm}int get\-\_\-time (
\begin{DoxyParamCaption}
\item[{double $\ast$}]{time\-\_\-control\-\_\-task\-\_\-s, }
\item[{double $\ast$}]{Ts\-\_\-control\-\_\-task\-\_\-s, }
\item[{double $\ast$}]{mean\-\_\-time\-\_\-control\-\_\-task\-\_\-s, }
\item[{double $\ast$}]{t0\-\_\-control\-\_\-task\-\_\-s}
\end{DoxyParamCaption}
)}}\label{main2_8h_a5b2b1fdd5e517470c10e84a2b2bcc5c8}


Definition at line 122 of file main.\-c.



References T\-A\-S\-K\-\_\-\-S\-::period\-\_\-us, S\-U\-C\-C\-E\-S\-S, t0, T\-A\-S\-K\-\_\-\-S\-::t\-\_\-global, T\-A\-S\-K\-\_\-\-S\-::\-T\-\_\-mean\-\_\-global, t\-\_\-task\-\_\-1\-\_\-global, T\-\_\-task\-\_\-1\-\_\-mean\-\_\-global, and task\-\_\-1\-\_\-period\-\_\-us.



Referenced by ui\-\_\-overview\-\_\-data().


\begin{DoxyCode}
\{
  *time\_control\_task\_s = \hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}.\hyperlink{structTASK__S_a29a175bdd4b9f880a2b69bb5186e3c7e}{t\_global};
  *Ts\_control\_task\_s = (\hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}.\hyperlink{structTASK__S_aabd8f80831e6cfd8e51bbd371eed907b}{period\_us})/1e6;
  *mean\_time\_control\_task\_s = \hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1}.\hyperlink{structTASK__S_a9ebae87e1b64869f328a47473f2ea7d7}{T\_mean\_global};
  *t0\_control\_task\_s = \hyperlink{main_8c_a98046aa9aba5dbcc867be625185aef46}{t0};

  \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a5b2b1fdd5e517470c10e84a2b2bcc5c8_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a840291bc02cba5474a4cb46a9b9566fe}{\index{main2.\-h@{main2.\-h}!main@{main}}
\index{main@{main}!main2.h@{main2.\-h}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a840291bc02cba5474a4cb46a9b9566fe}


Definition at line 12 of file dummie.\-c.



References I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::acc, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::act, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::clk\-\_\-source, control\-\_\-task(), S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::cs, datalogger\-\_\-close(), datalogger\-\_\-init(), D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-R\-U\-N\-N\-I\-N\-G, datalogger\-\_\-status(), datalogger\-\_\-stop(), D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-S\-U\-C\-C\-E\-S\-S, datalogger\-\_\-write\-\_\-file(), devices\-\_\-init(), F\-A\-I\-L\-U\-R\-E, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::full\-\_\-res, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::gyr, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::lpf\-\_\-bw, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::mag, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::meas\-\_\-mode, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::mode, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::op\-\_\-mode, ping(), pong(), quittask, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::range, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::range, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-acc\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-gyr\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::rate, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::param\-\_\-mag\-::samples\-\_\-avg, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::speed, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, status, S\-U\-C\-C\-E\-S\-S, task1, T\-A\-S\-K1\-\_\-\-P\-E\-R\-I\-O\-D\-\_\-\-U\-S, task2, T\-A\-S\-K2\-\_\-\-P\-E\-R\-I\-O\-D\-\_\-\-U\-S, task\-\_\-1\-\_\-period\-\_\-us, T\-A\-S\-K\-\_\-\-U\-I\-\_\-\-P\-E\-R\-I\-O\-D, timer\-\_\-new\-\_\-task(), timer\-\_\-start\-\_\-task(), timer\-\_\-start\-\_\-task\-\_\-1(), timer\-\_\-start\-\_\-task\-\_\-2(), timer\-\_\-stop\-\_\-task(), timer\-\_\-stop\-\_\-task\-\_\-1(), timer\-\_\-stop\-\_\-task\-\_\-2(), ui\-\_\-close(), ui\-\_\-init(), and ui\-\_\-task().


\begin{DoxyCode}
          \{
  \hyperlink{structTASK__S}{TASK\_S} \hyperlink{main_8c_ab7d681ab68ca1c465fa993dd21ef096e}{task1},\hyperlink{main_8c_a432cbf231acb83d48e31879bd7afc71a}{task2};
  \textcolor{keywordtype}{int} i=0;

  \hyperlink{group__taskS_ga1e7e694ed290112386d363ee2630dd82}{timer\_new\_task}(&task1,\hyperlink{dummie_8c_a7574c8eca012970109eab1420b3b41eb}{ping});
  \hyperlink{group__taskS_ga1e7e694ed290112386d363ee2630dd82}{timer\_new\_task}(&task2,\hyperlink{dummie_8c_a9a53f30562d65f07327e7fce0a14579f}{pong});

  \hyperlink{group__taskS_gabb62dbc29029e7950ee72aeb78c83dfc}{timer\_start\_task}(&task1,1000);
  \hyperlink{group__taskS_gabb62dbc29029e7950ee72aeb78c83dfc}{timer\_start\_task}(&task2,2000);

  \textcolor{keywordflow}{while}(1) i=1;
  \textcolor{comment}{//for(i=1;i<10;i++) printf(" .");}
  
  \hyperlink{group__taskS_ga8e48eacaac7d9cf7d82cc71cfbcd4b56}{timer\_stop\_task}(&task1);
  \hyperlink{group__taskS_ga8e48eacaac7d9cf7d82cc71cfbcd4b56}{timer\_stop\_task}(&task2);

  exit(0);
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a840291bc02cba5474a4cb46a9b9566fe_cgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a26855b7739897854265d51aa61329390}{\index{main2.\-h@{main2.\-h}!periodic\-\_\-task\-\_\-1@{periodic\-\_\-task\-\_\-1}}
\index{periodic\-\_\-task\-\_\-1@{periodic\-\_\-task\-\_\-1}!main2.h@{main2.\-h}}
\subsubsection[{periodic\-\_\-task\-\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}int periodic\-\_\-task\-\_\-1 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a26855b7739897854265d51aa61329390}


Definition at line 211 of file main2.\-c.



References actuate(), D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-N\-O\-T\-\_\-\-R\-U\-N\-N\-I\-N\-G, D\-A\-T\-A\-L\-O\-G\-G\-E\-R\-\_\-\-R\-U\-N\-N\-I\-N\-G, datalogger\-\_\-set\-\_\-\-Ts(), datalogger\-\_\-status(), datalogger\-\_\-update(), failure, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, read\-\_\-all\-\_\-data(), reset\-\_\-timer(), S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, S\-U\-C\-C\-E\-S\-S, t0, T\-\_\-task\-\_\-1\-\_\-exec\-\_\-global, t\-\_\-task\-\_\-1\-\_\-global, T\-\_\-task\-\_\-2\-\_\-exec\-\_\-global, task\-\_\-1\-\_\-period\-\_\-us, total, and M\-R\-A\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::v\-\_\-ctl.



Referenced by timer\-\_\-function\-\_\-task\-\_\-1().


\begin{DoxyCode}
\{
    \textcolor{comment}{//static int previous\_calibration\_status = CALIBRATION\_NOT\_RUNNING;}
    \textcolor{comment}{//int current\_calibration\_status; // Used to detect lowering edge}
    \textcolor{keyword}{static} \textcolor{keywordtype}{int} previous\_datalogger\_status = \hyperlink{datalogger_8h_a1a224da36800f52f56f30619849f7f5d}{DATALOGGER\_NOT\_RUNNING}
      ;
    \textcolor{keywordtype}{int} current\_datalogger\_status; \textcolor{comment}{// Used to detect rising edge}
    \textcolor{keywordtype}{char} user =0;
   \textcolor{comment}{/* int buff\_i=0; //i of buffer}
\textcolor{comment}{    int i, j, k, equal=0;}
\textcolor{comment}{    short int buff[3][3][3]; //\{acc,gyr,mag\}\{x,y,z\}\{i=1,2,3\}}
\textcolor{comment}{*/}

    \textcolor{comment}{// Main communication/control thread}

    \textcolor{comment}{//Acquire}
    \hyperlink{main_8c_ac7af894858cf396a219d632f40afdc8d}{total}++;
    \textcolor{keywordflow}{if}( \hyperlink{communication_8c_a26f82e8af3b5ce23d5cd3a41db6e0b68}{read\_all\_data}(\hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev}, \hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}
      .\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev}, &\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}, &\hyperlink{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data}, &\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data}, &
      \hyperlink{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{enc\_data}) != \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS})
      \hyperlink{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure}++;
        \textcolor{comment}{/*buff\_i=buff\_i%5;}
\textcolor{comment}{        buff[0][0][buff\_i]=imu\_data.acc.x;}
\textcolor{comment}{        buff[0][1][buff\_i]=imu\_data.acc.y;}
\textcolor{comment}{        buff[0][2][buff\_i]=imu\_data.acc.z;}
\textcolor{comment}{        buff[1][0][buff\_i]=imu\_data.gyr.x;}
\textcolor{comment}{        buff[1][0][buff\_i]=imu\_data.gyr.x;}
\textcolor{comment}{        buff[1][1][buff\_i]=imu\_data.gyr.y;}
\textcolor{comment}{        buff[1][2][buff\_i]=imu\_data.gyr.z;}
\textcolor{comment}{        buff[2][0][buff\_i]=imu\_data.mag.x;}
\textcolor{comment}{        buff[2][1][buff\_i]=imu\_data.mag.y;}
\textcolor{comment}{        buff[2][2][buff\_i]=imu\_data.mag.z;}
\textcolor{comment}{        buff\_i++;}
\textcolor{comment}{        }
\textcolor{comment}{        for( i=0; i<3; i++)}
\textcolor{comment}{        \{}
\textcolor{comment}{          }
\textcolor{comment}{          for( j=0; j<3; j++)}
\textcolor{comment}{            for( k=1; k<3; k++)}
\textcolor{comment}{            \{}
\textcolor{comment}{              if( buff[i][j][k]==buff[i][j][0] )}
\textcolor{comment}{                equal=1;}
\textcolor{comment}{              else}
\textcolor{comment}{                equal=0;}
\textcolor{comment}{            \}}
\textcolor{comment}{          if( equal==1)}
\textcolor{comment}{            i=3;}
\textcolor{comment}{        \}}
\textcolor{comment}{        if( equal==1 )}
\textcolor{comment}{        \{}
\textcolor{comment}{          devices\_init(&imu\_param, &spi\_param, &mra\_data);}
\textcolor{comment}{          equal=0;}
\textcolor{comment}{        \}*/}
\textcolor{comment}{/*    if(read\_all\_data(imu\_param.i2c\_dev, spi\_param.spi\_dev, &imu\_data,
       &eff\_data) != SUCCESS)}
\textcolor{comment}{    \{}
\textcolor{comment}{        failure++;}
\textcolor{comment}{    \}}
\textcolor{comment}{*/}
    \textcolor{comment}{// Calibrate and Estimate}
    \textcolor{comment}{//calibrate\_all(&imu\_data);}
    \textcolor{comment}{//calibration\_calibrate\_all(&pwm\_read\_data, &scp1000\_data, &battery\_data,
       &gps\_data, &imu\_data, &pitot\_data, &sonar\_data,
       &calibration\_local\_coordinate\_system\_data, &calibration\_altimeter\_data, &calibration\_local\_fields\_data,
       &gps\_measure, &imu\_measure, &magnetometer\_measure);}
    \textcolor{comment}{//estimation\_update\_state\_estimate(&estimation\_data, &gps\_measure,
       &imu\_measure, &magnetometer\_measure, &sonar\_measure, &calibration\_local\_fields\_data,
       task\_1\_period\_us/(double)1e6);}

    \textcolor{comment}{// Control}
    \hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data}.\hyperlink{structMRA__DATA__STRUCT_a64b4e6bb604e58de593a60c87942b966}{v\_ctl}=1275+(uint8\_t)(800*cosf(\hyperlink{main2_8c_a2a2a647912528f7aa86812528dbfe02f}{t\_task\_1\_global}
      *1000));
    \textcolor{comment}{//control\_main\_task(t\_task\_1\_global, &pwm\_write\_data, &pwm\_read\_data,
       &control\_data, &estimation\_data);}

    \textcolor{comment}{// Actuate}
    \hyperlink{communication_8c_a1d5f01d0124cff7030b5c4951b4bbefa}{actuate}(\hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}.\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev}, &\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data});
    \textcolor{comment}{//protocol\_send\_actuation\_data(&pwm\_write\_data);}

    \textcolor{comment}{// Log}
    \textcolor{comment}{/*user=getch();}
\textcolor{comment}{    switch(user)\{}
\textcolor{comment}{      case 'e': }
\textcolor{comment}{        exit\_program();}
\textcolor{comment}{        break;}
\textcolor{comment}{      case 'a':}
\textcolor{comment}{        acquire=1;}
\textcolor{comment}{        break;}
\textcolor{comment}{      case 's':}
\textcolor{comment}{        acquire=0;}
\textcolor{comment}{        break;}
\textcolor{comment}{      default:}
\textcolor{comment}{        break;}
\textcolor{comment}{    \}*/}
    current\_datalogger\_status = \hyperlink{datalogger_8c_a46fd1290d9ee97d5fc7171e1e0dcb0aa}{datalogger\_status}();
    \textcolor{keywordflow}{if}( (current\_datalogger\_status == \hyperlink{datalogger_8h_a2cf92051a019c8ec1b5c4f5380758f62}{DATALOGGER\_RUNNING}))
    \{
        \textcolor{keywordflow}{if}(previous\_datalogger\_status == \hyperlink{datalogger_8h_a1a224da36800f52f56f30619849f7f5d}{DATALOGGER\_NOT\_RUNNING}
      ) \textcolor{comment}{// Rising edge}
        \{
            \hyperlink{datalogger_8c_afb69d166f8d53042825174cee225ea49}{datalogger\_set\_Ts}(\hyperlink{main2_8c_afffc21b0b726e6f4a572d0eefd3b5d69}{task\_1\_period\_us}
      /1e6);
            \hyperlink{main2_8c_a97a188c3a74115770124cf0bf0c1e407}{reset\_timer}();
        \}
        \hyperlink{datalogger_8c_ad89a56e2f057ace8c28d78eb67703e7d}{datalogger\_update}(\hyperlink{main2_8c_a2a2a647912528f7aa86812528dbfe02f}{t\_task\_1\_global}, 
      \hyperlink{main2_8c_acdaa4a9b0e1be3dfa53b52df6410ad3b}{T\_task\_1\_exec\_global}, \hyperlink{main2_8c_a9629c77cd3dba9d47d15c2e51bdde09d}{T\_task\_2\_exec\_global}
      , \hyperlink{main_8c_a98046aa9aba5dbcc867be625185aef46}{t0}, &\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}, &\hyperlink{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data}, &\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data} \textcolor{comment}{/*&imu\_measure,
       &magnetometer\_measure, &estimation\_data, &control\_data*/});
  \textcolor{comment}{//printf("\(\backslash\)n    %d\(\backslash\)t|",i);}
 \textcolor{comment}{/* printw("%d\(\backslash\)t|",eff\_data.F.x);}
\textcolor{comment}{    printw("\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|",imu\_data.acc.x,imu\_data.acc.y,imu\_data.acc.z);}
\textcolor{comment}{    printw("\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t|",imu\_data.mag.x,imu\_data.mag.y,imu\_data.mag.z);}
\textcolor{comment}{    printw("\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d\(\backslash\)t%d",imu\_data.gyr.x,imu\_data.gyr.y,imu\_data.gyr.z,
       imu\_data.temp);}
\textcolor{comment}{    printw("\(\backslash\)t%d\(\backslash\)t%d",eff\_data.new\_data,imu\_data.new\_data);}
\textcolor{comment}{    printw("\(\backslash\)t%d\(\backslash\)t%d",mra\_data.Out\_0, mra\_data.Read\_0);}
\textcolor{comment}{    printw("\(\backslash\)n");}
\textcolor{comment}{    refresh();*/}
    \}
    previous\_datalogger\_status = current\_datalogger\_status;

\textcolor{comment}{/*    current\_calibration\_status = calibration\_get\_status();}
\textcolor{comment}{    if(current\_calibration\_status == CALIBRATION\_RUNNING)}
\textcolor{comment}{    \{}
\textcolor{comment}{        calibration\_imu\_add\_sample\_bias\_estimate(&imu\_data);}
\textcolor{comment}{        calibration\_altimeter\_add\_sample\_initial\_pressure(&scp1000\_data,
       &calibration\_altimeter\_data);}
\textcolor{comment}{    \}}
\textcolor{comment}{    else // Calibration not running}
\textcolor{comment}{    \{}
\textcolor{comment}{        if(previous\_calibration\_status == CALIBRATION\_RUNNING) // Lowering edge}
\textcolor{comment}{        \{}
\textcolor{comment}{            calibration\_imu\_finish\_bias\_estimate(&imu\_data);}
\textcolor{comment}{           
       calibration\_altimeter\_finish\_initial\_pressure\_estimate(&calibration\_altimeter\_data);}
\textcolor{comment}{        \}}
\textcolor{comment}{    \}}
\textcolor{comment}{    previous\_calibration\_status = current\_calibration\_status;}
\textcolor{comment}{*/}
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a26855b7739897854265d51aa61329390_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a26855b7739897854265d51aa61329390_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a944f7352f18ed248c1b1143f51edc391}{\index{main2.\-h@{main2.\-h}!periodic\-\_\-task\-\_\-2@{periodic\-\_\-task\-\_\-2}}
\index{periodic\-\_\-task\-\_\-2@{periodic\-\_\-task\-\_\-2}!main2.h@{main2.\-h}}
\subsubsection[{periodic\-\_\-task\-\_\-2}]{\setlength{\rightskip}{0pt plus 5cm}int periodic\-\_\-task\-\_\-2 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a944f7352f18ed248c1b1143f51edc391}


Definition at line 334 of file main2.\-c.



References I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::acc, buff, buff\-\_\-i, devices\-\_\-init(), failure, I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::gyr, I\-M\-U\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::i2c\-\_\-dev, I\-M\-U\-\_\-\-D\-A\-T\-A\-\_\-\-S\-T\-R\-U\-C\-T\-::mag, S\-P\-I\-\_\-\-P\-A\-R\-A\-M\-\_\-\-S\-T\-R\-U\-C\-T\-::spi\-\_\-dev, S\-U\-C\-C\-E\-S\-S, telemetry\-\_\-mode, total, U\-I\-\_\-\-N\-C\-U\-R\-S\-E\-S\-\_\-\-M\-O\-D\-E, ui\-\_\-update(), D\-A\-T\-A\-\_\-\-X\-Y\-Z\-::x, D\-A\-T\-A\-\_\-\-X\-Y\-Z\-::y, and D\-A\-T\-A\-\_\-\-X\-Y\-Z\-::z.



Referenced by timer\-\_\-function\-\_\-task\-\_\-2().


\begin{DoxyCode}
\{

    \textcolor{keywordtype}{int} i, j, k, equal=0;

    \textcolor{comment}{// UI thread}
    \textcolor{keywordflow}{if}(\hyperlink{main2_8c_a5045187bb0afe92c41ce73bc602fd3ca}{telemetry\_mode} == \hyperlink{ui_8h_a5f863c47136ccbe4db74101b9a3e83ca}{UI\_NCURSES\_MODE})
    \{
        \hyperlink{group__ui_ga42e4dac2d138061a74c572358c8ebf49}{ui\_update}(&\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}, &\hyperlink{main_8c_a5650ece8c3a277c7f158d75ae65265fa}{eff\_data}, &\hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data}
      ,&\hyperlink{main_8c_aaa441e18ae805c4f3efb0b5231d1cfe7}{enc\_data}, \hyperlink{main_8c_ac7af894858cf396a219d632f40afdc8d}{total}, \hyperlink{main_8c_a4f35e5ea2395561d0bd3b2f45612dc2c}{failure});
    \}
                
            \hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}=\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}%5;
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[0][0][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a448f284bf44eb503affda586ad5fa9d2}{acc}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[0][1][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a448f284bf44eb503affda586ad5fa9d2}{acc}.\hyperlink{structDATA__XYZ_a94bbb1c889bf53eb6a5fffa2b39322cf}{y};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[0][2][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a448f284bf44eb503affda586ad5fa9d2}{acc}.\hyperlink{structDATA__XYZ_a69e89ab0ec6e5d72fc5d54f62cc07fb5}{z};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[1][0][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a0c1ac26626e4434a2ee124a1928a23a1}{gyr}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[1][0][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a0c1ac26626e4434a2ee124a1928a23a1}{gyr}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[1][1][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a0c1ac26626e4434a2ee124a1928a23a1}{gyr}.\hyperlink{structDATA__XYZ_a94bbb1c889bf53eb6a5fffa2b39322cf}{y};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[1][2][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a0c1ac26626e4434a2ee124a1928a23a1}{gyr}.\hyperlink{structDATA__XYZ_a69e89ab0ec6e5d72fc5d54f62cc07fb5}{z};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[2][0][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a40c7df8b6d49297aa52873cfd9b60daa}{mag}.\hyperlink{structDATA__XYZ_a54c1596e9f9969fd9c21e8458024ecfb}{x};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[2][1][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a40c7df8b6d49297aa52873cfd9b60daa}{mag}.\hyperlink{structDATA__XYZ_a94bbb1c889bf53eb6a5fffa2b39322cf}{y};
        \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[2][2][\hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}]=\hyperlink{main_8c_a3cfea12cbe9ca7f1681c950e4cd68606}{imu\_data}.\hyperlink{structIMU__DATA__STRUCT_a40c7df8b6d49297aa52873cfd9b60daa}{mag}.\hyperlink{structDATA__XYZ_a69e89ab0ec6e5d72fc5d54f62cc07fb5}{z};
        \hyperlink{main2_8c_ac0f4eb3a1def152855159c698feaf977}{buff\_i}++;
        
        \textcolor{keywordflow}{for}( i=0; i<3; i++)
        \{
          
          \textcolor{keywordflow}{for}( j=0; j<3; j++)
            \textcolor{keywordflow}{for}( k=1; k<3; k++)
            \{
              \textcolor{keywordflow}{if}( \hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[i][j][k]==\hyperlink{main2_8c_aaa9d39905d1be632c8232f11155291d0}{buff}[i][j][0] )
                equal=1;
              \textcolor{keywordflow}{else}
                equal=0;
            \}
          \textcolor{keywordflow}{if}( equal==1)
            i=3;
        \}
        \textcolor{keywordflow}{if}( equal==1 )
        \{
          close(\hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}.\hyperlink{structIMU__PARAM__STRUCT_a8a870f383fc9ba0b682fdc9b8c0d2734}{i2c\_dev});
          close(\hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}.\hyperlink{structSPI__PARAM__STRUCT_abe385c44333d268d17cf648c8e371cad}{spi\_dev});
          \hyperlink{communication_8c_a2d1e523ff70db11ca4096f97af5da000}{devices\_init}(&\hyperlink{main_8c_a9c6b2109fb9402446f92995db60951b5}{imu\_param}, &\hyperlink{main_8c_adec2468b88cf50b20e5cf399a3b7e994}{spi\_param}, &
      \hyperlink{main_8c_abc42e18d2909e9bc119316283f4ed9db}{mra\_data});
          equal=0;
        \}
    \textcolor{comment}{/*if(telemetry\_mode == UI\_MAVLINK\_MODE)}
\textcolor{comment}{    \{}
\textcolor{comment}{        mavlink\_module\_update(t\_task\_1\_global, t0, &battery\_data, &gps\_data,
       &imu\_data, &pitot\_data, &pwm\_read\_data, &pwm\_write\_data, &scp1000\_data,
       &sonar\_data, &gps\_measure, &imu\_measure, &magnetometer\_measure, &estimation\_data,
       &control\_data);}
\textcolor{comment}{    \}*/}

    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a944f7352f18ed248c1b1143f51edc391_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a944f7352f18ed248c1b1143f51edc391_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a97a188c3a74115770124cf0bf0c1e407}{\index{main2.\-h@{main2.\-h}!reset\-\_\-timer@{reset\-\_\-timer}}
\index{reset\-\_\-timer@{reset\-\_\-timer}!main2.h@{main2.\-h}}
\subsubsection[{reset\-\_\-timer}]{\setlength{\rightskip}{0pt plus 5cm}int reset\-\_\-timer (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a97a188c3a74115770124cf0bf0c1e407}


Definition at line 596 of file main2.\-c.



References S\-U\-C\-C\-E\-S\-S, t0, and t\-\_\-task\-\_\-1\-\_\-global.



Referenced by periodic\-\_\-task\-\_\-1().


\begin{DoxyCode}
\{
    \hyperlink{main_8c_a98046aa9aba5dbcc867be625185aef46}{t0} = \hyperlink{main2_8c_a2a2a647912528f7aa86812528dbfe02f}{t\_task\_1\_global};
    \textcolor{keywordflow}{return} \hyperlink{calibration_2calibration_8h_aa90cac659d18e8ef6294c7ae337f6b58}{SUCCESS};
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a97a188c3a74115770124cf0bf0c1e407_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a90885bae1b9535b16e014fb928e98e37}{\index{main2.\-h@{main2.\-h}!timer\-\_\-function\-\_\-task\-\_\-1@{timer\-\_\-function\-\_\-task\-\_\-1}}
\index{timer\-\_\-function\-\_\-task\-\_\-1@{timer\-\_\-function\-\_\-task\-\_\-1}!main2.h@{main2.\-h}}
\subsubsection[{timer\-\_\-function\-\_\-task\-\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-function\-\_\-task\-\_\-1 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a90885bae1b9535b16e014fb928e98e37}


Definition at line 483 of file main2.\-c.



References flag\-\_\-task\-\_\-1\-\_\-firstexecution, periodic\-\_\-task\-\_\-1(), status, t0, T\-\_\-task\-\_\-1\-\_\-exec\-\_\-global, t\-\_\-task\-\_\-1\-\_\-global, T\-\_\-task\-\_\-1\-\_\-max\-\_\-global, T\-\_\-task\-\_\-1\-\_\-mean\-\_\-global, and T\-\_\-task\-\_\-1\-\_\-min\-\_\-global.



Referenced by f\-\_\-timer\-\_\-task\-\_\-1().


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{int} \hyperlink{communication_8c_a6e27f49150e9a14580fb313cc2777e00}{status} = 0;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval timereset;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time\_exec\_start;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time\_exec\_end;
    \textcolor{keyword}{static} \textcolor{keywordtype}{double} T\_task,t\_task,t\_task\_previous;
    \textcolor{keyword}{static} \textcolor{keywordtype}{double} T\_task\_mean,T\_task\_min,T\_task\_max,T\_task\_exec;

    gettimeofday(&time\_exec\_start, NULL);

    \textcolor{comment}{// Time calculation}
    \textcolor{keywordflow}{if}(\hyperlink{main2_8c_a764ebf75ba887a9ecf7bf8fe124960e0}{flag\_task\_1\_firstexecution})
    \{
        gettimeofday(&timereset, NULL);
        t\_task = 0.0;
        T\_task\_mean = 0.0;
        T\_task\_min = 0.0;
        T\_task\_max = 0.0;
        T\_task\_exec = 0.0;
    \}

    gettimeofday(&time, NULL);
    t\_task = ((time.tv\_sec - timereset.tv\_sec) + (time.tv\_usec - timereset.
      tv\_usec)*1e-6);
    T\_task = t\_task - t\_task\_previous;
    t\_task\_previous = t\_task;

    \textcolor{keywordflow}{if}(\hyperlink{main2_8c_a764ebf75ba887a9ecf7bf8fe124960e0}{flag\_task\_1\_firstexecution})
    \{
        T\_task\_mean = T\_task;
        T\_task\_min  = 1e200;
        T\_task\_max  = 0.0;
        \hyperlink{main_8c_a98046aa9aba5dbcc867be625185aef46}{t0} = t\_task;
    \}
    \textcolor{keywordflow}{else}
    \{
        T\_task\_mean = 0.05*T\_task + 0.95*T\_task\_mean;
        \textcolor{keywordflow}{if}(T\_task < T\_task\_min) T\_task\_min  = T\_task;
        \textcolor{keywordflow}{if}(T\_task > T\_task\_max) T\_task\_max  = T\_task;
    \}

    \textcolor{comment}{// Run the thread}
    status = \hyperlink{main2_8c_a26855b7739897854265d51aa61329390}{periodic\_task\_1}();

    gettimeofday(&time\_exec\_end, NULL);
    T\_task\_exec = ((time\_exec\_end.tv\_sec - time\_exec\_start.tv\_sec) + (
      time\_exec\_end.tv\_usec - time\_exec\_start.tv\_usec)*1e-6);

    \hyperlink{main2_8c_a2a2a647912528f7aa86812528dbfe02f}{t\_task\_1\_global} = t\_task;
    \hyperlink{main2_8c_a738c330c86a365e72ce29ebca3f1e572}{T\_task\_1\_mean\_global} = T\_task\_mean;
    \hyperlink{main2_8c_a86222e255aeeb47598a4fc91ab6c2b1a}{T\_task\_1\_min\_global} = T\_task\_min;
    \hyperlink{main2_8c_aa714e30d738039b5bf665742beb31739}{T\_task\_1\_max\_global} = T\_task\_max;
    \hyperlink{main2_8c_acdaa4a9b0e1be3dfa53b52df6410ad3b}{T\_task\_1\_exec\_global} = T\_task\_exec;

    \hyperlink{main2_8c_a764ebf75ba887a9ecf7bf8fe124960e0}{flag\_task\_1\_firstexecution} = 0;
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a90885bae1b9535b16e014fb928e98e37_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a90885bae1b9535b16e014fb928e98e37_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a01c18e97a4488be2912eb738b2e7f890}{\index{main2.\-h@{main2.\-h}!timer\-\_\-function\-\_\-task\-\_\-2@{timer\-\_\-function\-\_\-task\-\_\-2}}
\index{timer\-\_\-function\-\_\-task\-\_\-2@{timer\-\_\-function\-\_\-task\-\_\-2}!main2.h@{main2.\-h}}
\subsubsection[{timer\-\_\-function\-\_\-task\-\_\-2}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-function\-\_\-task\-\_\-2 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a01c18e97a4488be2912eb738b2e7f890}


Definition at line 540 of file main2.\-c.



References flag\-\_\-task\-\_\-2\-\_\-firstexecution, periodic\-\_\-task\-\_\-2(), status, T\-\_\-task\-\_\-2\-\_\-exec\-\_\-global, t\-\_\-task\-\_\-2\-\_\-global, T\-\_\-task\-\_\-2\-\_\-max\-\_\-global, T\-\_\-task\-\_\-2\-\_\-mean\-\_\-global, and T\-\_\-task\-\_\-2\-\_\-min\-\_\-global.



Referenced by f\-\_\-timer\-\_\-task\-\_\-2().


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{int} \hyperlink{communication_8c_a6e27f49150e9a14580fb313cc2777e00}{status} = 0;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval timereset;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time\_exec\_start;
    \textcolor{keyword}{static} \textcolor{keyword}{struct }timeval time\_exec\_end;
    \textcolor{keyword}{static} \textcolor{keywordtype}{double} T\_task,t\_task,t\_task\_previous;
    \textcolor{keyword}{static} \textcolor{keywordtype}{double} T\_task\_mean,T\_task\_min,T\_task\_max,T\_task\_exec;

    gettimeofday(&time\_exec\_start, NULL);

    \textcolor{comment}{// Time calculation}
    \textcolor{keywordflow}{if}(\hyperlink{main2_8c_a60e039269ae4a130db1bdbc4a709c437}{flag\_task\_2\_firstexecution})
    \{
        gettimeofday(&timereset, NULL);
        t\_task = 0.0;
        T\_task\_mean = 0.0;
        T\_task\_min = 0.0;
        T\_task\_max = 0.0;
        T\_task\_exec = 0.0;
    \}

    gettimeofday(&time, NULL);
    t\_task = ((time.tv\_sec - timereset.tv\_sec) + (time.tv\_usec - timereset.
      tv\_usec)*1e-6);
    T\_task = t\_task - t\_task\_previous;
    t\_task\_previous = t\_task;

    \textcolor{keywordflow}{if}(\hyperlink{main2_8c_a60e039269ae4a130db1bdbc4a709c437}{flag\_task\_2\_firstexecution})
    \{
        T\_task\_mean = T\_task;
        T\_task\_min  = 1e200;
        T\_task\_max  = 0.0;
    \}
    \textcolor{keywordflow}{else}
    \{
        T\_task\_mean = 0.05*T\_task + 0.95*T\_task\_mean;
        \textcolor{keywordflow}{if}(T\_task < T\_task\_min) T\_task\_min  = T\_task;
        \textcolor{keywordflow}{if}(T\_task > T\_task\_max) T\_task\_max  = T\_task;
    \}

    \textcolor{comment}{// Run the thread}
    status = \hyperlink{main2_8c_a944f7352f18ed248c1b1143f51edc391}{periodic\_task\_2}();

    gettimeofday(&time\_exec\_end, NULL);
    T\_task\_exec = ((time\_exec\_end.tv\_sec - time\_exec\_start.tv\_sec) + (
      time\_exec\_end.tv\_usec - time\_exec\_start.tv\_usec)*1e-6);

    \hyperlink{main2_8c_a08f794ff34d918d3d34d771e11e4aba3}{t\_task\_2\_global} = t\_task;
    \hyperlink{main2_8c_af4e19d5a9b24aa56c8ebff6ad1aa2b95}{T\_task\_2\_mean\_global} = T\_task\_mean;
    \hyperlink{main2_8c_ab7712cb13ce6206dd138a51e2053e36c}{T\_task\_2\_min\_global} = T\_task\_min;
    \hyperlink{main2_8c_a1cd82006c46f46176730e876d272cc14}{T\_task\_2\_max\_global} = T\_task\_max;
    \hyperlink{main2_8c_a9629c77cd3dba9d47d15c2e51bdde09d}{T\_task\_2\_exec\_global} = T\_task\_exec;

    \hyperlink{main2_8c_a60e039269ae4a130db1bdbc4a709c437}{flag\_task\_2\_firstexecution} = 0;
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a01c18e97a4488be2912eb738b2e7f890_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a01c18e97a4488be2912eb738b2e7f890_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a0e411070b7f487a8ab6a60b180f50e12}{\index{main2.\-h@{main2.\-h}!timer\-\_\-start\-\_\-task\-\_\-1@{timer\-\_\-start\-\_\-task\-\_\-1}}
\index{timer\-\_\-start\-\_\-task\-\_\-1@{timer\-\_\-start\-\_\-task\-\_\-1}!main2.h@{main2.\-h}}
\subsubsection[{timer\-\_\-start\-\_\-task\-\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-start\-\_\-task\-\_\-1 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a0e411070b7f487a8ab6a60b180f50e12}


Definition at line 399 of file main2.\-c.



References f\-\_\-timer\-\_\-task\-\_\-1(), flag\-\_\-task\-\_\-1\-\_\-firstexecution, task\-\_\-1\-\_\-period\-\_\-us, and timer\-\_\-task\-\_\-1.



Referenced by main().


\begin{DoxyCode}
\{
    \textcolor{keyword}{struct }itimerspec itimer;
    \textcolor{keyword}{struct }sigevent sigev;
    \textcolor{keywordtype}{int} erno = 0;

    \hyperlink{main2_8c_a764ebf75ba887a9ecf7bf8fe124960e0}{flag\_task\_1\_firstexecution} = 1;

    itimer.it\_interval.tv\_sec=0;
    itimer.it\_interval.tv\_nsec=\hyperlink{main2_8c_afffc21b0b726e6f4a572d0eefd3b5d69}{task\_1\_period\_us} * 1000;
    itimer.it\_value=itimer.it\_interval;

    memset(&sigev, 0, \textcolor{keyword}{sizeof} (\textcolor{keyword}{struct} sigevent));

    sigev.sigev\_value.sival\_int = 0;
    sigev.sigev\_notify = SIGEV\_THREAD;
    sigev.sigev\_notify\_attributes = NULL;
    sigev.sigev\_notify\_function = \hyperlink{main2_8c_a5ce2b6a7dd4d00c90fe18098091044aa}{f\_timer\_task\_1};

    \textcolor{keywordflow}{if} (timer\_create(CLOCK\_REALTIME, &sigev, &\hyperlink{main2_8c_a904a157c5d5f94416cd450f511635af1}{timer\_task\_1}) < 0)
    \{
        fprintf(stderr, \textcolor{stringliteral}{"[%d]: %s\(\backslash\)n"}, \_\_LINE\_\_, strerror(erno));
        exit(erno);
    \}

    \textcolor{keywordflow}{if}(timer\_settime(\hyperlink{main2_8c_a904a157c5d5f94416cd450f511635af1}{timer\_task\_1}, 0, &itimer, NULL) < 0)
    \{
        fprintf(stderr, \textcolor{stringliteral}{"[%d]: %s\(\backslash\)n"}, \_\_LINE\_\_, strerror(erno));
        exit(erno);
    \}

\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_a0e411070b7f487a8ab6a60b180f50e12_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{main2_8h_a0e411070b7f487a8ab6a60b180f50e12_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_ae59c93969d017f18e3e38b2f9f7888ca}{\index{main2.\-h@{main2.\-h}!timer\-\_\-start\-\_\-task\-\_\-2@{timer\-\_\-start\-\_\-task\-\_\-2}}
\index{timer\-\_\-start\-\_\-task\-\_\-2@{timer\-\_\-start\-\_\-task\-\_\-2}!main2.h@{main2.\-h}}
\subsubsection[{timer\-\_\-start\-\_\-task\-\_\-2}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-start\-\_\-task\-\_\-2 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_ae59c93969d017f18e3e38b2f9f7888ca}


Definition at line 432 of file main2.\-c.



References f\-\_\-timer\-\_\-task\-\_\-2(), flag\-\_\-task\-\_\-2\-\_\-firstexecution, task\-\_\-2\-\_\-period\-\_\-us, and timer\-\_\-task\-\_\-2.



Referenced by main().


\begin{DoxyCode}
\{
    \textcolor{keyword}{struct }itimerspec itimer;
    \textcolor{keyword}{struct }sigevent sigev;
    \textcolor{keywordtype}{int} erno = 0;

    \hyperlink{main2_8c_a60e039269ae4a130db1bdbc4a709c437}{flag\_task\_2\_firstexecution} = 1;

    itimer.it\_interval.tv\_sec=0;
    itimer.it\_interval.tv\_nsec=\hyperlink{main2_8c_a5166d431d5448a1538e75f5469c19c7b}{task\_2\_period\_us} * 1000;
    itimer.it\_value=itimer.it\_interval;

    memset (&sigev, 0, \textcolor{keyword}{sizeof} (\textcolor{keyword}{struct} sigevent));
    sigev.sigev\_value.sival\_int = 0;
    sigev.sigev\_notify = SIGEV\_THREAD;
    sigev.sigev\_notify\_attributes = NULL;
    sigev.sigev\_notify\_function = \hyperlink{main2_8c_a735ebf3d0d37c7d8187199e6565bcb5c}{f\_timer\_task\_2};

    \textcolor{keywordflow}{if}(timer\_create(CLOCK\_REALTIME, &sigev, &\hyperlink{main2_8c_adf6e8e22925f399f086dea8671f39c08}{timer\_task\_2}) < 0)
    \{
        fprintf(stderr, \textcolor{stringliteral}{"[%d]: %s\(\backslash\)n"}, \_\_LINE\_\_, strerror(erno));
        exit(erno);
    \}

    \textcolor{keywordflow}{if}(timer\_settime(\hyperlink{main2_8c_adf6e8e22925f399f086dea8671f39c08}{timer\_task\_2}, 0, &itimer, NULL) < 0)
    \{
        fprintf(stderr, \textcolor{stringliteral}{"[%d]: %s\(\backslash\)n"}, \_\_LINE\_\_, strerror(erno));
        exit(erno);
    \}
\}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main2_8h_ae59c93969d017f18e3e38b2f9f7888ca_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{main2_8h_ae59c93969d017f18e3e38b2f9f7888ca_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a54bb5066619e443a28ae5601b5ea3642}{\index{main2.\-h@{main2.\-h}!timer\-\_\-stop\-\_\-task\-\_\-1@{timer\-\_\-stop\-\_\-task\-\_\-1}}
\index{timer\-\_\-stop\-\_\-task\-\_\-1@{timer\-\_\-stop\-\_\-task\-\_\-1}!main2.h@{main2.\-h}}
\subsubsection[{timer\-\_\-stop\-\_\-task\-\_\-1}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-stop\-\_\-task\-\_\-1 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a54bb5066619e443a28ae5601b5ea3642}


Definition at line 463 of file main2.\-c.



References timer\-\_\-task\-\_\-1.



Referenced by main().


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{int} erno = 0;
    \textcolor{keywordflow}{if}(timer\_delete(\hyperlink{main2_8c_a904a157c5d5f94416cd450f511635af1}{timer\_task\_1}) < 0)
    \{
        fprintf(stderr, \textcolor{stringliteral}{"[%d]: %s\(\backslash\)n"}, \_\_LINE\_\_, strerror(erno));
        exit(erno);
    \}
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{main2_8h_a54bb5066619e443a28ae5601b5ea3642_icgraph}
\end{center}
\end{figure}


\hypertarget{main2_8h_a0c69dbcb7b2885a2de116b9d690280de}{\index{main2.\-h@{main2.\-h}!timer\-\_\-stop\-\_\-task\-\_\-2@{timer\-\_\-stop\-\_\-task\-\_\-2}}
\index{timer\-\_\-stop\-\_\-task\-\_\-2@{timer\-\_\-stop\-\_\-task\-\_\-2}!main2.h@{main2.\-h}}
\subsubsection[{timer\-\_\-stop\-\_\-task\-\_\-2}]{\setlength{\rightskip}{0pt plus 5cm}void timer\-\_\-stop\-\_\-task\-\_\-2 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main2_8h_a0c69dbcb7b2885a2de116b9d690280de}


Definition at line 473 of file main2.\-c.



References timer\-\_\-task\-\_\-2.



Referenced by main().


\begin{DoxyCode}
\{
    \textcolor{keywordtype}{int} erno = 0;
    \textcolor{keywordflow}{if}(timer\_delete(\hyperlink{main2_8c_adf6e8e22925f399f086dea8671f39c08}{timer\_task\_2}) < 0)
    \{
        fprintf(stderr, \textcolor{stringliteral}{"[%d]: %s\(\backslash\)n"}, \_\_LINE\_\_, strerror(erno));
        exit(erno);
    \}
\}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{main2_8h_a0c69dbcb7b2885a2de116b9d690280de_icgraph}
\end{center}
\end{figure}


