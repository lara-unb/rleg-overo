\hypertarget{CommunicationV0_2gpio__functions_8c}{\section{Communication\-V0/gpio\-\_\-functions.c File Reference}
\label{CommunicationV0_2gpio__functions_8c}\index{Communication\-V0/gpio\-\_\-functions.\-c@{Communication\-V0/gpio\-\_\-functions.\-c}}
}
{\ttfamily \#include \char`\"{}gpio\-\_\-functions.\-h\char`\"{}}\\*
Include dependency graph for gpio\-\_\-functions.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{CommunicationV0_2gpio__functions_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{CommunicationV0_2gpio__functions_8c_ae18413a0edf151e47a7aa6be21c5144a}{gpio\-\_\-read} (uint8\-\_\-t gpio)
\item 
int \hyperlink{CommunicationV0_2gpio__functions_8c_a9672ca43e65fa527cd6bf43db9aea594}{gpio\-\_\-write} (uint8\-\_\-t gpio, uint8\-\_\-t value)
\item 
int \hyperlink{CommunicationV0_2gpio__functions_8c_a95e72f46197cf1c0d985f760c7c4b35a}{gpio\-\_\-f\-\_\-write} (uint8\-\_\-t gpio, uint8\-\_\-t value)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{CommunicationV0_2gpio__functions_8c_a95e72f46197cf1c0d985f760c7c4b35a}{\index{Communication\-V0/gpio\-\_\-functions.\-c@{Communication\-V0/gpio\-\_\-functions.\-c}!gpio\-\_\-f\-\_\-write@{gpio\-\_\-f\-\_\-write}}
\index{gpio\-\_\-f\-\_\-write@{gpio\-\_\-f\-\_\-write}!CommunicationV0/gpio_functions.c@{Communication\-V0/gpio\-\_\-functions.\-c}}
\subsubsection[{gpio\-\_\-f\-\_\-write}]{\setlength{\rightskip}{0pt plus 5cm}int gpio\-\_\-f\-\_\-write (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{gpio, }
\item[{uint8\-\_\-t}]{value}
\end{DoxyParamCaption}
)}}\label{CommunicationV0_2gpio__functions_8c_a95e72f46197cf1c0d985f760c7c4b35a}


Definition at line 60 of file gpio\-\_\-functions.\-c.



References S\-U\-C\-C\-E\-S\-S.


\begin{DoxyCode}
61 \{
62   FILE *fp\_gpio;
63   \textcolor{keywordtype}{char} path[30];
64   \textcolor{keywordtype}{char} fp\_value;
65   
66   sprintf(path,\textcolor{stringliteral}{"/sys/class/gpio/gpio%d/value"},gpio);
67   fp\_gpio=fopen(path,\textcolor{stringliteral}{"w"});
68   rewind(fp\_gpio);
69   fp\_value=0x30+value;
70   fwrite(&fp\_value, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), 1, fp\_gpio);
71   fclose(fp\_gpio);
72   \textcolor{keywordflow}{return} 1;
73 \}
\end{DoxyCode}
\hypertarget{CommunicationV0_2gpio__functions_8c_ae18413a0edf151e47a7aa6be21c5144a}{\index{Communication\-V0/gpio\-\_\-functions.\-c@{Communication\-V0/gpio\-\_\-functions.\-c}!gpio\-\_\-read@{gpio\-\_\-read}}
\index{gpio\-\_\-read@{gpio\-\_\-read}!CommunicationV0/gpio_functions.c@{Communication\-V0/gpio\-\_\-functions.\-c}}
\subsubsection[{gpio\-\_\-read}]{\setlength{\rightskip}{0pt plus 5cm}int gpio\-\_\-read (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{gpio}
\end{DoxyParamCaption}
)}}\label{CommunicationV0_2gpio__functions_8c_ae18413a0edf151e47a7aa6be21c5144a}


Definition at line 3 of file gpio\-\_\-functions.\-c.



References F\-A\-I\-L\-U\-R\-E.


\begin{DoxyCode}
4 \{
5   FILE *fp\_gpio=NULL;
6   \textcolor{keywordtype}{char} path[30];
7   \textcolor{keywordtype}{char} fp\_value;
8 
9   sprintf(path,\textcolor{stringliteral}{"/sys/class/gpio/gpio%d/value"},gpio);
10   \textcolor{keywordflow}{if}( (fp\_gpio=fopen(path,\textcolor{stringliteral}{"rb+"})) == NULL )
11   \{
12     printf(\textcolor{stringliteral}{"Open %s failed\(\backslash\)n"},path);
13     \textcolor{keywordflow}{return} -1;
14   \}
15   rewind(fp\_gpio);
16   fread(&fp\_value, 1, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), fp\_gpio);
17   fclose(fp\_gpio);
18   \textcolor{keywordflow}{return} (uint8\_t)fp\_value-0x30;  
19 \}
\end{DoxyCode}
\hypertarget{CommunicationV0_2gpio__functions_8c_a9672ca43e65fa527cd6bf43db9aea594}{\index{Communication\-V0/gpio\-\_\-functions.\-c@{Communication\-V0/gpio\-\_\-functions.\-c}!gpio\-\_\-write@{gpio\-\_\-write}}
\index{gpio\-\_\-write@{gpio\-\_\-write}!CommunicationV0/gpio_functions.c@{Communication\-V0/gpio\-\_\-functions.\-c}}
\subsubsection[{gpio\-\_\-write}]{\setlength{\rightskip}{0pt plus 5cm}int gpio\-\_\-write (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{gpio, }
\item[{uint8\-\_\-t}]{value}
\end{DoxyParamCaption}
)}}\label{CommunicationV0_2gpio__functions_8c_a9672ca43e65fa527cd6bf43db9aea594}


Definition at line 21 of file gpio\-\_\-functions.\-c.



References F\-A\-I\-L\-U\-R\-E, and S\-U\-C\-C\-E\-S\-S.


\begin{DoxyCode}
22 \{
23   FILE *fp\_gpio;
24   \textcolor{keywordtype}{char} path[30];
25   \textcolor{keywordtype}{char} fp\_read[4];
26   \textcolor{keywordtype}{char} fp\_write;
27 
28 \textcolor{comment}{// Verifying if GPIO is set as Output}
29   sprintf(path,\textcolor{stringliteral}{"/sys/class/gpio/gpio%d/direction"},gpio);
30 
31   \textcolor{keywordflow}{if}( (fp\_gpio=fopen(path,\textcolor{stringliteral}{"r"})) == NULL )
32   \{
33     printf(\textcolor{stringliteral}{"Open %s failed\(\backslash\)n"},path);
34     \textcolor{keywordflow}{return} -1;
35   \}
36   rewind(fp\_gpio);
37   fread(fp\_read, 3, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), fp\_gpio);
38   \textcolor{keywordflow}{if}( strcmp(fp\_read,\textcolor{stringliteral}{"out"} ) )
39   \{
40     printf(\textcolor{stringliteral}{"Gpio%d is set as Input. Impossible to write."},gpio);
41     \textcolor{keywordflow}{return} -2;
42   \}
43   fclose(fp\_gpio);
44 
45 \textcolor{comment}{// Writing}
46   sprintf(path,\textcolor{stringliteral}{"/sys/class/gpio/gpio%d/value"},gpio);
47   
48   \textcolor{keywordflow}{if}( (fp\_gpio=fopen(path,\textcolor{stringliteral}{"w"})) == NULL )
49   \{
50     printf(\textcolor{stringliteral}{"Open %s failed\(\backslash\)n"},path);
51     \textcolor{keywordflow}{return} -1;
52   \}
53   rewind(fp\_gpio);
54   fp\_write=0x30+value;
55   fwrite(&fp\_write, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), 1, fp\_gpio);
56   fclose(fp\_gpio);
57   \textcolor{keywordflow}{return} 1;
58 \}
\end{DoxyCode}
